Summary,Issue key,Issue id,Issue Type,Status,Project key,Project name,Project type,Project lead,Project lead id,Project description,Priority,Resolution,Assignee,Assignee Id,Reporter,Reporter Id,Creator,Creator Id,Created,Updated,Last Viewed,Resolved,Due date,Votes,Labels,Description,Environment,Watchers,Watchers,Watchers,Watchers,Watchers Id,Watchers Id,Watchers Id,Watchers Id,Original estimate,Remaining Estimate,Time Spent,Work Ratio,Σ Original Estimate,Σ Remaining Estimate,Σ Time Spent,Security Level,Inward issue link (Blocks),Inward issue link (Blocks),Inward issue link (Blocks),Inward issue link (Blocks),Outward issue link (Blocks),Outward issue link (Blocks),Inward issue link (Relates),Outward issue link (Relates),Attachment,Attachment,Attachment,Attachment,Attachment,Custom field (Affected services),Custom field (Atlas project key),Custom field (Atlas project status),Custom field (Business Owner),Custom field (Business Value),Custom field (Category),Custom field (Comments Transfer),Custom field (Compass),Custom field (DPP: Data Practice Work Type),Custom field (Deadline),Custom field (Development),Custom field (Development),Custom field (Due Date),Custom field (Effort),Custom field (Epic Color),Custom field (Epic Name),Custom field (Epic Status),Custom field (Estimation (T-Shirt)),Custom field (Flagged),Custom field (Group ID),Custom field (Hours spent),Custom field (Impact),Custom field (Inputs),Custom field (Issue color),Custom field (Locked forms),Custom field (Mitigation Actions),Custom field (Open forms),Custom field (Original Estimate (hours effort)),Custom field (Outputs),Custom field (Rank),Custom field (Reference ID),Custom field (Request Type),Custom field (Request language),Custom field (Request participants),Custom field (Revenue Source),Satisfaction rating,Custom field (Scrum Test Team),Sprint,Sprint,Sprint,Sprint,Sprint,Custom field (Start Date),Custom field (Start date),Custom field (Story Level),Custom field (Story Points),Custom field (Story point estimate),Custom field (Submitted forms),Custom field (Target end),Custom field (Target start),Custom field (Team),Custom field (Time to first response),Custom field (Time to resolution),Custom field (Total forms),Custom field (Value),Custom field (Value),Custom field ([CHART] Date of First Response),Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Parent,Parent summary,Status Category
HIGH: Regression testing against new alcohol excise data,HOTT-3542,29665,Story,Done,HOTT,HMRC Online Trade Tariff,software,Carl Gabriel,61bc5259b24f10007027f21a,,Minor,Done,,,Matt Lavis,557058:bd906919-b0e3-4ec1-af61-1b1c41c6a595,Matt Lavis,557058:bd906919-b0e3-4ec1-af61-1b1c41c6a595,29/Jun/23 11:53 AM,07/Aug/23 9:54 AM,06/Sep/23 1:50 PM,06/Aug/23 9:56 PM,,0,ott_report_2023_august,,,Matt Lavis,,,,557058:bd906919-b0e3-4ec1-af61-1b1c41c6a595,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,{},,,,,,,,,,,,,,,,,,1|hzzza6:hyxi,,,,,,,,HOTT Sprint 60,HOTT Sprint 60,HOTT Sprint 61,,,,,,,,,,,,,,,,,,"29/Jun/23 11:54 AM;557058:bd906919-b0e3-4ec1-af61-1b1c41c6a595;Setting to blocked, as the data is yet to be received",,,,,,,,,,,,,,,,29440,Alcohol duties,Done
LOW: Round down to 2 digits in the duty calculator at line item basis,HOTT-3633,29756,Story,Done,HOTT,HMRC Online Trade Tariff,software,Carl Gabriel,61bc5259b24f10007027f21a,,Minor,Done,William Fish,5fad1d0c8573800069e74d00,Matt Lavis,557058:bd906919-b0e3-4ec1-af61-1b1c41c6a595,Matt Lavis,557058:bd906919-b0e3-4ec1-af61-1b1c41c6a595,13/Jul/23 12:22 PM,11/Aug/23 12:31 PM,13/Sep/23 9:06 AM,06/Aug/23 9:56 PM,,0,ott_report_2023_august,"From a demo in CDS of the new alcohol duties, it is clear that evey duty line is rounded down to 2 digits.

Any further arithmetic that then takes place is enacted upon the rounded down numbers, not the full source.

Please can we have as a part of the steps for each line on th DC, the act of rounding down.

i.e. 62.555, 62.556, 62.559 etc. all get rounded down to 62.55, not up to 62.56.

*Testing*

This is best tested by using a commodity code that has duties that are expressed in decimals, and provide a set of variables that are also in decimals, to make the multiplication as long as possible in terms of decimal points.

To that end:

* Commodity code *0206299159*
* Measure SID *20124959*
* Measure type ID *123* (preferential quota under authorsied use)
* Origin 1011 (Erga Omnes), so in the duty calculator, you can enter any country (e.g. Argentina)

The duty expression is:

20.00% + £1789.56 / 1,000 kg

Therefore if you supply the following:

|*Value*|127.37|
|*Tonnes*|4.77|
| | |
|*Duty - pre rounding*|8561.6752 (which would be rounded up to 8561.68|
|*Duty - post rounding*|8561.67|",,Matt Lavis,,,,557058:bd906919-b0e3-4ec1-af61-1b1c41c6a595,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,{},,,,,,,,,,,,,,,,,,1|hzzk3e:,,,,,,,,HOTT Sprint 59,HOTT Sprint 60,HOTT Sprint 60,HOTT Sprint 62,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,29440,Alcohol duties,Done
HIGHEST: Support threshold conditions on duty calculator that influence duties,HOTT-3649,29772,Story,Done,HOTT,HMRC Online Trade Tariff,software,Carl Gabriel,61bc5259b24f10007027f21a,,Minor,Done,William Fish,5fad1d0c8573800069e74d00,Matt Lavis,557058:bd906919-b0e3-4ec1-af61-1b1c41c6a595,Matt Lavis,557058:bd906919-b0e3-4ec1-af61-1b1c41c6a595,14/Jul/23 12:11 PM,02/Aug/23 10:39 AM,13/Sep/23 9:06 AM,01/Aug/23 12:47 PM,,0,ott_report_2023_august,"We have never supported measure conditions with thresholds before. Historically we have only ever looked at document conditions

To enable threshold condition support for the new excise conditions we will want too:

# Surface new condition measurement units (currently we only surface component measurement units) limited to only the new excise measures (maybe consider the condition code/measure type id, etc, to filter these.
# Transition the duty calculator to using these new threshold units (starting with asking for them and following with performing the logic required to make sure we’re calculating correctly based on the thresholds",,Matt Lavis,William Fish,,,557058:bd906919-b0e3-4ec1-af61-1b1c41c6a595,5fad1d0c8573800069e74d00,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,{},,,,,,,,,,,,,,,,,,1|hzzz9v:w,,,,,,,,HOTT Sprint 60,HOTT Sprint 61,,,,,,,,8.0,,,,,,,,,,2023-07-17 14:31:30.662,"17/Jul/23 3:31 PM;5fad1d0c8573800069e74d00;I’m having a bit of back and forth with Matt on this. I think I can bypass making changes to the returned units to the backend. Either because:

# The units for the condition are always the same as the units for the component so these are already being asked, or because
# When the user knows and picks the additional code they’re implicitly making a choice about meeting the threshold of the measure’s duty-bearing  condition so all we need to do is pull that in the duty calculator",,,,,,,,,,,,,,,,29440,Alcohol duties,Done
Alcohol duties are showing multiplied or divided by 100 on production,HOTT-3720,29874,Story,Done,HOTT,HMRC Online Trade Tariff,software,Carl Gabriel,61bc5259b24f10007027f21a,,Minor,Done,William Fish,5fad1d0c8573800069e74d00,Matt Lavis,557058:bd906919-b0e3-4ec1-af61-1b1c41c6a595,Matt Lavis,557058:bd906919-b0e3-4ec1-af61-1b1c41c6a595,28/Jul/23 8:38 AM,01/Aug/23 10:17 AM,13/Sep/23 9:06 AM,31/Jul/23 3:02 PM,,0,ott_report_2023_august,"On URL

[https://www.trade-tariff.service.gov.uk/commodities/2204214410?day=28&month=8&year=2023#vat_excise|https://www.trade-tariff.service.gov.uk/commodities/2204214410?day=28&month=8&year=2023#vat_excise|smart-link] 

The data is showing as either 100x too much or 100x too little.

Try excise code *X378*

!image-20230728-073906.png|width=100%!

*On the requirement*

0.0349 should be 3.49

0.0849 should be 8.49

1.00 should be 100

*On the action*

1908.00 GBP should be 19.08 GBP",,Matt Lavis,,,,557058:bd906919-b0e3-4ec1-af61-1b1c41c6a595,,,,,,,,,,,,,,,,,,,,28/Jul/23 8:39 AM;Matt.Lavis;image-20230728-073906.png;https://transformuk.atlassian.net/rest/api/3/attachment/content/18019,,,,,,,,,,,,,,,,{},,,,,,,,,,,,,,,,,,1|hzzza4:r,,,,,,,,HOTT Sprint 61,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,29440,Alcohol duties,Done
"Need to be able to enter 0 in the SPR field. At the moment, this is not being permitted",HOTT-3758,29922,Story,Done,HOTT,HMRC Online Trade Tariff,software,Carl Gabriel,61bc5259b24f10007027f21a,,Minor,Done,William Fish,5fad1d0c8573800069e74d00,Matt Lavis,557058:bd906919-b0e3-4ec1-af61-1b1c41c6a595,Matt Lavis,557058:bd906919-b0e3-4ec1-af61-1b1c41c6a595,02/Aug/23 4:53 PM,03/Aug/23 5:07 PM,13/Sep/23 9:06 AM,03/Aug/23 4:08 PM,,0,ott_report_2023_august,"[https://www.trade-tariff.service.gov.uk/commodities/2204212890|https://www.trade-tariff.service.gov.uk/commodities/2204212890|smart-link] 



!image-20230802-160236.png|width=91.66666666666666%!",,Matt Lavis,,,,557058:bd906919-b0e3-4ec1-af61-1b1c41c6a595,,,,,,,,,,,,,,,,,,,,02/Aug/23 5:02 PM;Matt.Lavis;image-20230802-160236.png;https://transformuk.atlassian.net/rest/api/3/attachment/content/18027,,,,,,,,,,,,,,,,{},,,,,,,,,,,,,,,,,,1|hzzz9v:vj,,,,,,,,HOTT Sprint 61,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,29440,Alcohol duties,Done
Validation rules for the duty calculator,HOTT-3766,29932,Story,Done,HOTT,HMRC Online Trade Tariff,software,Carl Gabriel,61bc5259b24f10007027f21a,,Minor,Done,William Fish,5fad1d0c8573800069e74d00,William Fish,5fad1d0c8573800069e74d00,William Fish,5fad1d0c8573800069e74d00,03/Aug/23 9:35 AM,03/Aug/23 5:07 PM,13/Sep/23 9:06 AM,03/Aug/23 4:08 PM,,0,ott_report_2023_august,"We need to come up with some validation rules for the following measurement units

My suggestion would be to come up with rulesets/classifications that can be reused and also specific rules (e.g. min_value/max_value, min_length, max_length, etc)

{noformat} percentage:

 {
  ""max"": 100,
  ""min"": 0
 }

 money:

 {
   ""min"": 0.001
 }

 discount:
 {
   ""min"": 0
 }
 
 volume:

 {
   ""only_positive"": true,
 }

 number:

 {
   ""only_positive"": true,
 }

 weight:

 {
   ""only_positive"": true,
 }

 length:

 {
  ""only_positive"": true,
 ]
{noformat}

{noformat}ASV        % vol                 percentage
ASVX       % vol/hl              is_compound
BRX        % sucrose             percentage
CCT        ct/l                  weight
CEN        100 p/st              number
CTM        c/k                   weight
DAP        10 000 kg/polar       weight
DHS        kg DHS                weight
DTN        100 kg                weight
DTNE       100 kg/net eda        weight
DTNF       100 kg common wheat   weight
DTNG       100 kg/br             weight
DTNL       100 kg live weight    weight
DTNM       100 kg/net mas        weight
DTNR       100 kg std qual       weight
DTNS       100 kg raw sugar      weight
DTNZ       100 kg/net/%sacchar.  weight
EUR        EUR                   money
GFI        gi F/S                weight
GRM        g                     weight
GRT        GT                    weight
HLT        hl                    volume
HMT        100 m                 length
KCC        kg C₅H₁₄ClNO₂         weight
KCL        tonne KCl             weight
KGM        kg                    weight
KGMA       kg/tot/alc            weight
KGME       kg/net eda            weight
KGMG       GKG                   weight
KGMP       kg/lactic matter      weight
KGMS       kg/raw sugar          weight
KGMT       kg/dry lactic matter  weight
KLT        1,000 l               volume
KMA        kg methylamines       weight
KMT        KM                    length
KNI        kg N                  weight
KNS        kg H₂O₂               weight
KPH        kg KOH                weight
KPO        kg K₂O                weight
KPP        kg P₂O₅               weight
KSD        kg 90% sdt            weight
KSH        kg NaOH               weight
KUR        kg U                  weight
LPA        l alc. 100%           volume
LTR        l                     volume
LTRA       L total alc.          volume
MIL        1,000 p/st            number
MPR        1,000 pa              number
MTK        m²                    length
MTQ        m³                    length
MTQC       1,000 m³              length
MTR        m                     length
MWH        1,000 kWh             number
NAR        p/st                  number
NARB       b/f                   number
NCL        ce/el                 number
NPR        pa                    number
RET        GBP                   money
SPQLPA     for each litre of pure alcohol, multiplied by the SPR discount is_compound
SPQLTR     for each litre of pure alcohol, multiplied by the SPR discount is_compound
SPR        SPR discount          discount
TJO        TJ                    number
TNE        1,000 kg              weight
TNEE       1,000 kg/net eda      weight
TNEI       1,000 kg/biodiesel    weight
TNEJ       1,000 kg/fuel content weight
TNEK       1,000 kg/bioethanol   weight
TNEM       1,000 kg/net mas      weight
TNER       1,000 kg std qual     weight
TNEZ       1,000 kg/net/%saccha. weight
WAT        Watt                  number
{noformat}",,William Fish,,,,5fad1d0c8573800069e74d00,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,{},,,,,,,,,,,,,,,,,,1|hzzz9v:vk,,,,,,,,HOTT Sprint 61,,,,,,,,,5.0,,,,,,,,,,,,,,,,,,,,,,,,,,,29440,Alcohol duties,Done
Support Intradev on ASV condition component calculations,HOTT-3770,29936,Story,Done,HOTT,HMRC Online Trade Tariff,software,Carl Gabriel,61bc5259b24f10007027f21a,,Minor,Done,Matt Lavis,557058:bd906919-b0e3-4ec1-af61-1b1c41c6a595,Matt Lavis,557058:bd906919-b0e3-4ec1-af61-1b1c41c6a595,Matt Lavis,557058:bd906919-b0e3-4ec1-af61-1b1c41c6a595,03/Aug/23 3:58 PM,03/Aug/23 5:10 PM,13/Sep/23 9:06 AM,03/Aug/23 5:09 PM,,0,ott_report_2023_august,,,Matt Lavis,,,,557058:bd906919-b0e3-4ec1-af61-1b1c41c6a595,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,{},,,,,,,,,,,,,,,,,,1|hzzza6:hyx,,,,,,,,HOTT Sprint 61,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,29440,Alcohol duties,Done
Support the HMRC understanding of the SPQ unit,HOTT-3789,29956,Story,Done,HOTT,HMRC Online Trade Tariff,software,Carl Gabriel,61bc5259b24f10007027f21a,,Minor,Done,Matt Lavis,557058:bd906919-b0e3-4ec1-af61-1b1c41c6a595,Matt Lavis,557058:bd906919-b0e3-4ec1-af61-1b1c41c6a595,Matt Lavis,557058:bd906919-b0e3-4ec1-af61-1b1c41c6a595,08/Aug/23 11:35 AM,09/Aug/23 9:25 PM,13/Sep/23 9:06 AM,09/Aug/23 2:25 PM,,0,ott_report_2023_august,,,Matt Lavis,,,,557058:bd906919-b0e3-4ec1-af61-1b1c41c6a595,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,{},,,,,,,,,,,,,,,,,,1|hzzza6:hyxxx,,,,,,,,HOTT Sprint 61,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,29440,Alcohol duties,Done
Change the presentation of the SPQ unit on alcohol excise condition popups,HOTT-3795,29963,Story,Done,HOTT,HMRC Online Trade Tariff,software,Carl Gabriel,61bc5259b24f10007027f21a,,Minor,Done,William Fish,5fad1d0c8573800069e74d00,Matt Lavis,557058:bd906919-b0e3-4ec1-af61-1b1c41c6a595,Matt Lavis,557058:bd906919-b0e3-4ec1-af61-1b1c41c6a595,09/Aug/23 12:05 PM,06/Sep/23 4:23 PM,13/Sep/23 9:06 AM,29/Aug/23 11:34 AM,,0,ott_report_2023_august,"Instead of just using the CDS data, which we are doing at the moment, and expanding this out to make sense in English (as much as is possible)



Apply the duty
9.27 GBP / % vol/hl - £1.00 / for each litre of pure alcohol, multiplied by the SPR discount



We have been asked to use this format for SPQ units:

Apply the duty

(£9.27 - SPR discount) / vol% / hl

----

This is a pretty fundamental change, as it is going to be the first time in which we are not showing representations of all of the measure components.

The single clause above is a combination of the first and second clauses in the measure condition components.

Here is an example, using this SQL

{code:sql}select * from measure_condition_components mcc 
where measure_condition_sid = -1010135046{code}

||*measure_condition_sid*||*duty_expression_id*||*duty_amount*||*monetary_unit_code*||*measurement_unit_code*||*measurement_unit_qualifier_code*||
|-1010135046|1|927|GBP|ASV|X|
|-1010135046|2|1|GBP|SPQ| |

SPQ effectively is the SPR discount, and we are transposing this from clause 2 into clause 1, and abandoning clause 1 (red bit below)

This might need to be a special snowflake, as there is unlikely to ever be a requirement to replicate this elsewhere.

(£9.27 - {color:#ff5630}SPR discount{color}) vol% / hl",,Matt Lavis,William Fish,,,557058:bd906919-b0e3-4ec1-af61-1b1c41c6a595,5fad1d0c8573800069e74d00,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,{},,,,,,,,,,,,,,,,,,1|hzzk2f:0009,,,,,,,,HOTT Sprint 62,,,,,,,,,5.0,,,,,,,,,,2023-08-23 14:35:02.932,"23/Aug/23 3:35 PM;5fad1d0c8573800069e74d00;This feels really horrible. So I have some options:

# Replace the components when there are SPQ with a single SPQA (SPQ Adjusted) component so that when we receive this in the duty expression formatter we can handle this there
# Change the frontend and duty calculator implementations so that we’re adjusting the display of SPQ",,,,,,,,,,,,,,,,29440,Alcohol duties,Done
Support CDS team re: CustomsClear SPQ / SPR issues,HOTT-3829,29997,Story,Done,HOTT,HMRC Online Trade Tariff,software,Carl Gabriel,61bc5259b24f10007027f21a,,Minor,Done,Matt Lavis,557058:bd906919-b0e3-4ec1-af61-1b1c41c6a595,Matt Lavis,557058:bd906919-b0e3-4ec1-af61-1b1c41c6a595,Matt Lavis,557058:bd906919-b0e3-4ec1-af61-1b1c41c6a595,11/Aug/23 4:11 PM,15/Aug/23 8:21 PM,13/Sep/23 9:06 AM,15/Aug/23 8:20 PM,,0,ott_report_2023_august,"Frmo Ngozi

Hi Chris,

 

Good afternoon.

 

I have had a query from Deloitte 9SWD) stating that the json generated from [Using the Commodities API - Trade Tariff API (trade-tariff.service.gov.uk)|https://api.trade-tariff.service.gov.uk/the-commodities-api.html#an-overall-approach-to-parsing-the-api] contains reference to SPQ instead of SPR.

 

Could you kindly validate this claim and respond to me, so I understand how that can be corrected?",,Matt Lavis,,,,557058:bd906919-b0e3-4ec1-af61-1b1c41c6a595,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,{},,,,,,,,,,,,,,,,,,1|hzzk3k:d,,,,,,,,HOTT Sprint 62,,,,,,,,,3.0,,,,,,,,,,,,,,,,,,,,,,,,,,,29440,Alcohol duties,Done
Alcohol Query difference in Rate between Tariff and OTT,HOTT-3896,30095,Story,Done,HOTT,HMRC Online Trade Tariff,software,Carl Gabriel,61bc5259b24f10007027f21a,,Minor,Done,William Fish,5fad1d0c8573800069e74d00,Carl Gabriel,61bc5259b24f10007027f21a,Carl Gabriel,61bc5259b24f10007027f21a,24/Aug/23 12:32 PM,06/Sep/23 4:23 PM,25/Aug/23 4:54 PM,25/Aug/23 4:54 PM,,0,ott_report_2023_august,,,Carl Gabriel,William Fish,,,61bc5259b24f10007027f21a,5fad1d0c8573800069e74d00,,,,,,,,,,,,,,,,,,,24/Aug/23 3:20 PM;ug:04210bea-1700-439d-9571-555e94283a15;image-20230824-141949.png;https://transformuk.atlassian.net/rest/api/3/attachment/content/18075,,,,,,,,,,,,,,,,{},,,,,,,,,,,,,,,,,,1|hzzk2f:03,,,,,,,,HOTT Sprint 62,,,,,,,,,,,,,,,,,,,2023-08-24 13:59:39.908,"24/Aug/23 12:33 PM;61bc5259b24f10007027f21a;Hi Matt/Chris,

Good morning.

 

I am reviewing a query re Commodity [2204219695|]. We have it configured in Tariff as £31.64/hl but I can see that that on OTT, it is showing as £28.74 / litre of pure (100%) alcohol (l alc. 100%).

 

Would you be able to explain how we got £28.74? Is it from the Tariff config? Why is it different from the Tariff?

 

I understand LPA is different to ltr but I am struggling with how £31.64/hl = £28.74/LPA

 

On the SPQ issue, CDS will be responding to SWDs so while I would prefer to not surface SPQ on OTT to avoid unnecessary confusion, I will let CDS do an official response.

 

Kind Regards,

*Ngozi Anajuba*

 

Rock Scrum Team | CDIO Enterprise Platform Services | Customs Borders and International (CB&I) |

| 6th Floor E, Alexander House, Southend, SS99 1AA | 03000 520676 | [ngozi.anajuba@hmrc.gov.uk|mailto:ngozi.anajuba@hmrc.gov.uk]","24/Aug/23 2:59 PM;5fad1d0c8573800069e74d00;I can’t see anywhere in this commodity where there’s a positive condition component that expresses as LPA so this is a bit confusing.

My best guess is they’re doing calculations on multiple commodities in the same browser and depending on which tab they have open are getting confusing results on a refresh","24/Aug/23 3:06 PM;61bc5259b24f10007027f21a;[~accountid:5fad1d0c8573800069e74d00] thanks , would we able to take screen shots to show they are the same on both pages ? ",24/Aug/23 3:19 PM;5fad1d0c8573800069e74d00;Just shared with [~accountid:616d85b9892c420072e008ca] ,"24/Aug/23 3:20 PM;5fad1d0c8573800069e74d00;!image-20230824-141949.png|width=608,height=701!

This is basically the only measure condition for alcohol excise measures that applies to this commodity. There’s no LPA component",,,,,,,,,,,,29440,Alcohol duties,Done
Review DBT set setup - MT122 (Major incidents),HOTT-3816,29984,Story,Done,HOTT,HMRC Online Trade Tariff,software,Carl Gabriel,61bc5259b24f10007027f21a,,Minor,Done,Matt Lavis,557058:bd906919-b0e3-4ec1-af61-1b1c41c6a595,Matt Lavis,557058:bd906919-b0e3-4ec1-af61-1b1c41c6a595,Matt Lavis,557058:bd906919-b0e3-4ec1-af61-1b1c41c6a595,10/Aug/23 8:27 AM,11/Aug/23 1:46 PM,13/Sep/23 9:06 AM,10/Aug/23 8:27 AM,,0,ott_report_2023_august,,,Matt Lavis,,,,557058:bd906919-b0e3-4ec1-af61-1b1c41c6a595,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,{},,,,,,,,,0.5,,,,,,,,,1|hzzza6:hyxxzi,,,,,,,,HOTT Sprint 61,,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,,,,,,,,,28948,CDS major incidents,Done
MI++ change management consultancy,HOTT-3821,29989,Story,Done,HOTT,HMRC Online Trade Tariff,software,Carl Gabriel,61bc5259b24f10007027f21a,,Minor,Done,Matt Lavis,557058:bd906919-b0e3-4ec1-af61-1b1c41c6a595,Matt Lavis,557058:bd906919-b0e3-4ec1-af61-1b1c41c6a595,Matt Lavis,557058:bd906919-b0e3-4ec1-af61-1b1c41c6a595,11/Aug/23 12:25 PM,11/Aug/23 1:15 PM,13/Sep/23 9:06 AM,11/Aug/23 12:28 PM,,0,ott_report_2023_august,,,Matt Lavis,,,,557058:bd906919-b0e3-4ec1-af61-1b1c41c6a595,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,{},,,,,,,,,0.75,,,,,,,,,1|hzzk3g:,,,,,,,,HOTT Sprint 62,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,28948,CDS major incidents,Done
MI + MT112 suspension data validation,HOTT-3822,29990,Story,Done,HOTT,HMRC Online Trade Tariff,software,Carl Gabriel,61bc5259b24f10007027f21a,,Minor,Done,Matt Lavis,557058:bd906919-b0e3-4ec1-af61-1b1c41c6a595,Matt Lavis,557058:bd906919-b0e3-4ec1-af61-1b1c41c6a595,Matt Lavis,557058:bd906919-b0e3-4ec1-af61-1b1c41c6a595,11/Aug/23 12:25 PM,12/Aug/23 11:47 AM,13/Sep/23 9:06 AM,11/Aug/23 1:44 PM,,0,ott_report_2023_august,,,Matt Lavis,,,,557058:bd906919-b0e3-4ec1-af61-1b1c41c6a595,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,{},,,,,,,,,1.5,,,,,,,,,1|hzzk3i:,,,,,,,,HOTT Sprint 62,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,28948,CDS major incidents,Done
the mouse-over tooltip is giving 'open' as the action when it should be 'close' and vice-versa for headings and subheadings,HOTT-3567,29690,Bug,Done,HOTT,HMRC Online Trade Tariff,software,Carl Gabriel,61bc5259b24f10007027f21a,,Minor,Done,Alessandro DeSimone,6125108d7a1bfb0071787b51,Bhavani Prasad Bandla,61e847f6b134e8007020bcb5,Bhavani Prasad Bandla,61e847f6b134e8007020bcb5,03/Jul/23 4:40 PM,06/Sep/23 4:28 PM,26/Jul/23 10:20 AM,23/Aug/23 9:38 AM,,0,ott_report_2023_august,"*Steps to reproduce:*

* Navigate to URL [https://www.trade-tariff.service.gov.uk/headings/0811|https://www.trade-tariff.service.gov.uk/headings/0811|smart-link] 
* Go to [+Open all headings+|https://www.trade-tariff.service.gov.uk/headings/0811#] [+Close all headings+|https://www.trade-tariff.service.gov.uk/headings/0811#] section
* Mouse over the text and observe the tooltip option

*Expected result:* The mouse-over tooltip option should be ‘close’ when the text is not expanded and The mouse-over tooltip option should be ‘open’ when the headings/subheadings are expanded to ensure that it’s in line with the current headings or subheadings hierarchy.

*Actual result:* The mouse-over tooltip is giving 'open' as the action when it should be 'close' and vice-versa for headings and subheadings.

Observed this issue in production and staging as well.",,Bhavani Prasad Bandla,Jeremy Wilkins,Sunitha Vorsu,,61e847f6b134e8007020bcb5,70121:25672516-c580-41e3-b0ee-efd76637d027,712020:fed6ef31-9984-4aaf-9e4d-ba9df0923524,,,,,,,,,,,,,,,,,,03/Jul/23 4:32 PM;ug:2b4752f7-7e8b-4d5a-b92d-d09212c01c1b;Screenshot 2023-07-03 at 4.13.34 pm.png;https://transformuk.atlassian.net/rest/api/3/attachment/content/17964,03/Jul/23 4:32 PM;ug:2b4752f7-7e8b-4d5a-b92d-d09212c01c1b;Screenshot 2023-07-03 at 4.14.06 pm.png;https://transformuk.atlassian.net/rest/api/3/attachment/content/17961,03/Jul/23 4:32 PM;ug:2b4752f7-7e8b-4d5a-b92d-d09212c01c1b;Screenshot 2023-07-03 at 4.32.33 pm.png;https://transformuk.atlassian.net/rest/api/3/attachment/content/17962,03/Jul/23 4:40 PM;ug:2b4752f7-7e8b-4d5a-b92d-d09212c01c1b;Screenshot 2023-07-03 at 4.40.12 pm.png;https://transformuk.atlassian.net/rest/api/3/attachment/content/17963,08/Aug/23 11:08 AM;712020:fed6ef31-9984-4aaf-9e4d-ba9df0923524;Verified_Tooltipmsg_fixes_Staging.docx;https://transformuk.atlassian.net/rest/api/3/attachment/content/18043,,,,,,,,,,,,{},,,,,,,,,,,,,,,,,,1|hzzk2f:9,,,,,,,,HOTT Sprint 61,HOTT Sprint 62,,,,,,,,,,,,,,,,,,2023-08-04 14:34:15.427,"04/Aug/23 3:34 PM;70121:25672516-c580-41e3-b0ee-efd76637d027;Pull Request 1570
https://github.com/trade-tariff/trade-tariff-frontend/pull/1570

Review App
https://tariff-frontend-pr1570.london.cloudapps.digital/","08/Aug/23 11:08 AM;712020:fed6ef31-9984-4aaf-9e4d-ba9df0923524;Verified the fixes in staging environment. Its working fine as expected

[^Verified_Tooltipmsg_fixes_Staging.docx]

",,,,,,,,,,,,,,,25701,Cosmetic changes,Done
Presentation of subheadings on the A-Z is wrong,HOTT-3778,29945,Story,Done,HOTT,HMRC Online Trade Tariff,software,Carl Gabriel,61bc5259b24f10007027f21a,,Minor,Done,Alessandro DeSimone,6125108d7a1bfb0071787b51,Matt Lavis,557058:bd906919-b0e3-4ec1-af61-1b1c41c6a595,Matt Lavis,557058:bd906919-b0e3-4ec1-af61-1b1c41c6a595,06/Aug/23 12:41 PM,06/Sep/23 4:28 PM,13/Sep/23 9:06 AM,23/Aug/23 9:38 AM,,0,ott_report_2023_august,"The product line suffix is something that we should not ever show on the UI of the OTT (albeit in the URL it’s okay)

On the OTT UI, A-Z section, the page looks like this:

[https://www.trade-tariff.service.gov.uk/a-z-index/a|https://www.trade-tariff.service.gov.uk/a-z-index/a] 

The final 2 digits in the 12 digits shown below are the product line suffix, which should be suppressed.

!image-20230806-114146.png|width=75%!



The 5 items that are highlighted should show respectively as:

* Subheading 8472 90
* Subheading 8479 89
* Subheading 0804 40
* Subheading 4420 11
* Subheading 6306 12

The rules of thumb for *subheadings*, which might be displayed with either 6 or 8 significant digits are …

* do not ever show the product line suffix
* where there are 6 significant digits, suppress the final 4 digits
* where there are 8 significant digits, suppress the final 2 digits
* split the subheading after the first 4 digits with a pseudo-space (using CSS), so the entire 8 digits can be selected",,Jeremy Wilkins,Matt Lavis,,,70121:25672516-c580-41e3-b0ee-efd76637d027,557058:bd906919-b0e3-4ec1-af61-1b1c41c6a595,,,,,,,,,,,,,,,,,,,06/Aug/23 12:48 PM;Matt.Lavis;image-20230806-114146.png;https://transformuk.atlassian.net/rest/api/3/attachment/content/18038,,,,,,,,,,,,,,,,{},,,,,,,,,,,,,,,,,,1|hzzk2g:,,,,,,,,HOTT Sprint 61,HOTT Sprint 62,,,,,,,,,,,,,,,,,,2023-08-09 08:42:23.555,"09/Aug/23 9:42 AM;70121:25672516-c580-41e3-b0ee-efd76637d027;Pull Request 1581
https://github.com/trade-tariff/trade-tariff-frontend/pull/1581

Review App
https://tariff-frontend-pr1581.london.cloudapps.digital/",,,,,,,,,,,,,,,,25701,Cosmetic changes,Done
"On headers, subheaders, positioning of the column title ""Commodity code"" on the XI tariff is wrong, due to the omission of the VAT column",HOTT-3779,29946,Story,Done,HOTT,HMRC Online Trade Tariff,software,Carl Gabriel,61bc5259b24f10007027f21a,,Minor,Done,William Fish,5fad1d0c8573800069e74d00,Matt Lavis,557058:bd906919-b0e3-4ec1-af61-1b1c41c6a595,Matt Lavis,557058:bd906919-b0e3-4ec1-af61-1b1c41c6a595,06/Aug/23 2:35 PM,06/Sep/23 4:23 PM,13/Sep/23 9:06 AM,29/Aug/23 11:34 AM,,0,ott_report_2023_august,"*On headings*

Screen grab below is taken from the URL

[https://www.trade-tariff.service.gov.uk/xi/headings/0101|https://www.trade-tariff.service.gov.uk/xi/headings/0101|smart-link] 

!image-20230806-133537.png|width=1302,height=552!

Because there is no VAT column (which is present on the UK version of the site), the commodity code column header is pushed further left than it should be: it should be to the right, above the commodity code itself.

*On subheadings*

[https://www.trade-tariff.service.gov.uk/xi/subheadings/0101210000-10|https://www.trade-tariff.service.gov.uk/xi/subheadings/0101210000-10|smart-link] 

!image-20230806-133734.png|width=1241,height=385!

Same as on headings, the column header needs to be shifted to the right.",,Jeremy Wilkins,Matt Lavis,,,70121:25672516-c580-41e3-b0ee-efd76637d027,557058:bd906919-b0e3-4ec1-af61-1b1c41c6a595,,,,,,,,,,,,,,,,,,,06/Aug/23 2:38 PM;Matt.Lavis;image-20230806-133537.png;https://transformuk.atlassian.net/rest/api/3/attachment/content/18040,06/Aug/23 2:38 PM;Matt.Lavis;image-20230806-133734.png;https://transformuk.atlassian.net/rest/api/3/attachment/content/18039,,,,,,,,,,,,,,,{},,,,,,,,,,,,,,,,,,1|hzzk2f:001,,,,,,,,HOTT Sprint 62,,,,,,,,,3.0,,,,,,,,,,2023-08-25 14:44:21.75,"25/Aug/23 3:44 PM;70121:25672516-c580-41e3-b0ee-efd76637d027;Pull Request 1603
https://github.com/trade-tariff/trade-tariff-frontend/pull/1603

Review App
https://tariff-frontend-pr1603.london.cloudapps.digital/",,,,,,,,,,,,,,,,25701,Cosmetic changes,Done
Small textual changes to the email to HMRC with the Excel version of the CDS UK XML overnight load,HOTT-3817,29985,Story,Done,HOTT,HMRC Online Trade Tariff,software,Carl Gabriel,61bc5259b24f10007027f21a,,Minor,Done,William Fish,5fad1d0c8573800069e74d00,Matt Lavis,557058:bd906919-b0e3-4ec1-af61-1b1c41c6a595,Matt Lavis,557058:bd906919-b0e3-4ec1-af61-1b1c41c6a595,11/Aug/23 8:31 AM,06/Sep/23 4:23 PM,13/Sep/23 9:06 AM,29/Aug/23 11:34 AM,,0,ott_report_2023_august,"Please can we make two changes to the email that is sent overnight when a data load happens

# Change the email address to [hmrc-trade-tariff-support-g@digital.hmrc.gov.uk|mailto:hmrc-trade-tariff-support-g@digital.hmrc.gov.uk]
# The second of the two dates (here shown with a red ring) should be one day after (and differ by plus one day from the data above it). This is the date on which the data was loaded rather than the date on which it was produced.

!image-20230811-073155.png|width=75%!",,Matt Lavis,,,,557058:bd906919-b0e3-4ec1-af61-1b1c41c6a595,,,,,,,,,,,,,,,,,,,,11/Aug/23 8:34 AM;Matt.Lavis;image-20230811-073155.png;https://transformuk.atlassian.net/rest/api/3/attachment/content/18050,,,,,,,,,,,,,,,,{},,,,,,,,,,,,,,,,,,1|hzzk2f:002,,,,,,,,HOTT Sprint 62,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,25701,Cosmetic changes,Done
"Adjust missing VAT report to use SIDs, not IDs",HOTT-3831,29999,Story,Done,HOTT,HMRC Online Trade Tariff,software,Carl Gabriel,61bc5259b24f10007027f21a,,Minor,Done,Matt Lavis,557058:bd906919-b0e3-4ec1-af61-1b1c41c6a595,Matt Lavis,557058:bd906919-b0e3-4ec1-af61-1b1c41c6a595,Matt Lavis,557058:bd906919-b0e3-4ec1-af61-1b1c41c6a595,12/Aug/23 11:46 AM,12/Aug/23 11:47 AM,13/Sep/23 9:06 AM,12/Aug/23 11:46 AM,,0,ott_report_2023_august,,,Matt Lavis,,,,557058:bd906919-b0e3-4ec1-af61-1b1c41c6a595,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,{},,,,,,,,,,,,,,,,,,1|hzzk3i:r,,,,,,,,HOTT Sprint 62,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,29372,Differences and anomalies report,Done
Electronic Tariff File 2023-08-03,HOTT-3761,29925,Story,Done,HOTT,HMRC Online Trade Tariff,software,Carl Gabriel,61bc5259b24f10007027f21a,,Minor,Done,Matt Lavis,557058:bd906919-b0e3-4ec1-af61-1b1c41c6a595,Matt Lavis,557058:bd906919-b0e3-4ec1-af61-1b1c41c6a595,Matt Lavis,557058:bd906919-b0e3-4ec1-af61-1b1c41c6a595,03/Aug/23 6:20 AM,03/Aug/23 6:21 AM,13/Sep/23 9:06 AM,03/Aug/23 6:20 AM,,0,ott_report_2023_august,,,Matt Lavis,,,,557058:bd906919-b0e3-4ec1-af61-1b1c41c6a595,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,{},,,,,,,,,,,,,,,,,,1|hzzza6:hx,,,,,,,,HOTT Sprint 61,,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,,,,,,,,,27822,Electronic Tariff File - BAU generation & support,Done
Electronic Tariff File 2023-08-10,HOTT-3762,29926,Story,Done,HOTT,HMRC Online Trade Tariff,software,Carl Gabriel,61bc5259b24f10007027f21a,,Minor,Done,Matt Lavis,557058:bd906919-b0e3-4ec1-af61-1b1c41c6a595,Matt Lavis,557058:bd906919-b0e3-4ec1-af61-1b1c41c6a595,Matt Lavis,557058:bd906919-b0e3-4ec1-af61-1b1c41c6a595,03/Aug/23 6:21 AM,10/Aug/23 6:11 PM,13/Sep/23 9:06 AM,10/Aug/23 11:19 AM,10/Aug/23 12:00 AM,0,ott_report_2023_august,,,Matt Lavis,,,,557058:bd906919-b0e3-4ec1-af61-1b1c41c6a595,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,{},,,,,,,,,,,,,,,,,,1|hzzza6:hyxxzr,,,,,,,,HOTT Sprint 61,,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,,,,,,,,,27822,Electronic Tariff File - BAU generation & support,Done
Electronic Tariff File 2023-08-17,HOTT-3763,29927,Story,Done,HOTT,HMRC Online Trade Tariff,software,Carl Gabriel,61bc5259b24f10007027f21a,,Minor,Done,William Fish,5fad1d0c8573800069e74d00,Matt Lavis,557058:bd906919-b0e3-4ec1-af61-1b1c41c6a595,Matt Lavis,557058:bd906919-b0e3-4ec1-af61-1b1c41c6a595,03/Aug/23 6:22 AM,06/Sep/23 4:23 PM,13/Sep/23 9:06 AM,25/Aug/23 4:12 PM,17/Aug/23 12:00 AM,0,ott_report_2023_august,,,Matt Lavis,,,,557058:bd906919-b0e3-4ec1-af61-1b1c41c6a595,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,{},,,,,,,,,,,,,,,,,,1|hzzk2f:01,,,,,,,,HOTT Sprint 62,,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,,,,,,,,,27822,Electronic Tariff File - BAU generation & support,Done
Electronic Tariff File 2023-08-24,HOTT-3764,29928,Story,Done,HOTT,HMRC Online Trade Tariff,software,Carl Gabriel,61bc5259b24f10007027f21a,,Minor,Done,William Fish,5fad1d0c8573800069e74d00,Matt Lavis,557058:bd906919-b0e3-4ec1-af61-1b1c41c6a595,Matt Lavis,557058:bd906919-b0e3-4ec1-af61-1b1c41c6a595,03/Aug/23 6:23 AM,06/Sep/23 4:23 PM,13/Sep/23 9:06 AM,25/Aug/23 4:12 PM,24/Aug/23 12:00 AM,0,ott_report_2023_august,,,Matt Lavis,,,,557058:bd906919-b0e3-4ec1-af61-1b1c41c6a595,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,{},,,,,,,,,,,,,,,,,,1|hzzk2f:00i,,,,,,,,HOTT Sprint 62,,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,,,,,,,,,27822,Electronic Tariff File - BAU generation & support,Done
"When there are no export measures on a commodity, do not show the (empty) measures table",HOTT-3534,29657,Story,Done,HOTT,HMRC Online Trade Tariff,software,Carl Gabriel,61bc5259b24f10007027f21a,,Minor,Done,Alessandro DeSimone,6125108d7a1bfb0071787b51,Matt Lavis,557058:bd906919-b0e3-4ec1-af61-1b1c41c6a595,Matt Lavis,557058:bd906919-b0e3-4ec1-af61-1b1c41c6a595,28/Jun/23 1:42 PM,06/Sep/23 4:28 PM,26/Jul/23 10:21 AM,23/Aug/23 9:38 AM,,0,ott_report_2023_august,"An example commodity code is here:

[https://www.trade-tariff.service.gov.uk/commodities/0102291010#export|https://www.trade-tariff.service.gov.uk/commodities/0102291010#export|smart-link] 

There are no export measures that the UK imposes for getting this type of cattle out of the UK.

But, we show an empty table.

!image-20230628-124425.png|width=1240,height=863!

Instead of showing an empty table, if there are no measures, please can we use the following:

Using the gov.uk [warning text component|https://design-system.service.gov.uk/components/warning-text/], add in this text:



{noformat}There are no export measures for this commodity.{noformat}



*Warning wording*

The warning component uses the term “Warning” as hidden text to distinguish it from the surrounding copy for users of assistive technology

This is too harsh - can we use the term “Important information” instead of the term “Warning” for the hidden text.

{panel:bgColor=#deebff}
If thr requirement above is a major faff, then let’s not bother. It’s only if this is an easy change.
{panel}

!image-20230628-124742.png|width=1088,height=491!",,Alessandro DeSimone,Matt Lavis,,,6125108d7a1bfb0071787b51,557058:bd906919-b0e3-4ec1-af61-1b1c41c6a595,,,,,,,,,,,,,,,,,,,01/Aug/23 6:40 PM;ug:3a69215b-b507-450d-8a78-ccac1f2209c5;Screenshot 2023-08-01 at 18.22.58.png;https://transformuk.atlassian.net/rest/api/3/attachment/content/18025,28/Jun/23 1:51 PM;Matt.Lavis;image-20230628-124425.png;https://transformuk.atlassian.net/rest/api/3/attachment/content/17950,28/Jun/23 1:51 PM;Matt.Lavis;image-20230628-124742.png;https://transformuk.atlassian.net/rest/api/3/attachment/content/17951,,,,,,,,,,,,,,{},,,,,,,,,,,,,,,,,,1|hzzk2f:4,,,,,,,,HOTT Sprint 61,HOTT Sprint 62,,,,,,,,,,,,,,,,,,2023-08-01 17:40:07.298,"01/Aug/23 6:40 PM;6125108d7a1bfb0071787b51;Hi[~accountid:557058:bd906919-b0e3-4ec1-af61-1b1c41c6a595], since the page shows the “EU export controls” too, this is how it will be rendered:

!Screenshot 2023-08-01 at 18.22.58.png|width=761,height=517!


How does it look? 
I’d not suggest using just a unique message: consider that we can have scenarios where only UK(or EU) have export measures (and vice-versa).","02/Aug/23 7:53 AM;557058:bd906919-b0e3-4ec1-af61-1b1c41c6a595;Thanks [~accountid:6125108d7a1bfb0071787b51] - if it is not too difficult to show a joined up message, then that would be very nice

Could it be written:

*Export controls*

! There are no UK or EU export measures for this commodity on this date.",,,,,,,,,,,,,,,29778,Export enhancements,Done
Add UK export measures to the XI service,HOTT-3570,29693,Story,Done,HOTT,HMRC Online Trade Tariff,software,Carl Gabriel,61bc5259b24f10007027f21a,,Minor,Done,Alessandro DeSimone,6125108d7a1bfb0071787b51,Matt Lavis,557058:bd906919-b0e3-4ec1-af61-1b1c41c6a595,Matt Lavis,557058:bd906919-b0e3-4ec1-af61-1b1c41c6a595,03/Jul/23 9:53 PM,02/Aug/23 10:39 AM,13/Sep/23 9:06 AM,01/Aug/23 12:47 PM,,0,ott_report_2023_august,"We have been asked to add the UK export measures to the XI export tab.

Can we please do this like we have done on the equivalent XI import tab where we have:

* EU import measures shown first
* followed by UK import measures



On the export tab, please can we show:

* EU export measures shown first
* followed by UK export measures
* followed by the link to CHEG (the DBT tool).

Below is just a mock-up, as the 2nd table is just a copy of the first, but the headings are;

* EU export controls
* UK export controls

While we are doing this, please can we look at a couple of other things

* Please can we add a full-stop to the end of the “Intrastat” sentence.
* Please can we split the 8-digit commodity code into 2 groups of 4 characters, e.g. “7102 1000”.

!image-20230703-205922.png|width=66.66666666666666%!",,Jeremy Wilkins,Matt Lavis,,,70121:25672516-c580-41e3-b0ee-efd76637d027,557058:bd906919-b0e3-4ec1-af61-1b1c41c6a595,,,,,,,,,,,,,,,,,,,03/Jul/23 9:59 PM;Matt.Lavis;image-20230703-205922.png;https://transformuk.atlassian.net/rest/api/3/attachment/content/17965,,,,,,,,,,,,,,,,{},,,,,,,,,,,,,,,,,,1|hzzz9v:vl,,,,,,,,HOTT Sprint 60,HOTT Sprint 60,HOTT Sprint 61,,,,,,,,,,,,,,,,,2023-07-28 08:48:28.435,"28/Jul/23 9:48 AM;70121:25672516-c580-41e3-b0ee-efd76637d027;Pull Request 1560
https://github.com/trade-tariff/trade-tariff-frontend/pull/1560

Review App
https://tariff-frontend-pr1560.london.cloudapps.digital/","28/Jul/23 11:30 AM;70121:25672516-c580-41e3-b0ee-efd76637d027;Pull Request 1560
https://github.com/trade-tariff/trade-tariff-frontend/pull/1560

Review App
https://tariff-frontend-pr1560.london.cloudapps.digital/","28/Jul/23 2:41 PM;70121:25672516-c580-41e3-b0ee-efd76637d027;Pull Request 1560
https://github.com/trade-tariff/trade-tariff-frontend/pull/1560

Review App
https://tariff-frontend-pr1560.london.cloudapps.digital/","28/Jul/23 3:31 PM;70121:25672516-c580-41e3-b0ee-efd76637d027;Pull Request 1560
https://github.com/trade-tariff/trade-tariff-frontend/pull/1560

Review App
https://tariff-frontend-pr1560.london.cloudapps.digital/","31/Jul/23 12:08 PM;70121:25672516-c580-41e3-b0ee-efd76637d027;Pull Request 1560
https://github.com/trade-tariff/trade-tariff-frontend/pull/1560

Review App
https://tariff-frontend-pr1560.london.cloudapps.digital/","31/Jul/23 2:38 PM;70121:25672516-c580-41e3-b0ee-efd76637d027;Pull Request 1560
https://github.com/trade-tariff/trade-tariff-frontend/pull/1560

Review App
https://tariff-frontend-pr1560.london.cloudapps.digital/",,,,,,,,,,,29778,Export enhancements,Done
Make supplementary units of type 109 appear in the export tab as well as the import tab,HOTT-3686,29809,Story,Done,HOTT,HMRC Online Trade Tariff,software,Carl Gabriel,61bc5259b24f10007027f21a,,Minor,Done,Alessandro DeSimone,6125108d7a1bfb0071787b51,Matt Lavis,557058:bd906919-b0e3-4ec1-af61-1b1c41c6a595,Matt Lavis,557058:bd906919-b0e3-4ec1-af61-1b1c41c6a595,24/Jul/23 11:15 AM,06/Sep/23 4:28 PM,13/Sep/23 9:06 AM,23/Aug/23 9:38 AM,,0,ott_report_2023_august,"Measures of type 109 should appear in both the import and export tabs.

109 means “Supplementary unit” and they apply to both the import and export of goods, not just to the import.

Although we show the supp unit on the top part of the comm code page, which is both import and export focussed, we are missing a trick by not showing it on the export tabs as well.

{panel:bgColor=#deebff}
This applies only to measures of type 109, not 110

110 is explicitly for import related supp unit measures

There is a further export-specific supp unit, 111, which has never been used, but we could make ourselves future-proof, in case it does get used by adding 111 to the list of displayed measures on the export tab.
{panel}",,Alessandro DeSimone,Jeremy Wilkins,Matt Lavis,Sunitha Vorsu,6125108d7a1bfb0071787b51,70121:25672516-c580-41e3-b0ee-efd76637d027,557058:bd906919-b0e3-4ec1-af61-1b1c41c6a595,712020:fed6ef31-9984-4aaf-9e4d-ba9df0923524,,,,,,,,,,,,,,,,,04/Aug/23 2:54 PM;712020:fed6ef31-9984-4aaf-9e4d-ba9df0923524;image-20230804-135030.png;https://transformuk.atlassian.net/rest/api/3/attachment/content/18034,04/Aug/23 2:54 PM;712020:fed6ef31-9984-4aaf-9e4d-ba9df0923524;image-20230804-135057.png;https://transformuk.atlassian.net/rest/api/3/attachment/content/18037,04/Aug/23 2:54 PM;712020:fed6ef31-9984-4aaf-9e4d-ba9df0923524;image-20230804-135105.png;https://transformuk.atlassian.net/rest/api/3/attachment/content/18036,04/Aug/23 2:54 PM;712020:fed6ef31-9984-4aaf-9e4d-ba9df0923524;image-20230804-135113.png;https://transformuk.atlassian.net/rest/api/3/attachment/content/18035,,,,,,,,,,,,,{},,,,,,,,,,,,,,,,,,1|hzzk2f:2,,,,,,,,HOTT Sprint 61,HOTT Sprint 62,,,,,,,,,,,,,,,,,,2023-08-01 13:12:28.359,"01/Aug/23 2:12 PM;70121:25672516-c580-41e3-b0ee-efd76637d027;Pull Request 1567
https://github.com/trade-tariff/trade-tariff-frontend/pull/1567

Review App
https://tariff-frontend-pr1567.london.cloudapps.digital/","01/Aug/23 4:41 PM;70121:25672516-c580-41e3-b0ee-efd76637d027;Pull Request 1567
https://github.com/trade-tariff/trade-tariff-frontend/pull/1567

Review App
https://tariff-frontend-pr1567.london.cloudapps.digital/","02/Aug/23 3:19 PM;70121:25672516-c580-41e3-b0ee-efd76637d027;Pull Request 1567
https://github.com/trade-tariff/trade-tariff-frontend/pull/1567

Review App
https://tariff-frontend-pr1567.london.cloudapps.digital/","02/Aug/23 5:28 PM;70121:25672516-c580-41e3-b0ee-efd76637d027;Pull Request 1567
https://github.com/trade-tariff/trade-tariff-frontend/pull/1567

Review App
https://tariff-frontend-pr1567.london.cloudapps.digital/","03/Aug/23 9:23 AM;70121:25672516-c580-41e3-b0ee-efd76637d027;Pull Request 1567
https://github.com/trade-tariff/trade-tariff-frontend/pull/1567

Review App
https://tariff-frontend-pr1567.london.cloudapps.digital/","03/Aug/23 11:32 AM;70121:25672516-c580-41e3-b0ee-efd76637d027;Pull Request 1567
https://github.com/trade-tariff/trade-tariff-frontend/pull/1567

Review App
https://tariff-frontend-pr1567.london.cloudapps.digital/","03/Aug/23 11:44 AM;70121:25672516-c580-41e3-b0ee-efd76637d027;Pull Request 1567
https://github.com/trade-tariff/trade-tariff-frontend/pull/1567

Review App
https://tariff-frontend-pr1567.london.cloudapps.digital/","03/Aug/23 11:55 AM;70121:25672516-c580-41e3-b0ee-efd76637d027;Pull Request 1567
https://github.com/trade-tariff/trade-tariff-frontend/pull/1567

Review App
https://tariff-frontend-pr1567.london.cloudapps.digital/","03/Aug/23 12:39 PM;70121:25672516-c580-41e3-b0ee-efd76637d027;Pull Request 1567
https://github.com/trade-tariff/trade-tariff-frontend/pull/1567

Review App
https://tariff-frontend-pr1567.london.cloudapps.digital/","04/Aug/23 11:25 AM;70121:25672516-c580-41e3-b0ee-efd76637d027;Pull Request 1567
https://github.com/trade-tariff/trade-tariff-frontend/pull/1567

Review App
https://tariff-frontend-pr1567.london.cloudapps.digital/","04/Aug/23 11:39 AM;70121:25672516-c580-41e3-b0ee-efd76637d027;Pull Request 1567
https://github.com/trade-tariff/trade-tariff-frontend/pull/1567

Review App
https://tariff-frontend-pr1567.london.cloudapps.digital/","04/Aug/23 11:44 AM;70121:25672516-c580-41e3-b0ee-efd76637d027;Pull Request 1567
https://github.com/trade-tariff/trade-tariff-frontend/pull/1567

Review App
https://tariff-frontend-pr1567.london.cloudapps.digital/","04/Aug/23 11:57 AM;70121:25672516-c580-41e3-b0ee-efd76637d027;Pull Request 1567
https://github.com/trade-tariff/trade-tariff-frontend/pull/1567

Review App
https://tariff-frontend-pr1567.london.cloudapps.digital/","04/Aug/23 2:28 PM;70121:25672516-c580-41e3-b0ee-efd76637d027;Pull Request 1567
https://github.com/trade-tariff/trade-tariff-frontend/pull/1567

Review App
https://tariff-frontend-pr1567.london.cloudapps.digital/","04/Aug/23 2:34 PM;70121:25672516-c580-41e3-b0ee-efd76637d027;Pull Request 1567
https://github.com/trade-tariff/trade-tariff-frontend/pull/1567

Review App
https://tariff-frontend-pr1567.london.cloudapps.digital/","04/Aug/23 2:54 PM;712020:fed6ef31-9984-4aaf-9e4d-ba9df0923524;While doing the testing , I have observed the below 

commodity: 0101210000 

for export tab ‘Supplementary unit’ is displayed under both  *UK export controls* and *EU export controls*  sections but this is the not case with import tab, for the import tab  ‘Supplementary unit’ is displaying in different area/section not similar as export tab

Please verify the below screens for more details:

Export tab:

!image-20230804-135030.png|width=697,height=564!

Import tab:

!image-20230804-135057.png|width=451,height=393!

!image-20230804-135105.png|width=451,height=284!

!image-20230804-135113.png|width=451,height=386!

Let me know if my understanding/anything  is wrong",29778,Export enhancements,Done
"On the comm code export tab, wherever there is a supplementary unit, show the supp unit's value",HOTT-3739,29903,Story,Done,HOTT,HMRC Online Trade Tariff,software,Carl Gabriel,61bc5259b24f10007027f21a,,Minor,Done,Alessandro DeSimone,6125108d7a1bfb0071787b51,Matt Lavis,557058:bd906919-b0e3-4ec1-af61-1b1c41c6a595,Matt Lavis,557058:bd906919-b0e3-4ec1-af61-1b1c41c6a595,01/Aug/23 3:03 PM,06/Sep/23 4:28 PM,13/Sep/23 9:06 AM,23/Aug/23 9:38 AM,,0,ott_report_2023_august,"As part of a separate ticket [https://transformuk.atlassian.net/browse/HOTT-3686|https://transformuk.atlassian.net/browse/HOTT-3686|smart-link], supplementary units are being reintroduced onto the export tab on the commodity code page.

This ticket covers an additional requirement, which is to:

* show an additional column on the export measures table, labelled as “Value” *only* when there is a supplementary unit of type 109 (or 111).

If there is no supp unit measure:

* do not show the “Value” column

h2. Visuals

Here is what it might look like …

{panel:bgColor=#deebff}
Please note .. it is a nice to have to call the column “Value”

Calling it the default, which is Duty rate, is also fine.
{panel}

h2. When there is an export-related supplementary unit (type 109 or 111)

* Add in the value column
* Add in the duty expression for the supp unit in the relevant row under the Value heading
* Leave the cell blank where there is no value (every other export measure type that is not a supp unit)

!image-20230801-142838.png|width=1189,height=262!

h2. When there is no export-related supplementary unit (type 109 or 111)

!image-20230801-142510.png|width=1192,height=213!



{panel:bgColor=#deebff}
Please note that there have never been any measures of type 111.
{panel}",,Matt Lavis,,,,557058:bd906919-b0e3-4ec1-af61-1b1c41c6a595,,,,,,,,,,,,,,,,,,,,01/Aug/23 3:29 PM;Matt.Lavis;image-20230801-142510.png;https://transformuk.atlassian.net/rest/api/3/attachment/content/18023,01/Aug/23 3:29 PM;Matt.Lavis;image-20230801-142838.png;https://transformuk.atlassian.net/rest/api/3/attachment/content/18024,,,,,,,,,,,,,,,{},,,,,,,,,,,,,,,,,,1|hzzk2f:i,,,,,,,,HOTT Sprint 61,HOTT Sprint 62,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,29778,Export enhancements,Done
Export tab updates - use cases and examples,HOTT-3759,29923,Story,Done,HOTT,HMRC Online Trade Tariff,software,Carl Gabriel,61bc5259b24f10007027f21a,,Minor,Done,Matt Lavis,557058:bd906919-b0e3-4ec1-af61-1b1c41c6a595,Matt Lavis,557058:bd906919-b0e3-4ec1-af61-1b1c41c6a595,Matt Lavis,557058:bd906919-b0e3-4ec1-af61-1b1c41c6a595,02/Aug/23 5:29 PM,03/Aug/23 8:39 AM,13/Sep/23 9:06 AM,02/Aug/23 5:32 PM,,0,ott_report_2023_august,"So there are no commodities at all where there are UK export measures, but no XI export measures, oddly, but

These have both:

0101210000
0101299000
0101300000
0102310000
0102399000

These have XI only

0101291000
0101900000
0102211000
0102213000
0102219000
0102290500



And these have neither

9880010000
9880020000
9880030000
9880040000
9880050000
9880060000
9880070000",,Matt Lavis,,,,557058:bd906919-b0e3-4ec1-af61-1b1c41c6a595,,,,,,,,,,,,,,,,,,,,02/Aug/23 5:31 PM;Matt.Lavis;tariff_data_2023-08-02.xlsx;https://transformuk.atlassian.net/rest/api/3/attachment/content/18028,,,,,,,,,,,,,,,,{},,,,,,,,,,,,,,,,,,1|hzzza6:hv,,,,,,,,HOTT Sprint 61,,,,,,,,,3.0,,,,,,,,,,,,,,,,,,,,,,,,,,,29778,Export enhancements,Done
Make sure a full regression test passes,HOTT-2798,28777,Story,Done,HOTT,HMRC Online Trade Tariff,software,Carl Gabriel,61bc5259b24f10007027f21a,,Minor,Done,Amber Cronin,61f276eccb7c5f006b0086d5,William Fish,5fad1d0c8573800069e74d00,William Fish,5fad1d0c8573800069e74d00,03/Mar/23 2:10 PM,06/Sep/23 4:26 PM,13/Sep/23 9:06 AM,24/Aug/23 4:44 PM,,0,ott_report_2023_august,,,William Fish,,,,5fad1d0c8573800069e74d00,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,{},,,,,,,,,,,,,,,,,,1|hzzk3i:u,,,,,,,,HOTT Sprint 62,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,28757,Migrate off PAAS,Done
Create ECS Service (signon),HOTT-3246,29369,Story,Done,HOTT,HMRC Online Trade Tariff,software,Carl Gabriel,61bc5259b24f10007027f21a,,Minor,Done,Amber Cronin,61f276eccb7c5f006b0086d5,Nick Winfield,641458a22cee496759eb1245,Nick Winfield,641458a22cee496759eb1245,26/May/23 10:37 AM,14/Aug/23 6:09 PM,13/Sep/23 9:06 AM,14/Aug/23 8:48 AM,,0,ott_report_2023_august,*See child tickets*,,Nick Winfield,,,,641458a22cee496759eb1245,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,{},,,,,,,,,,,,,,,,,,1|hzzk3i:v,,,,,,,,HOTT Sprint 61,HOTT Sprint 62,,,,,,,,8.0,,,,,,,,,,,,,,,,,,,,,,,,,,,28757,Migrate off PAAS,Done
Change Redis Cluster(s),HOTT-3747,29911,Task,Done,HOTT,HMRC Online Trade Tariff,software,Carl Gabriel,61bc5259b24f10007027f21a,,Minor,Done,Venkat Balasamudra,712020:ef36e9a8-b06d-4a35-894c-d4d83e829c3d,Amber Cronin,61f276eccb7c5f006b0086d5,Amber Cronin,61f276eccb7c5f006b0086d5,02/Aug/23 11:15 AM,09/Aug/23 9:25 PM,13/Sep/23 9:06 AM,09/Aug/23 5:37 PM,,0,ott_report_2023_august,"We need to make a change to the Redis cluster so that it is accessible by the applications.

*Background:*
The Terraform resources' API call creates the cluster leaves the endpoint fields blank, so nothing is able to connect to it correctly.",,Amber Cronin,Venkat Balasamudra,,,61f276eccb7c5f006b0086d5,712020:ef36e9a8-b06d-4a35-894c-d4d83e829c3d,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,{},,,,,,,,,,,,,,,,,,1|hzzza6:hyxxi,,,,,,,,HOTT Sprint 61,,,,,,,,,3.0,,,,,,,,,,2023-08-07 13:25:16.457,07/Aug/23 2:25 PM;712020:ef36e9a8-b06d-4a35-894c-d4d83e829c3d;PR - [https://github.com/trade-tariff/trade-tariff-platform-aws-terraform/pull/88|https://github.com/trade-tariff/trade-tariff-platform-aws-terraform/pull/88|smart-link] ,"08/Aug/23 12:13 PM;712020:ef36e9a8-b06d-4a35-894c-d4d83e829c3d;Redis v7.0.7 created and tested the connectivity and healchcheck from the backend application container and it works fine. 

{noformat}$ aws ecs execute-command --cluster trade-tariff-cluster-development --task arn:aws:ecs:eu-west-2:844815912454:task/trade-tariff-cluster-development/10454630be444879bff662c23d62c3bd --container backend-uk --interactive --command ""/bin/sh""

/app # nc -vz redis-backend-development.tx1uur.ng.0001.euw2.cache.amazonaws.com 6379
redis-backend-development.tx1uur.ng.0001.euw2.cache.amazonaws.com (10.0.1.169:6379) open
/app # 

/app # bundle exec rails c
Setting TimeMachine to Today
Loading production environment (Rails 7.0.6)
irb(main):001:0> 
irb(main):002:0> Healthcheck.instance.check
2023-08-08T10:36:09.319Z pid=149 tid=95l INFO: Sidekiq 7.0.9 connecting to Redis with options {:size=>5, :pool_name=>""internal"", :url=>""redis://redis-backend-development.tx1uur.ng.0001.euw2.cache.amazonaws.com:6379"", :db=>0, :id=>nil}
=> {:git_sha1=>""abebac6d"", :sidekiq=>false, :postgres=>true, :redis=>true, :opensearch=>true, :search_query_parser=>false, :healthy=>false}
irb(main):003:0> {noformat}",09/Aug/23 5:37 PM;712020:ef36e9a8-b06d-4a35-894c-d4d83e829c3d;Redis cluster deployment doc: [https://transformuk.atlassian.net/wiki/spaces/HOTT/pages/20957495308/ElastiCache+Redis+Cluster|https://transformuk.atlassian.net/wiki/spaces/HOTT/pages/20957495308/ElastiCache+Redis+Cluster|smart-link] ,,,,,,,,,,,,,,28757,Migrate off PAAS,Done
Create ECS Service (worker),HOTT-3788,29955,Story,Done,HOTT,HMRC Online Trade Tariff,software,Carl Gabriel,61bc5259b24f10007027f21a,,Minor,Done,Venkat Balasamudra,712020:ef36e9a8-b06d-4a35-894c-d4d83e829c3d,Venkat Balasamudra,712020:ef36e9a8-b06d-4a35-894c-d4d83e829c3d,Venkat Balasamudra,712020:ef36e9a8-b06d-4a35-894c-d4d83e829c3d,08/Aug/23 9:37 AM,15/Aug/23 4:32 PM,13/Sep/23 9:06 AM,15/Aug/23 11:38 AM,,0,ott_report_2023_august,"*Acceptance criteria*

# An ECS Service exists
# A Task Definition exists for the ECS Service
# A load balancer Target Group exists for the ECS Service, with listener rule
# A service level Security Group exists
# An IAM role exists for the ECS Service
# Use of data sources to fetch references from core infrastructure",,Venkat Balasamudra,,,,712020:ef36e9a8-b06d-4a35-894c-d4d83e829c3d,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,{},,,,,,,,,,,,,,,,,,1|hzzk3k:,,,,,,,,HOTT Sprint 61,HOTT Sprint 62,,,,,,,,,,,,,,,,,,,11/Aug/23 1:29 PM;712020:ef36e9a8-b06d-4a35-894c-d4d83e829c3d;PR: [https://github.com/trade-tariff/trade-tariff-backend/pull/1435|https://github.com/trade-tariff/trade-tariff-backend/pull/1435|smart-link] ,,,,,,,,,,,,,,,,28757,Migrate off PAAS,Done
Split Backend Redis to UK/XI,HOTT-3844,30016,Story,Done,HOTT,HMRC Online Trade Tariff,software,Carl Gabriel,61bc5259b24f10007027f21a,,Minor,Done,Amber Cronin,61f276eccb7c5f006b0086d5,Amber Cronin,61f276eccb7c5f006b0086d5,Amber Cronin,61f276eccb7c5f006b0086d5,15/Aug/23 10:53 AM,16/Aug/23 9:15 AM,13/Sep/23 9:06 AM,15/Aug/23 2:59 PM,,0,ott_report_2023_august,"Because the tool is split between UK and XI, we also need to split the backend redis between XI and UK.",,Amber Cronin,,,,61f276eccb7c5f006b0086d5,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,{},,,,,,,,,,,,,,,,,,1|hzzk3k:g,,,,,,,,HOTT Sprint 62,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,28757,Migrate off PAAS,Done
Create Redis Cluster for Signon Tool,HOTT-3851,30023,Story,Done,HOTT,HMRC Online Trade Tariff,software,Carl Gabriel,61bc5259b24f10007027f21a,,Minor,Done,Amber Cronin,61f276eccb7c5f006b0086d5,Amber Cronin,61f276eccb7c5f006b0086d5,Amber Cronin,61f276eccb7c5f006b0086d5,15/Aug/23 2:59 PM,06/Sep/23 4:30 PM,13/Sep/23 9:06 AM,16/Aug/23 11:36 AM,,0,ott_report_2023_august,"The Signon tool needs Redis, too.",,Amber Cronin,,,,61f276eccb7c5f006b0086d5,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,{},,,,,,,,,,,,,,,,,,1|i001nh:,,,,,,,,HOTT Sprint 62,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,28757,Migrate off PAAS,Done
Revise ECR Strategy,HOTT-3852,30024,Story,Done,HOTT,HMRC Online Trade Tariff,software,Carl Gabriel,61bc5259b24f10007027f21a,,Minor,Done,Venkat Balasamudra,712020:ef36e9a8-b06d-4a35-894c-d4d83e829c3d,Amber Cronin,61f276eccb7c5f006b0086d5,Amber Cronin,61f276eccb7c5f006b0086d5,15/Aug/23 3:02 PM,06/Sep/23 4:23 PM,13/Sep/23 9:06 AM,29/Aug/23 9:49 AM,,0,ott_report_2023_august,"Venkat suggested that we should have an ‘environment’ (read: new AWS organisational account) for the ECR repos. This way, we are not duplicating the repos across multiple AWS accounts, and not keeping multiple copies of images.

We would need to:

* -create new AWS account-   → Make use of Production account 
* create ECR repositories on this account
* allow other org accounts to pull from those ECR repos
* point the pipelines at the new ECR repos to push to them
* delete the ECR repos from the current development account",,Amber Cronin,Venkat Balasamudra,,,61f276eccb7c5f006b0086d5,712020:ef36e9a8-b06d-4a35-894c-d4d83e829c3d,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,{},,,,,,,,,,,,,,,,,,1|hzzk2f:004,,,,,,,,HOTT Sprint 62,,,,,,,,,,,,,,,,,,,2023-08-22 16:38:55.144,22/Aug/23 5:38 PM;712020:ef36e9a8-b06d-4a35-894c-d4d83e829c3d;We will delete ECR repositories from development account once develoeprs build new images and push to Production ECR repos and start making use of them.  ,,,,,,,,,,,,,,,,28757,Migrate off PAAS,Done
Ensure files are created in S3 for Search Query Parser,HOTT-3858,30030,Story,Done,HOTT,HMRC Online Trade Tariff,software,Carl Gabriel,61bc5259b24f10007027f21a,,Minor,Done,Amber Cronin,61f276eccb7c5f006b0086d5,Amber Cronin,61f276eccb7c5f006b0086d5,Amber Cronin,61f276eccb7c5f006b0086d5,16/Aug/23 9:15 AM,06/Sep/23 4:30 PM,13/Sep/23 9:06 AM,17/Aug/23 3:47 PM,,0,ott_report_2023_august,We need to ensure that the files the SQP requires are being created if not present.,,Amber Cronin,,,,61f276eccb7c5f006b0086d5,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,{},,,,,,,,,,,,,,,,,,1|i001nr:,,,,,,,,HOTT Sprint 62,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,28757,Migrate off PAAS,Done
Create blue/green deployment for services,HOTT-3876,30071,Story,Done,HOTT,HMRC Online Trade Tariff,software,Carl Gabriel,61bc5259b24f10007027f21a,,Minor,Done,Amber Cronin,61f276eccb7c5f006b0086d5,Amber Cronin,61f276eccb7c5f006b0086d5,Amber Cronin,61f276eccb7c5f006b0086d5,18/Aug/23 11:46 AM,06/Sep/23 4:27 PM,06/Sep/23 1:53 PM,24/Aug/23 3:37 PM,,0,ott_report_2023_august,,,Amber Cronin,,,,61f276eccb7c5f006b0086d5,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,{},,,,,,,,,,,,,,,,,,1|i001mp:,,,,,,,,HOTT Sprint 62,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,28757,Migrate off PAAS,Done
Enable Terraform state locking,HOTT-3884,30083,Story,Done,HOTT,HMRC Online Trade Tariff,software,Carl Gabriel,61bc5259b24f10007027f21a,,Minor,Done,Amber Cronin,61f276eccb7c5f006b0086d5,Amber Cronin,61f276eccb7c5f006b0086d5,Amber Cronin,61f276eccb7c5f006b0086d5,23/Aug/23 12:09 PM,06/Sep/23 4:23 PM,13/Sep/23 9:06 AM,25/Aug/23 2:12 PM,,0,ott_report_2023_august,,,Amber Cronin,Jeremy Wilkins,,,61f276eccb7c5f006b0086d5,70121:25672516-c580-41e3-b0ee-efd76637d027,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,{},,,,,,,,,,,,,,,,,,1|hzzk3i:ti,,,,,,,,HOTT Sprint 62,,,,,,,,,,,,,,,,,,,2023-08-25 12:48:24.081,"25/Aug/23 1:48 PM;70121:25672516-c580-41e3-b0ee-efd76637d027;Pull Request 1602
https://github.com/trade-tariff/trade-tariff-frontend/pull/1602

Review App
https://tariff-frontend-pr1602.london.cloudapps.digital/",,,,,,,,,,,,,,,,28757,Migrate off PAAS,Done
Promote infrastructure to Staging,HOTT-3885,30084,Story,Done,HOTT,HMRC Online Trade Tariff,software,Carl Gabriel,61bc5259b24f10007027f21a,,Minor,Done,Amber Cronin,61f276eccb7c5f006b0086d5,Amber Cronin,61f276eccb7c5f006b0086d5,Amber Cronin,61f276eccb7c5f006b0086d5,23/Aug/23 12:10 PM,06/Sep/23 4:27 PM,13/Sep/23 9:06 AM,23/Aug/23 3:41 PM,,0,ott_report_2023_august,,,Amber Cronin,,,,61f276eccb7c5f006b0086d5,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,{},,,,,,,,,,,,,,,,,,1|i001wn:,,,,,,,,HOTT Sprint 62,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,28757,Migrate off PAAS,Done
Promote infrastructure to Production,HOTT-3886,30085,Story,Done,HOTT,HMRC Online Trade Tariff,software,Carl Gabriel,61bc5259b24f10007027f21a,,Minor,Done,Venkat Balasamudra,712020:ef36e9a8-b06d-4a35-894c-d4d83e829c3d,Amber Cronin,61f276eccb7c5f006b0086d5,Amber Cronin,61f276eccb7c5f006b0086d5,23/Aug/23 12:10 PM,06/Sep/23 4:23 PM,13/Sep/23 9:06 AM,29/Aug/23 9:48 AM,,0,ott_report_2023_august,,,Amber Cronin,,,,61f276eccb7c5f006b0086d5,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,{},,,,,,,,,,,,,,,,,,1|hzzk2f:009,,,,,,,,HOTT Sprint 62,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,28757,Migrate off PAAS,Done
Create Secrets in Staging,HOTT-3894,30093,Story,Done,HOTT,HMRC Online Trade Tariff,software,Carl Gabriel,61bc5259b24f10007027f21a,,Minor,Done,Amber Cronin,61f276eccb7c5f006b0086d5,Amber Cronin,61f276eccb7c5f006b0086d5,Amber Cronin,61f276eccb7c5f006b0086d5,24/Aug/23 11:55 AM,06/Sep/23 4:27 PM,13/Sep/23 9:06 AM,24/Aug/23 12:34 PM,,0,ott_report_2023_august,,,Amber Cronin,,,,61f276eccb7c5f006b0086d5,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,{},,,,,,,,,,,,,,,,,,1|i001yf:,,,,,,,,HOTT Sprint 62,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,28757,Migrate off PAAS,Done
Rollout Blue-Green (zero-downtime) Deployment,HOTT-3895,30094,Story,Done,HOTT,HMRC Online Trade Tariff,software,Carl Gabriel,61bc5259b24f10007027f21a,,Minor,Done,Venkat Balasamudra,712020:ef36e9a8-b06d-4a35-894c-d4d83e829c3d,Venkat Balasamudra,712020:ef36e9a8-b06d-4a35-894c-d4d83e829c3d,Venkat Balasamudra,712020:ef36e9a8-b06d-4a35-894c-d4d83e829c3d,24/Aug/23 12:27 PM,06/Sep/23 4:24 PM,13/Sep/23 9:06 AM,25/Aug/23 10:30 AM,,0,ott_report_2023_august,Rollout Blue-Green (zero-downtime) Deployments to all services by using ecs module v1.11.3,,Jeremy Wilkins,Venkat Balasamudra,,,70121:25672516-c580-41e3-b0ee-efd76637d027,712020:ef36e9a8-b06d-4a35-894c-d4d83e829c3d,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,{},,,,,,,,,,,,,,,,,,1|i001yn:,,,,,,,,HOTT Sprint 62,,,,,,,,,,,,,,,,,,,2023-08-24 11:42:31.689,"24/Aug/23 12:42 PM;70121:25672516-c580-41e3-b0ee-efd76637d027;Pull Request 1599
https://github.com/trade-tariff/trade-tariff-frontend/pull/1599

Review App
https://tariff-frontend-pr1599.london.cloudapps.digital/",,,,,,,,,,,,,,,,28757,Migrate off PAAS,Done
Dump and Restore Staging Database,HOTT-3897,30096,Story,Done,HOTT,HMRC Online Trade Tariff,software,Carl Gabriel,61bc5259b24f10007027f21a,,Minor,Done,Amber Cronin,61f276eccb7c5f006b0086d5,Amber Cronin,61f276eccb7c5f006b0086d5,Amber Cronin,61f276eccb7c5f006b0086d5,25/Aug/23 9:34 AM,06/Sep/23 4:23 PM,13/Sep/23 9:06 AM,29/Aug/23 11:34 AM,,0,ott_report_2023_august,,,Amber Cronin,,,,61f276eccb7c5f006b0086d5,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,{},,,,,,,,,,,,,,,,,,1|hzzk3i:s,,,,,,,,HOTT Sprint 62,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,28757,Migrate off PAAS,Done
Confirm HMRC email distribution for the CSV file (if needed),HOTT-3394,29517,Story,Done,HOTT,HMRC Online Trade Tariff,software,Carl Gabriel,61bc5259b24f10007027f21a,,Minor,Done,Chris Booth,62850c48bd640f0068ae388e,Bhavani Prasad Bandla,61e847f6b134e8007020bcb5,Bhavani Prasad Bandla,61e847f6b134e8007020bcb5,13/Jun/23 3:00 PM,03/Aug/23 5:07 PM,13/Sep/23 9:06 AM,03/Aug/23 4:15 PM,,0,ott_report_2023_august,"This may need to go to:

* CDIO content team (e.g. James Doyle) if there is a requirement for that team to continue to load data to gov.uk
* will need to go to HMRC tariff management (Brian, Sarah, Dave etc) to load into Artifactory for CDS.",,Bhavani Prasad Bandla,Chris Booth,,,61e847f6b134e8007020bcb5,62850c48bd640f0068ae388e,,,,,,,,,,,,,,,,,HOTT-3715,,,,,,,,,,,,,,,,,,{},,,,,,,,,,,,,,,,,,1|hzzza6:hym,,,,,,,,HOTT Sprint 61,,,,,,,,,,,,,,,,,,,2023-08-02 15:11:37.044,"02/Aug/23 4:11 PM;62850c48bd640f0068ae388e;Got a call with James 3/8/23.

Have already spoken to TMT",,,,,,,,,,,,,,,,29320,Monthly Exchange rates,Done
Agree contract with API supplier,HOTT-3395,29518,Story,Done,HOTT,HMRC Online Trade Tariff,software,Carl Gabriel,61bc5259b24f10007027f21a,,Minor,Done,Carl Gabriel,61bc5259b24f10007027f21a,Bhavani Prasad Bandla,61e847f6b134e8007020bcb5,Bhavani Prasad Bandla,61e847f6b134e8007020bcb5,13/Jun/23 3:01 PM,02/Aug/23 10:39 AM,13/Sep/23 9:06 AM,02/Aug/23 10:23 AM,,0,ott_report_2023_august,,,Bhavani Prasad Bandla,,,,61e847f6b134e8007020bcb5,,,,,,,,,,,,,,,,HOTT-3396,,,,,,,,,,,,,,,,,,,,{},,,,,,,,,,,,,,,,,,1|hzzza6:,,,,,,,,HOTT Sprint 61,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,29320,Monthly Exchange rates,Done
Setup API supplier with Transform finance,HOTT-3396,29519,Story,Done,HOTT,HMRC Online Trade Tariff,software,Carl Gabriel,61bc5259b24f10007027f21a,,Minor,Done,,,Bhavani Prasad Bandla,61e847f6b134e8007020bcb5,Bhavani Prasad Bandla,61e847f6b134e8007020bcb5,13/Jun/23 3:01 PM,02/Aug/23 10:39 AM,13/Sep/23 9:06 AM,02/Aug/23 10:23 AM,,0,ott_report_2023_august,,,Bhavani Prasad Bandla,,,,61e847f6b134e8007020bcb5,,,,,,,,,,,,HOTT-3395,,,,,,,,,,,,,,,,,,,,,,,,{},,,,,,,,,,,,,,,,,,1|hzzza6:9,,,,,,,,HOTT Sprint 61,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,29320,Monthly Exchange rates,Done
Confirm HMRC email distribution list for the XML file (if required),HOTT-3407,29530,Story,Done,HOTT,HMRC Online Trade Tariff,software,Carl Gabriel,61bc5259b24f10007027f21a,,Minor,Done,Chris Booth,62850c48bd640f0068ae388e,Matt Lavis,557058:bd906919-b0e3-4ec1-af61-1b1c41c6a595,Matt Lavis,557058:bd906919-b0e3-4ec1-af61-1b1c41c6a595,13/Jun/23 4:34 PM,03/Aug/23 5:07 PM,13/Sep/23 9:06 AM,03/Aug/23 4:15 PM,,0,ott_report_2023_august,"It’s not clear if *anyone* will need the XML file once we have got our replacement for the Software Developer’s site complete & live.

Confirmation would be good though.",,Chris Booth,Matt Lavis,,,62850c48bd640f0068ae388e,557058:bd906919-b0e3-4ec1-af61-1b1c41c6a595,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,{},,,,,,,,,,,,,,,,,,1|hzzza6:hyk,,,,,,,,HOTT Sprint 61,,,,,,,,,,,,,,,,,,,2023-08-02 15:20:55.577,"02/Aug/23 4:20 PM;62850c48bd640f0068ae388e;I don’t believe anyone in HMRC needs the XML. We should continue to offer it to the outside world though as it’s cheaper and easier to provide it than it is to research the need/cause disruption in the trade. if we need to distribute to anyone in HMRC after the first implementation, that’s an easy edit",,,,,,,,,,,,,,,,29320,Monthly Exchange rates,Done
API - exchange_rate_period: Monthly exchange rates - taking year and month as input,HOTT-3475,29598,Story,Done,HOTT,HMRC Online Trade Tariff,software,Carl Gabriel,61bc5259b24f10007027f21a,,Minor,Done,Sam Johnson,712020:80041ef7-0b09-460d-88d5-06b59bcb0e60,Matt Lavis,557058:bd906919-b0e3-4ec1-af61-1b1c41c6a595,Matt Lavis,557058:bd906919-b0e3-4ec1-af61-1b1c41c6a595,22/Jun/23 4:02 PM,06/Sep/23 4:29 PM,13/Sep/23 9:06 AM,18/Aug/23 5:11 PM,,0,ott_report_2023_august,"*Input variables*

||*Variable*||*Notes*||
|Year|*1. No year specified, year specified - no data exists, or year variable is gibberish*
Nil result, e.g.
{noformat}{""errors"":[{""detail"":""not found""}]}{noformat}
Status code: 404 not found
*2. Year specified (as well as month)*
* Year can be provided in form  - {{%Y}} year with millennium and century (e.g. 2022, 2023)
* If month and year are provided, then return a valid response|
|Month|*1. No month specified, month specified - no data exists, or month variable is gibberish*
Nil result, e.g.
{noformat}{""errors"":[{""detail"":""not found""}]}{noformat}
Status code: 404 not found
*2. Month specified*
* Month can be provided in form  - {{%-m}} month as decimal number (e.g. 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12)
* If month and year are provided, then return a valid response|

*Business logic*

* return all the valid exchange rates, where:
** the start date of the exchange rate is on the first day of the month specified in the input variable
** the rate_type variable is {{scheduled}}
** i.e. do not return spot rates

*Conceptual output blocks*

*Conceptual block A - related to the month (edition)*

* the month name
* the year
* the CSV filename
* the CSV file size
* the XML filename
* the XML file size



*Conceptual block B - A list of all the included exchange rates*

For each exchange rate, include:

* Country / territory
* Currency
* Currency code
* Currency units per £1
* Start date
* End date

List in alphabetical order according to the country / territory

The JSON:API would look something like this:

{code:json}{
    ""data"": {
        ""id"": ""2023-06-exchange_rate_period"",
        ""type"": ""exchange_rate_period"",
        ""attributes"": {
            ""year"": 2023,
            ""month"": 6,
            ""publication_date"": ""2023-06-22T00:00:00.000Z""
        },
        ""relationships"": {
            ""files"": {
                ""data"": [
                    {
                        ""id"": ""2023-06-csv_file"",
                        ""type"": ""file""
                    },
                    {
                        ""id"": ""2023-06-xml_file"",
                        ""type"": ""file""
                    }
                ]
            },
            ""exchange_rates"": {
                ""data"": [
                    {
                        ""id"": ""2023-06-DH"",
                        ""type"": ""exchange_rate""
                    },
                    {
                        ""id"": ""2023-06-AF"",
                        ""type"": ""exchange_rate""
                    }
                ]
            }
        }
    },
    ""included"": [
        {
            ""id"": ""2023-06-csv_file"",
            ""type"": ""file"",
            ""attributes"": {
                ""file_path"": ""/exchange_rates/csv/exrates-monthly-0623.csv"",
                ""file_size"": 1770,
                ""format"": ""csv""
            }
        },
        {
            ""id"": ""2023-06-xml_file"",
            ""type"": ""file"",
            ""attributes"": {
                ""file_path"": ""/exchange_rates/csv/exrates-monthly-0623.xml"",
                ""file_size"": 1770,
                ""format"": ""xml""
            }
        },
        {
            ""id"": ""2023-06-DH"",
            ""type"": ""exchange_rate"",
            ""attributes"": {
                ""country"": ""Abu Dhabi"",
                ""country_code"": ""DH"",
                ""currency_description"": ""Dirham"",
                ""currency_code"": ""AED"",
                ""rate"": 4.5409,
                ""validity_start_date"": ""2023-06-01T00:00:00.000Z"",
                ""validity_end_date"": ""2023-06-31T23:59:59.999Z""
            }
        },
        {
            ""id"": ""2023-06-AL"",
            ""type"": ""exchange_rate"",
            ""attributes"": {
                ""country"": ""Albania"",
                ""country_code"": ""AL"",
                ""currency_description"": ""Lek"",
                ""currency_code"": ""ALL"",
                ""rate"": 127.3216,
                ""validity_start_date"": ""2023-06-01T00:00:00.000Z"",
                ""validity_end_date"": ""2023-06-31T23:59:59.999Z""
            }
        }
    ]
}{code}",,Matt Lavis,,,,557058:bd906919-b0e3-4ec1-af61-1b1c41c6a595,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,{},,,,,,,,,,,,,,,,,,1|hzzk3y:,,,,,,,,HOTT Sprint 59,HOTT Sprint 60,HOTT Sprint 60,HOTT Sprint 61,HOTT Sprint 62,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,29320,Monthly Exchange rates,Done
UI - show exchange rate periods (months) per year,HOTT-3476,29599,Story,Done,HOTT,HMRC Online Trade Tariff,software,Carl Gabriel,61bc5259b24f10007027f21a,,Minor,Done,Sunitha Vorsu,712020:fed6ef31-9984-4aaf-9e4d-ba9df0923524,Matt Lavis,557058:bd906919-b0e3-4ec1-af61-1b1c41c6a595,Matt Lavis,557058:bd906919-b0e3-4ec1-af61-1b1c41c6a595,22/Jun/23 4:04 PM,09/Aug/23 3:47 PM,13/Sep/23 9:06 AM,01/Aug/23 12:47 PM,,0,ott_report_2023_august,"As per prototype at the URL:

[https://trade-tariff-06e587f80c1f.herokuapp.com/tools/exchange_rates/exchange_rates|https://trade-tariff-06e587f80c1f.herokuapp.com/tools/exchange_rates/exchange_rates] 

or

[https://trade-tariff-06e587f80c1f.herokuapp.com/tools/exchange_rates/exchange_rates/2022|https://trade-tariff-06e587f80c1f.herokuapp.com/tools/exchange_rates/exchange_rates/2022] 



h1. Zones & Components

!show exchange rate periods (months) per year.drawio.png|width=75%!

h2. Page zones

||*Zone*||*Notes*||
|Breadcrumb|* Home links to /find-commodity
* Tools links to tools home
* Exchange rates links to whichever is the current year (as per API logic)
* Exchange rates for {year} links to the year selected’s page
It is fine if the last two links are the same|
|Title|{code:html}  2023 HMRC currency exchange rates for Customs and <abbr title=""value added tax"">VAT</abbr>{code}|
|Intro text|{code:html}<p class=""govuk-body-l"">Check the official 2023 HMRC foreign currency exchange monthly rates for Customs and <abbr title=""value added tax"">VAT</abbr>.
      </p>
      <p class=""govuk-body"">Data is available in online (HTML), CSV and XML formats.</p>{code}|
|HMRC link|{code:html}<dt class=""gem-c-metadata__term"">From:</dt>
                <dd class=""gem-c-metadata__definition"">
                  <a href=""https://www.gov.uk/government/organisations/hm-revenue-customs"">HM Revenue &amp; Customs</a>
                </dd>
                <dt class=""gem-c-metadata__term"">Published:</dt>
                <dd class=""gem-c-metadata__definition"">12 May 2023</dd>{code}|
|Data for other years|*Title:*
Data for other years
*Content:*
* List out all years from the current year, back to 2021
* Start at the most recent year
* going backwards in time
* Do not include the currently selected year, e.g. if the user is currently looking at data for 2023, do not show a lnk to 2023.
* Please see logic in the API equivalent ticket for working out what ‘most recent’ means. If the Jan 2024 rate has been published (on the penultimate Thursday of the prior December), then the ‘most recent’ year is 2024, even though we are still in December: :it's to do with the validity dates of the most recently captured data|
|Yearly and average sport rates|These are broken into two pages, rather than being on one.
Yearly average and spot rates
* Yearly average rates
* Spot rates
Link to the equivalent pages (tickets not yet written)
URLs will be:
[/tools/exchange_rates/average_rates|https://trade-tariff-06e587f80c1f.herokuapp.com/tools/exchange_rates/average_rates] 
and
[/tools/exchange_rates/spot_rates|https://trade-tariff-06e587f80c1f.herokuapp.com/tools/exchange_rates/spot_rates]|
|Documents|See section below|
|Credits|HMRC currency exchange rates for Customs and VAT are sourced from data provided by [http://ft.com|http://ft.com]  and [http://xe.com|http://xe.com] .|

h1. Screen design

!image-20230622-151046.png|width=91.66666666666666%!

h2. Document zone

!show exchange rate periods (months) per year-doc.drawio.png|width=66.66666666666666%!

||*Element*||*Notes*||
|Section title|*{month_name in full} {year} monthly exchange rates*|
|View online link|View online
Links to content for ticket [https://transformuk.atlassian.net/browse/HOTT-3477|https://transformuk.atlassian.net/browse/HOTT-3477|smart-link]|
|Link to CSV|Text = CSV and CSV file size in kilobytes rounded to 2 decimal places
Links to [https://transformuk.atlassian.net/browse/HOTT-3399|https://transformuk.atlassian.net/browse/HOTT-3399|smart-link]|
|Link to XML|Text = XML and XML file size in kilobytes rounded to 2 decimal places
Links to [https://transformuk.atlassian.net/browse/HOTT-3402|https://transformuk.atlassian.net/browse/HOTT-3402|smart-link]|
|Assistive tech text|This file may not be suitable for users of assistive technology.
Request an accessible format.
If you use assistive technology (such as a screen reader) and need a version of this document in a more accessible format, please email [different.format@hmrc.gov.uk|mailto:different.format@hmrc.gov.uk]. Please tell us what format you need. It will help us if you say what assistive technology you use.
_All of the above is static text_|",,Ata Dahri,Chris Booth,Jeremy Wilkins,Matt Lavis,62b9a8b2228c59d8da18cebf,62850c48bd640f0068ae388e,70121:25672516-c580-41e3-b0ee-efd76637d027,557058:bd906919-b0e3-4ec1-af61-1b1c41c6a595,,,,,,,,,,,,,,,,,22/Jun/23 4:12 PM;Matt.Lavis;image-20230622-151046.png;https://transformuk.atlassian.net/rest/api/3/attachment/content/17935,22/Jun/23 10:09 PM;Matt.Lavis;show exchange rate periods (months) per year-doc.drawio.png;https://transformuk.atlassian.net/rest/api/3/attachment/content/17947,22/Jun/23 10:09 PM;Matt.Lavis;show exchange rate periods (months) per year.drawio.png;https://transformuk.atlassian.net/rest/api/3/attachment/content/17946,,,,,,,,,,,,,,{},,,,,,,,,,,,,,,,,,1|hzzz9v:vn,,,,,,,,HOTT Sprint 59,HOTT Sprint 60,HOTT Sprint 60,HOTT Sprint 61,,,,,,,,,,,,,,,,2023-07-07 11:24:24.744,07/Jul/23 12:24 PM;62b9a8b2228c59d8da18cebf;WIP here: [https://github.com/trade-tariff/trade-tariff-frontend/compare/hott-3476-periods-ui?expand=1|https://github.com/trade-tariff/trade-tariff-frontend/compare/hott-3476-periods-ui?expand=1|smart-link] ,"11/Jul/23 4:59 PM;70121:25672516-c580-41e3-b0ee-efd76637d027;Pull Request 1532
https://github.com/trade-tariff/trade-tariff-frontend/pull/1532

Review App
https://tariff-frontend-pr1532.london.cloudapps.digital/","11/Jul/23 5:00 PM;62b9a8b2228c59d8da18cebf;PR here: [https://github.com/trade-tariff/trade-tariff-frontend/pull/1532|https://github.com/trade-tariff/trade-tariff-frontend/pull/1532|smart-link] 

Screenshots in PR

Links:

    FE: [http://localhost:3001/exchange_rates/2023|http://localhost:3001/exchange_rates/2023] or [http://localhost:3001/exchange_rates|http://localhost:3001/exchange_rates/2023]

    API: This is not exposed on the FE so can’t be accessed, we can expose the API later if need but I think we only care about the frontend page for now localhost:3000/exchange_rates/period_lists?year=2023 or localhost:3000/exchange_rates/period_lists/

When year isn't provided the API and FE will display data for the latest year we have. Sidebar should not display the currently selected year.","12/Jul/23 4:50 PM;70121:25672516-c580-41e3-b0ee-efd76637d027;Pull Request 1532
https://github.com/trade-tariff/trade-tariff-frontend/pull/1532

Review App
https://tariff-frontend-pr1532.london.cloudapps.digital/","13/Jul/23 10:28 AM;70121:25672516-c580-41e3-b0ee-efd76637d027;Pull Request 1532
https://github.com/trade-tariff/trade-tariff-frontend/pull/1532

Review App
https://tariff-frontend-pr1532.london.cloudapps.digital/","13/Jul/23 10:57 AM;70121:25672516-c580-41e3-b0ee-efd76637d027;Pull Request 1532
https://github.com/trade-tariff/trade-tariff-frontend/pull/1532

Review App
https://tariff-frontend-pr1532.london.cloudapps.digital/","17/Jul/23 4:21 PM;70121:25672516-c580-41e3-b0ee-efd76637d027;Pull Request 1532
https://github.com/trade-tariff/trade-tariff-frontend/pull/1532

Review App
https://tariff-frontend-pr1532.london.cloudapps.digital/","31/Jul/23 11:20 AM;70121:25672516-c580-41e3-b0ee-efd76637d027;Pull Request 1532
https://github.com/trade-tariff/trade-tariff-frontend/pull/1532

Review App
https://tariff-frontend-pr1532.london.cloudapps.digital/","01/Aug/23 11:30 AM;62b9a8b2228c59d8da18cebf;I have checked this with [~accountid:712020:fed6ef31-9984-4aaf-9e4d-ba9df0923524] and everything seems to be working fine, I have permission from [~accountid:557058:bd906919-b0e3-4ec1-af61-1b1c41c6a595] to merge this and disable the page from showing on frontend until exchange rates work is complete.","01/Aug/23 11:48 AM;70121:25672516-c580-41e3-b0ee-efd76637d027;Pull Request 1532
https://github.com/trade-tariff/trade-tariff-frontend/pull/1532

Review App
https://tariff-frontend-pr1532.london.cloudapps.digital/","01/Aug/23 12:03 PM;70121:25672516-c580-41e3-b0ee-efd76637d027;Pull Request 1532
https://github.com/trade-tariff/trade-tariff-frontend/pull/1532

Review App
https://tariff-frontend-pr1532.london.cloudapps.digital/",09/Aug/23 3:47 PM;62850c48bd640f0068ae388e;[~accountid:712020:80041ef7-0b09-460d-88d5-06b59bcb0e60] ,,,,,29320,Monthly Exchange rates,Done
UI - 'View online' exchange rates online for the given month and year,HOTT-3477,29600,Story,Done,HOTT,HMRC Online Trade Tariff,software,Carl Gabriel,61bc5259b24f10007027f21a,,Minor,Done,Sam Johnson,712020:80041ef7-0b09-460d-88d5-06b59bcb0e60,Matt Lavis,557058:bd906919-b0e3-4ec1-af61-1b1c41c6a595,Matt Lavis,557058:bd906919-b0e3-4ec1-af61-1b1c41c6a595,22/Jun/23 4:04 PM,06/Sep/23 4:27 PM,13/Sep/23 9:06 AM,24/Aug/23 4:30 PM,,0,ott_report_2023_august,"zzz

[https://trade-tariff-06e587f80c1f.herokuapp.com/tools/exchange_rates/view/23/06|https://trade-tariff-06e587f80c1f.herokuapp.com/tools/exchange_rates/view/23/06]

!image-20230622-151653.png|width=75%!

 

zzz",,Jeremy Wilkins,Matt Lavis,,,70121:25672516-c580-41e3-b0ee-efd76637d027,557058:bd906919-b0e3-4ec1-af61-1b1c41c6a595,,,,,,,,,,,,,,,HOTT-3717,,,,22/Jun/23 4:19 PM;Matt.Lavis;image-20230622-151653.png;https://transformuk.atlassian.net/rest/api/3/attachment/content/17936,,,,,,,,,,,,,,,,{},,,,,,,,,,,,,,,,,,1|hzzk2f:04,,,,,,,,HOTT Sprint 60,HOTT Sprint 60,HOTT Sprint 61,HOTT Sprint 62,,,,,,,,,,,,,,,,2023-08-23 19:56:03.907,"23/Aug/23 8:56 PM;70121:25672516-c580-41e3-b0ee-efd76637d027;Pull Request 1561
https://github.com/trade-tariff/trade-tariff-frontend/pull/1561

Review App
https://tariff-frontend-pr1561.london.cloudapps.digital/","23/Aug/23 9:02 PM;70121:25672516-c580-41e3-b0ee-efd76637d027;Pull Request 1561
https://github.com/trade-tariff/trade-tariff-frontend/pull/1561

Review App
https://tariff-frontend-pr1561.london.cloudapps.digital/","23/Aug/23 9:10 PM;70121:25672516-c580-41e3-b0ee-efd76637d027;Pull Request 1561
https://github.com/trade-tariff/trade-tariff-frontend/pull/1561

Review App
https://tariff-frontend-pr1561.london.cloudapps.digital/","23/Aug/23 9:24 PM;70121:25672516-c580-41e3-b0ee-efd76637d027;Pull Request 1561
https://github.com/trade-tariff/trade-tariff-frontend/pull/1561

Review App
https://tariff-frontend-pr1561.london.cloudapps.digital/","24/Aug/23 10:22 AM;70121:25672516-c580-41e3-b0ee-efd76637d027;Pull Request 1561
https://github.com/trade-tariff/trade-tariff-frontend/pull/1561

Review App
https://tariff-frontend-pr1561.london.cloudapps.digital/","24/Aug/23 12:03 PM;70121:25672516-c580-41e3-b0ee-efd76637d027;Pull Request 1561
https://github.com/trade-tariff/trade-tariff-frontend/pull/1561

Review App
https://tariff-frontend-pr1561.london.cloudapps.digital/",,,,,,,,,,,29320,Monthly Exchange rates,Done
p2| Run data import rake tasks on staging and production,HOTT-3683,29806,Story,Done,HOTT,HMRC Online Trade Tariff,software,Carl Gabriel,61bc5259b24f10007027f21a,,Minor,Done,Ata Dahri,62b9a8b2228c59d8da18cebf,Ata Dahri,62b9a8b2228c59d8da18cebf,Ata Dahri,62b9a8b2228c59d8da18cebf,21/Jul/23 11:22 AM,06/Sep/23 4:27 PM,13/Sep/23 9:06 AM,23/Aug/23 1:49 PM,,0,ott_report_2023_august,"Import all the CSV data into the database(only run on dev at the moment)

These need to run before Wednesday 9pm or XE cron job will fail because it needs the country and currency codes to be present in the database",,Ata Dahri,,,,62b9a8b2228c59d8da18cebf,,,,,,,,,,,,,,,,HOTT-3808,HOTT-3809,,,,,,,,,,,,,,,,,,,{},,,,,,,,,,,,,,,,,,1|hzzk2h:,,,,,,,,HOTT Sprint 62,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,29320,Monthly Exchange rates,Done
"Create rake task to upload CSV/XML files to S3 for all ""old"" imported data",HOTT-3705,29850,Story,Done,HOTT,HMRC Online Trade Tariff,software,Carl Gabriel,61bc5259b24f10007027f21a,,Minor,Done,Sam Johnson,712020:80041ef7-0b09-460d-88d5-06b59bcb0e60,Ata Dahri,62b9a8b2228c59d8da18cebf,Ata Dahri,62b9a8b2228c59d8da18cebf,26/Jul/23 4:48 PM,06/Sep/23 4:27 PM,23/Aug/23 9:52 AM,24/Aug/23 4:30 PM,,0,ott_report_2023_august,"We need a rake task to generate CSV/XML files for all the “old” publication dates provided in attached JSON or CSV file.

* Generate and upload these files to S3
* Create new record for each file in ExchangeRateFile table
* Create a rake task

Useful information:

We now have a new table called ExchangeRateFile with these attributes

:period_year=>2023, :period_month=>6, :format=>""csv"", :file_size=>123, :publication_date=>Tue, 25 Jul 2023

This table is updated when our cron job is run on penultimate Thursday and stores the Date and generates and uploads CSV/XML files to Amazon S3

Useful links:

[https://transformuk.atlassian.net/browse/HOTT-3474|https://transformuk.atlassian.net/browse/HOTT-3474|smart-link]  and [https://www.gov.uk/government/publications/hmrc-exchange-rates-for-2022-monthly|https://www.gov.uk/government/publications/hmrc-exchange-rates-for-2022-monthly|smart-link] ",,Ata Dahri,Matt Lavis,,,62b9a8b2228c59d8da18cebf,557058:bd906919-b0e3-4ec1-af61-1b1c41c6a595,,,,,,,,,,,,,,,HOTT-3717,,,,26/Jul/23 6:51 PM;Matt.Lavis;past_publication_dates.csv;https://transformuk.atlassian.net/rest/api/3/attachment/content/18017,26/Jul/23 6:41 PM;Matt.Lavis;past_publication_dates.json;https://transformuk.atlassian.net/rest/api/3/attachment/content/18016,,,,,,,,,,,,,,,{},,,,,,,,,,,,,,,,,,1|hzzk2f:09,,,,,,,,HOTT Sprint 60,HOTT Sprint 61,HOTT Sprint 62,,,,,,,,,,,,,,,,,2023-07-26 17:42:26.543,"26/Jul/23 6:42 PM;557058:bd906919-b0e3-4ec1-af61-1b1c41c6a595;[~accountid:62b9a8b2228c59d8da18cebf] - please use the attached JSON file, or the attached CSV

These have been generated for every month back to Jan 2021 based on the penultimate Thursday of the previous month.",,,,,,,,,,,,,,,,29320,Monthly Exchange rates,Done
Load the monthly exchange rate data for July and August 2023,HOTT-3708,29862,Story,Done,HOTT,HMRC Online Trade Tariff,software,Carl Gabriel,61bc5259b24f10007027f21a,,Minor,Done,Sam Johnson,712020:80041ef7-0b09-460d-88d5-06b59bcb0e60,Matt Lavis,557058:bd906919-b0e3-4ec1-af61-1b1c41c6a595,Matt Lavis,557058:bd906919-b0e3-4ec1-af61-1b1c41c6a595,26/Jul/23 6:54 PM,06/Sep/23 4:27 PM,13/Sep/23 9:06 AM,23/Aug/23 1:52 PM,,0,ott_report_2023_august,"Since we first did a data load, 2 full months have passed.

We need to load the data for July and August. (created in June and July)

Ideally this will be the last of these loads, and we can use the API for future loads.",,Matt Lavis,,,,557058:bd906919-b0e3-4ec1-af61-1b1c41c6a595,,,,,,,,,,,,,,,,,,,,26/Jul/23 6:59 PM;Matt.Lavis;all_rates.csv;https://transformuk.atlassian.net/rest/api/3/attachment/content/18018,,,,,,,,,,,,,,,,{},,,,,,,,,,,,,,,,,,1|hzzk2f:0i,,,,,,,,HOTT Sprint 60,HOTT Sprint 61,HOTT Sprint 62,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,29320,Monthly Exchange rates,Done
Create 'to-be' Monthly exchange rate map & confirm with stakeholders ,HOTT-3715,29869,Story,Done,HOTT,HMRC Online Trade Tariff,software,Carl Gabriel,61bc5259b24f10007027f21a,,Minor,Done,Chris Booth,62850c48bd640f0068ae388e,Chris Booth,62850c48bd640f0068ae388e,Chris Booth,62850c48bd640f0068ae388e,27/Jul/23 9:40 AM,03/Aug/23 5:07 PM,13/Sep/23 9:06 AM,03/Aug/23 9:56 AM,,0,ott_report_2023_august,,,Chris Booth,,,,62850c48bd640f0068ae388e,,,,,,,,,,,,,,,,,,,HOTT-3394,,,,,,,,,,,,,,,,,{},,,,,,,,,,,,,,,,,,1|hzzza6:hyi,,,,,,,,HOTT Sprint 60,HOTT Sprint 61,,,,,,,,,,,,,,,,,,,28/Jul/23 4:38 PM;62850c48bd640f0068ae388e;booked meeting 1st Aug,,,,,,,,,,,,,,,,29320,Monthly Exchange rates,Done
"Add links, publication_date and file_size to period list frontend",HOTT-3717,29871,Story,Done,HOTT,HMRC Online Trade Tariff,software,Carl Gabriel,61bc5259b24f10007027f21a,,Minor,Done,Sunitha Vorsu,712020:fed6ef31-9984-4aaf-9e4d-ba9df0923524,Ata Dahri,62b9a8b2228c59d8da18cebf,Ata Dahri,62b9a8b2228c59d8da18cebf,27/Jul/23 3:37 PM,06/Sep/23 4:21 PM,06/Sep/23 1:54 PM,06/Sep/23 10:50 AM,,0,ott_report_2023_august,Add XML and CSV links to period_list frontend,,Ata Dahri,Jeremy Wilkins,Sunitha Vorsu,,62b9a8b2228c59d8da18cebf,70121:25672516-c580-41e3-b0ee-efd76637d027,712020:fed6ef31-9984-4aaf-9e4d-ba9df0923524,,,,,,,,,,HOTT-3705,HOTT-3477,,,,,,,,,,,,,,,,,,,,,,,{},,,,,,,,,,,,,,,,,,1|i001pf:,,,,,,,,HOTT Sprint 60,HOTT Sprint 61,HOTT Sprint 62,HOTT Sprint 63,,,,,,,,,,,,,,,,2023-08-03 10:18:37.289,"03/Aug/23 11:18 AM;70121:25672516-c580-41e3-b0ee-efd76637d027;Pull Request 1568
https://github.com/trade-tariff/trade-tariff-frontend/pull/1568

Review App
https://tariff-frontend-pr1568.london.cloudapps.digital/","03/Aug/23 11:31 AM;62b9a8b2228c59d8da18cebf;PR here: [https://github.com/trade-tariff/trade-tariff-frontend/pull/1568|https://github.com/trade-tariff/trade-tariff-frontend/pull/1568|smart-link] 

screenshots in PR

Link: /exchange_rates","03/Aug/23 11:33 AM;70121:25672516-c580-41e3-b0ee-efd76637d027;Pull Request 1568
https://github.com/trade-tariff/trade-tariff-frontend/pull/1568

Review App
https://tariff-frontend-pr1568.london.cloudapps.digital/","03/Aug/23 1:36 PM;70121:25672516-c580-41e3-b0ee-efd76637d027;Pull Request 1568
https://github.com/trade-tariff/trade-tariff-frontend/pull/1568

Review App
https://tariff-frontend-pr1568.london.cloudapps.digital/","03/Aug/23 1:57 PM;70121:25672516-c580-41e3-b0ee-efd76637d027;Pull Request 1568
https://github.com/trade-tariff/trade-tariff-frontend/pull/1568

Review App
https://tariff-frontend-pr1568.london.cloudapps.digital/",03/Aug/23 2:07 PM;62b9a8b2228c59d8da18cebf;Testing is blocked by AWS rake task ticket because that populates files and UI ticket because “view online” link won’t work until both these are merged,"03/Aug/23 2:08 PM;70121:25672516-c580-41e3-b0ee-efd76637d027;Pull Request 1568
https://github.com/trade-tariff/trade-tariff-frontend/pull/1568

Review App
https://tariff-frontend-pr1568.london.cloudapps.digital/","15/Aug/23 5:20 PM;712020:fed6ef31-9984-4aaf-9e4d-ba9df0923524;[~accountid:62b9a8b2228c59d8da18cebf] [~accountid:712020:80041ef7-0b09-460d-88d5-06b59bcb0e60] [~accountid:61bc5259b24f10007027f21a] [~accountid:61e847f6b134e8007020bcb5] 

Testing is blocked due to the below tickets , Further testing can not be continue till the below tickets are merged

[https://transformuk.atlassian.net/browse/HOTT-3705|https://transformuk.atlassian.net/browse/HOTT-3705|smart-link]  and [https://transformuk.atlassian.net/browse/HOTT-3477|https://transformuk.atlassian.net/browse/HOTT-3477|smart-link] ",,,,,,,,,29320,Monthly Exchange rates,Done
Load rates from XE API once a month,HOTT-3738,29902,Story,Done,HOTT,HMRC Online Trade Tariff,software,Carl Gabriel,61bc5259b24f10007027f21a,,Minor,Done,Ata Dahri,62b9a8b2228c59d8da18cebf,Ata Dahri,62b9a8b2228c59d8da18cebf,Ata Dahri,62b9a8b2228c59d8da18cebf,01/Aug/23 2:52 PM,06/Sep/23 4:28 PM,13/Sep/23 9:06 AM,23/Aug/23 9:38 AM,,0,ott_report_2023_august,"Update: time to run job was changed to Wednesday at 9pm after talking with [~accountid:557058:bd906919-b0e3-4ec1-af61-1b1c41c6a595] and [~accountid:62850c48bd640f0068ae388e] 

The goal is to retrieve data from the XE API one day before the penultimate Thursday, which means on Wednesday. This allows us to have some buffer time to respond in case there's a failure with the XE API. The condition to trigger this data retrieval is that tomorrow should be the penultimate Thursday, and today should be Wednesday.

Additionally, we plan to load the XE data around midday on Wednesday, precisely at 12 pm. This is because new rates become available at that time.

[https://xecdapi.xe.com/docs/v1|https://xecdapi.xe.com/docs/v1|smart-link] XE API docs

# Create cron job that runs once a month on Wednesday
# Populate ExchangeRateCurrencyRate table with new rates for this month
# CSV, XML file generation and online views should all automatically work with this new change but it might be a good idea just to check these are working as they should",,Ata Dahri,,,,62b9a8b2228c59d8da18cebf,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,{},,,,,,,,,,,,,,,,,,1|hzzk2i:,,,,,,,,HOTT Sprint 61,HOTT Sprint 62,,,,,,,,,,,,,,,,,,,17/Aug/23 4:44 PM;62b9a8b2228c59d8da18cebf;PR here [https://github.com/trade-tariff/trade-tariff-backend/pull/1452|https://github.com/trade-tariff/trade-tariff-backend/pull/1452|smart-link] ,,,,,,,,,,,,,,,,29320,Monthly Exchange rates,Done
co-ordinate go-live plans with James Doyle and TMT,HOTT-3742,29906,Story,Done,HOTT,HMRC Online Trade Tariff,software,Carl Gabriel,61bc5259b24f10007027f21a,,Minor,Done,Chris Booth,62850c48bd640f0068ae388e,Chris Booth,62850c48bd640f0068ae388e,Chris Booth,62850c48bd640f0068ae388e,02/Aug/23 11:03 AM,10/Aug/23 6:17 PM,13/Sep/23 9:06 AM,03/Aug/23 4:53 PM,,0,ott_report_2023_august,,,Chris Booth,,,,62850c48bd640f0068ae388e,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,{},,,,,,,,,,,,,,,,,,1|hzzk35:,,,,,,,,HOTT Sprint 62,,,,,,,,,,,,,,,,,,,,"03/Aug/23 4:53 PM;62850c48bd640f0068ae388e;Met with James and agreed go-live plans

sent him draft communication for software houses form Brian

Updated TMT",,,,,,,,,,,,,,,,29320,Monthly Exchange rates,Done
Test additional rates with CDS. first round,HOTT-3744,29908,Story,Done,HOTT,HMRC Online Trade Tariff,software,Carl Gabriel,61bc5259b24f10007027f21a,,Minor,Done,Chris Booth,62850c48bd640f0068ae388e,Chris Booth,62850c48bd640f0068ae388e,Chris Booth,62850c48bd640f0068ae388e,02/Aug/23 11:05 AM,06/Sep/23 4:30 PM,13/Sep/23 9:06 AM,16/Aug/23 2:42 PM,,0,ott_report_2023_august,We need to ensure that adding rates which were formally not included will not have unintended downstream effects with CDS.  IF we cannot get this testing done then we should go live with only the rates which are in the existing process,,Chris Booth,,,,62850c48bd640f0068ae388e,,,,,,,,,,,,HOTT-3810,,,,,,,,,,,,,,,,,,,,,,,,{},,,,,,,,,,,,,,,,,,1|i000n3:zrrz,,,,,,,,HOTT Sprint 61,HOTT Sprint 62,,,,,,,,,,,,,,,,,,,07/Aug/23 10:02 AM;62850c48bd640f0068ae388e;Meeting in diary for Wednesday morning,"16/Aug/23 2:42 PM;62850c48bd640f0068ae388e;We discovered in this testing that there is a whole other file format we need, and that not all the rates we said we would show are indeed on there. More work to do",,,,,,,,,,,,,,,29320,Monthly Exchange rates,Done
p2| Add end to end tests for exchange rates,HOTT-3767,29933,Story,Done,HOTT,HMRC Online Trade Tariff,software,Carl Gabriel,61bc5259b24f10007027f21a,,Minor,Done,Sam Johnson,712020:80041ef7-0b09-460d-88d5-06b59bcb0e60,Ata Dahri,62b9a8b2228c59d8da18cebf,Ata Dahri,62b9a8b2228c59d8da18cebf,03/Aug/23 11:34 AM,06/Sep/23 4:22 PM,13/Sep/23 9:06 AM,31/Aug/23 9:54 AM,,0,ott_report_2023_august,"These will go in trade-tariff-testing repo

These need to be added for both pages",,Ata Dahri,,,,62b9a8b2228c59d8da18cebf,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,{},,,,,,,,,,,,,,,,,,1|i001cz:,,,,,,,,HOTT Sprint 62,HOTT Sprint 63,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,29320,Monthly Exchange rates,Done
Send new URL to James Doyle,HOTT-3774,29940,Story,Done,HOTT,HMRC Online Trade Tariff,software,Carl Gabriel,61bc5259b24f10007027f21a,,Minor,Done,Chris Booth,62850c48bd640f0068ae388e,Chris Booth,62850c48bd640f0068ae388e,Chris Booth,62850c48bd640f0068ae388e,03/Aug/23 5:21 PM,09/Aug/23 9:25 PM,13/Sep/23 9:06 AM,09/Aug/23 5:06 PM,,0,ott_report_2023_august,"James will redirect users from the 2 existing sites, to this new site via content on those pages. To do this effectively he will need the URL which we are going to use, so that he can include it in his redirect content.

He will need this ahead of time, ideally as soon as we know what it is",,Ata Dahri,Chris Booth,,,62b9a8b2228c59d8da18cebf,62850c48bd640f0068ae388e,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,{},,,,,,,,,,,,,,,,,,1|hzzza6:hyxxr,,,,,,,,HOTT Sprint 61,,,,,,,,,,,,,,,,,,,2023-08-04 08:32:11.723,"03/Aug/23 5:24 PM;62850c48bd640f0068ae388e;[~accountid:62b9a8b2228c59d8da18cebf] and [~accountid:712020:80041ef7-0b09-460d-88d5-06b59bcb0e60] I’ll take care of sending this to James, but could you let me know what URL we are using when we know?","04/Aug/23 9:32 AM;62b9a8b2228c59d8da18cebf;URL:

[https://www.trade-tariff.service.gov.uk/exchange_rates|https://www.trade-tariff.service.gov.uk/exchange_rates] - with no year selected(shows data for max year). This would be the main URL for exchange rates as it links to every other page

exchange_rates/2022 - with year selected, this page is the same as /exchange_rates but with different data

exchange_rates/2022/6 - this would be better like this with year and month? but will need confirmation from [~accountid:712020:80041ef7-0b09-460d-88d5-06b59bcb0e60] as I looked at his PR and it looks like he has it set to {{/exchange_rates/view/6/2023}}



[~accountid:62850c48bd640f0068ae388e] [~accountid:557058:bd906919-b0e3-4ec1-af61-1b1c41c6a595]  this is the URL as it is currently coded and it’s disabled on all environments until everything is ready. We can change it to anything if you want it to be something else",,,,,,,,,,,,,,,29320,Monthly Exchange rates,Done
"Post-receipt of xe.com data feed, run a comparison or HMRC currency data against the xe.com data",HOTT-3792,29959,Story,Done,HOTT,HMRC Online Trade Tariff,software,Carl Gabriel,61bc5259b24f10007027f21a,,Minor,Done,Matt Lavis,557058:bd906919-b0e3-4ec1-af61-1b1c41c6a595,Matt Lavis,557058:bd906919-b0e3-4ec1-af61-1b1c41c6a595,Matt Lavis,557058:bd906919-b0e3-4ec1-af61-1b1c41c6a595,09/Aug/23 9:21 AM,09/Aug/23 9:23 AM,13/Sep/23 9:06 AM,09/Aug/23 9:22 AM,,0,ott_report_2023_august,,,Matt Lavis,,,,557058:bd906919-b0e3-4ec1-af61-1b1c41c6a595,,,,,,,,,,,,,,,,,,,,09/Aug/23 9:23 AM;Matt.Lavis;currency comparison 23-08-09.docx;https://transformuk.atlassian.net/rest/api/3/attachment/content/18047,,,,,,,,,,,,,,,,{},,,,,,,,,,,,,,,,,,1|hzzza6:hyxx,,,,,,,,HOTT Sprint 61,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,29320,Monthly Exchange rates,Done
p1| Generate CSV file of rates for CDS testing,HOTT-3810,29978,Story,Done,HOTT,HMRC Online Trade Tariff,software,Carl Gabriel,61bc5259b24f10007027f21a,,Minor,Done,Ata Dahri,62b9a8b2228c59d8da18cebf,Chris Booth,62850c48bd640f0068ae388e,Chris Booth,62850c48bd640f0068ae388e,09/Aug/23 5:43 PM,15/Aug/23 4:32 PM,13/Sep/23 9:06 AM,15/Aug/23 10:17 AM,,0,ott_report_2023_august,"CDS want to test that adding and committing exchange rates compared to the ‘as is’ process won’t break anything. They’re pretty sure it won’t and are happy for us to proceed with all planned omissions and additions.

*AC:*

# Generate a CSV file as it is expected to be with this automated process
## *Include* all rates that HMRC have previously agreed _(see doc attached for reference)_
## *Exclude* rates we have agreed to excludeand have to exclude because they don’t exist _(see doc attached for reference)_
# Send it to Chris

[^currency comparison 23-08-09.docx]

",,Ata Dahri,Chris Booth,,,62b9a8b2228c59d8da18cebf,62850c48bd640f0068ae388e,,,,,,,,,,,,,,,HOTT-3744,,,,09/Aug/23 6:06 PM;ug:398da907-4418-409f-87ba-1069de71ca15;currency comparison 23-08-09.docx;https://transformuk.atlassian.net/rest/api/3/attachment/content/18049,11/Aug/23 12:44 PM;ug:13880ede-29f4-4093-8eda-fe5349afc413;monthly_csv_2023-8.csv;https://transformuk.atlassian.net/rest/api/3/attachment/content/18054,,,,,,,,,,,,,,,{},,,,,,,,,,,,,,,,,,1|hzzk2s:,,,,,,,,HOTT Sprint 61,HOTT Sprint 62,,,,,,,,,,,,,,,,,,2023-08-11 11:44:08.243,10/Aug/23 10:10 AM;62850c48bd640f0068ae388e;[~accountid:712020:80041ef7-0b09-460d-88d5-06b59bcb0e60] This is the ticket I was talking about in Stand Up,"11/Aug/23 12:44 PM;62b9a8b2228c59d8da18cebf;[^monthly_csv_2023-8.csv]

[~accountid:62850c48bd640f0068ae388e]  here is the file you asked for, using yesterdays rates, please review it and let me know if anything is not correct. This file was generated automatically using our backend code Which calls the XE API",11/Aug/23 3:04 PM;62850c48bd640f0068ae388e;Thanks Ata! I’ve passed the file on to HMRC.,,,,,,,,,,,,,,29320,Monthly Exchange rates,Done
p1| Additional CSV layout to send to HMRC teams,HOTT-3827,29995,Story,Done,HOTT,HMRC Online Trade Tariff,software,Carl Gabriel,61bc5259b24f10007027f21a,,Minor,Done,Ata Dahri,62b9a8b2228c59d8da18cebf,Chris Booth,62850c48bd640f0068ae388e,Chris Booth,62850c48bd640f0068ae388e,11/Aug/23 3:41 PM,06/Sep/23 4:27 PM,13/Sep/23 9:06 AM,23/Aug/23 1:49 PM,,0,ott_report_2023_august,"The internal HMRC teams use a different layout of CSV to the users who download the CSV from the site.

We need to keep the user facing CSV as and web view unchanged, as those users may be set up to receive that in that format. +*But we need to produce a differently formatted file for HMRC use.*+

For HMRC internal use, i.e. sending to HMRC TMT team ([https://transformuk.atlassian.net/browse/HOTT-3746|https://transformuk.atlassian.net/browse/HOTT-3746|smart-link] ) please generate a CSV with the following layout (also see attached to duplicate):

{panel:bgColor=#deebff}
This needs to exactly match the attached sample file that we’re trying to replicate
{panel}

*File name:* [year(yyy)][month(mm)]MonthlyRates.csv

+example+: 202308MonthlyRates.csv

*columns* (obviously delineated with commas as CSV)*:*

|Period|every entry the same
1st day of the month to last day of the month (note capitalisation):
dd/Mmm/yyyy to dd/Mmm/yyyy
e.g:
01/Aug/2023 to 31/Aug/2023|
|countryName|country/territory name, capitalised
e.g:
Denmark|
|countryCode|this looks to always be a two digit code, hopefully this is within the XE API?
ALL CAPS
e.g:
DK|
|currencyName|currency name, capitalised
e.g:
Krone|
|currencyCode|currency code, ALL CAPS
e.g:
DKK|
|rateNew|Number with decimal _up to_ 4 decimal places (rounded to the nearest by usual mathematical convention)
e.g:
A rate of 4.686+*65*+7166 would be rounded UP to 4.686+*7*+
A rate of 4.686+*62*+7166 would be rounded DOWN to 4.686+*6*+
A rate of 4.686+*67*+7166 would be rounded UP to 4.686+*7*+
A rate of 4.686+*97*+7166 would be rounded UP to 4.68+*70*+|",,Ata Dahri,Chris Booth,,,62b9a8b2228c59d8da18cebf,62850c48bd640f0068ae388e,,,,,,,,,,,,,,,HOTT-3746,,,,11/Aug/23 3:46 PM;ug:398da907-4418-409f-87ba-1069de71ca15;202308MonthlyRates.csv;https://transformuk.atlassian.net/rest/api/3/attachment/content/18058,,,,,,,,,,,,,,,,{},,,,,,,,,,,,,,,,,,1|hzzk2g:i,,,,,,,,HOTT Sprint 62,,,,,,,,,,,,,,,,,,,2023-08-15 09:14:41.362,"15/Aug/23 10:10 AM;62850c48bd640f0068ae388e;[~accountid:62b9a8b2228c59d8da18cebf] sorry, I had put this in the wrong sprint 😄 . detail in the ticket but it turns out we need a different CSV for internal teams. Would you be able to pick this one up next time you’re looking to pick something, please? I’ll put your name on it as you’ve been working on this type of stuff","15/Aug/23 10:14 AM;62b9a8b2228c59d8da18cebf;[~accountid:62850c48bd640f0068ae388e] sure, I will pick this up when I finish my current ticket",,,,,,,,,,,,,,,29320,Monthly Exchange rates,Done
"p1| Look into Liberia. Mismatch with currency name, code, and amount in old and new data?",HOTT-3842,30014,Story,Done,HOTT,HMRC Online Trade Tariff,software,Carl Gabriel,61bc5259b24f10007027f21a,,Minor,Done,Chris Booth,62850c48bd640f0068ae388e,Chris Booth,62850c48bd640f0068ae388e,Chris Booth,62850c48bd640f0068ae388e,15/Aug/23 10:47 AM,06/Sep/23 4:30 PM,16/Aug/23 10:15 AM,16/Aug/23 10:16 AM,,0,ott_report_2023_august,"The new data file, for Liberia has a mismatch of USD and LYD

Country name: Libera 
Currency name: USD
Currency Code: LYD
Currency amount: in Liberian Dollars



Interestingly this mismatch also exists in the data HMRC are using now, but they have:
Country: Liberia
Currency Name: USD
Currency Code: LYD
Currency value: in USD



Can we please look into the data we’re getting to understand our side of this?

We should be getting:

Country name: Libera 
Currency name: Liberian Dollar
Currency Code: LYD
Currency amount: in Liberian Dollars

As displayed on XEs user facing site - [1 GBP to LRD - British Pounds to Liberian Dollars Exchange Rate (xe.com)|https://www.xe.com/currencyconverter/convert/?Amount=1&From=GBP&To=LRD]

I’ve asked the HMRC team to look into the mismatch from their side too.",,Chris Booth,,,,62850c48bd640f0068ae388e,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,{},,,,,,,,,,,,,,,,,,1|i001iz:,,,,,,,,HOTT Sprint 62,,,,,,,,,,,,,,,,,,,,16/Aug/23 10:19 AM;62850c48bd640f0068ae388e;Looks like this is an error copied from the as-is process. I’m talking to Brain about this now to highlight that this is an error and needs to be corrected in the ‘to-be’,,,,,,,,,,,,,,,,29320,Monthly Exchange rates,Done
Add XE API ENV variables to all environments,HOTT-3873,30046,Story,Done,HOTT,HMRC Online Trade Tariff,software,Carl Gabriel,61bc5259b24f10007027f21a,,Minor,Done,Ata Dahri,62b9a8b2228c59d8da18cebf,Ata Dahri,62b9a8b2228c59d8da18cebf,Ata Dahri,62b9a8b2228c59d8da18cebf,17/Aug/23 4:52 PM,06/Sep/23 4:28 PM,13/Sep/23 9:06 AM,23/Aug/23 9:38 AM,,0,ott_report_2023_august,"{noformat}XE_API_USERNAME=user
XE_API_PASSWORD=pass
XE_API_URL=url
{noformat}",,Ata Dahri,,,,62b9a8b2228c59d8da18cebf,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,{},,,,,,,,,,,,,,,,,,1|hzzk2l:,,,,,,,,HOTT Sprint 62,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,29320,Monthly Exchange rates,Done
Expand exchange rates with multiple countries,HOTT-3890,30089,Story,Done,HOTT,HMRC Online Trade Tariff,software,Carl Gabriel,61bc5259b24f10007027f21a,,Minor,Done,William Fish,5fad1d0c8573800069e74d00,William Fish,5fad1d0c8573800069e74d00,William Fish,5fad1d0c8573800069e74d00,24/Aug/23 9:24 AM,06/Sep/23 4:27 PM,13/Sep/23 9:06 AM,24/Aug/23 12:09 PM,,0,ott_report_2023_august,"When a given monthly exchange rate gets imported it frequently has a currency that applies to multiple countries.

We need to extend the scheduled exchange rates we’re returning in the monthly exchange rate api to include the expanded list of rates. The easiest method for doing this is with a right join on the exchange rate countries ",,William Fish,,,,5fad1d0c8573800069e74d00,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,{},,,,,,,,,,,,,,,,,,1|hzzk35:002,,,,,,,,HOTT Sprint 62,,,,,,,,,3.0,,,,,,,,,,,,,,,,,,,,,,,,,,,29320,Monthly Exchange rates,Done
Clear out dangerous old exchange rate code,HOTT-3906,30105,Story,Done,HOTT,HMRC Online Trade Tariff,software,Carl Gabriel,61bc5259b24f10007027f21a,,Minor,Done,William Fish,5fad1d0c8573800069e74d00,William Fish,5fad1d0c8573800069e74d00,William Fish,5fad1d0c8573800069e74d00,29/Aug/23 12:47 PM,06/Sep/23 4:22 PM,13/Sep/23 9:06 AM,31/Aug/23 9:54 AM,,0,ott_report_2023_august,"We have a bunch of rake tasks and populate methods that are now redundant.

* Remove coupling to the populate methods in all of the specs
* Remove all of the old services
* Remove rake tasks",,William Fish,,,,5fad1d0c8573800069e74d00,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,{},,,,,,,,,,,,,,,,,,1|i001d2:,,,,,,,,HOTT Sprint 62,HOTT Sprint 63,,,,,,,,3.0,,,,,,,,,,,,,,,,,,,,,,,,,,,29320,Monthly Exchange rates,Done
Finalise nested set,HOTT-3782,29949,Story,Done,HOTT,HMRC Online Trade Tariff,software,Carl Gabriel,61bc5259b24f10007027f21a,,Minor,Done,William Fish,5fad1d0c8573800069e74d00,William Fish,5fad1d0c8573800069e74d00,William Fish,5fad1d0c8573800069e74d00,07/Aug/23 9:57 AM,10/Aug/23 6:11 PM,13/Sep/23 9:06 AM,10/Aug/23 5:19 PM,,0,ott_report_2023_august,"We have several endpoints that need migrating off of nested set:

# V1 headings
# V1 chapters
# V1 commodities

We also have a butt load of dead functionality to remove that is complex and completely redundant from the perspective the current implementation for hierarchy navigation.

So the task is to:

# Replace these 3 endpoints with nested set
# Remove redundant functionality from the backend now that goods nomenclature mapper, ancestors, children, etc, are removed",,William Fish,,,,5fad1d0c8573800069e74d00,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,{},,,,,,,,,,,,,,,,,,1|hzzz9v:vie,,,,,,,,HOTT Sprint 61,,,,,,,,,5.0,,,,,,,,,,,"07/Aug/23 12:23 PM;5fad1d0c8573800069e74d00;Just running the full regression suite against this now.

I’ve manually verified the different apis are responding properly under the different conditions",,,,,,,,,,,,,,,,28614,Nested Set hierarchy,Done
Validate production PUA against offline equivalent,HOTT-3840,30010,Story,Done,HOTT,HMRC Online Trade Tariff,software,Carl Gabriel,61bc5259b24f10007027f21a,,Minor,Done,Matt Lavis,557058:bd906919-b0e3-4ec1-af61-1b1c41c6a595,Matt Lavis,557058:bd906919-b0e3-4ec1-af61-1b1c41c6a595,Matt Lavis,557058:bd906919-b0e3-4ec1-af61-1b1c41c6a595,15/Aug/23 8:45 AM,15/Aug/23 8:22 PM,13/Sep/23 9:06 AM,15/Aug/23 8:21 PM,,0,ott_report_2023_august,,,Matt Lavis,,,,557058:bd906919-b0e3-4ec1-af61-1b1c41c6a595,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,{},,,,,,,,,,,,,,,,,,1|hzzk3k:f,,,,,,,,HOTT Sprint 62,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,27823,Preference Utilisation Analysis,Done
Replace SendGrid with AWS SES mailer on the ETF,HOTT-3797,29965,Story,Done,HOTT,HMRC Online Trade Tariff,software,Carl Gabriel,61bc5259b24f10007027f21a,,Minor,Done,William Fish,5fad1d0c8573800069e74d00,Matt Lavis,557058:bd906919-b0e3-4ec1-af61-1b1c41c6a595,Matt Lavis,557058:bd906919-b0e3-4ec1-af61-1b1c41c6a595,09/Aug/23 2:15 PM,06/Sep/23 4:29 PM,13/Sep/23 9:06 AM,16/Aug/23 4:29 PM,,0,ott_report_2023_august,"The offline version of the application uses the third party SendGrid API to send emails.

The preference is to use the ASW SES service instead of SendGrid, as this reduces external dependencies, as well as brings this into line with other features on the OTT.

The SendGrid functionality is encapsulated in a single class on the existing ETF application and needs to deliver this functionality:

* Send to multiple recipients
* HTML emails
* Attachments",,Matt Lavis,,,,557058:bd906919-b0e3-4ec1-af61-1b1c41c6a595,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,{},,,,,,,,,,,,purple,,,,,,1|hzzk35:04,,,,,,,,HOTT Sprint 62,,,,,,,,,5.0,,,,,,,,,,,,,,,,,,,,,,,,,,,29964,Productionise Electronic Tariff File,Done
Integrate the ETF app into a Circle CI worklow - separate context,HOTT-3798,29966,Story,Done,HOTT,HMRC Online Trade Tariff,software,Carl Gabriel,61bc5259b24f10007027f21a,,Minor,Done,William Fish,5fad1d0c8573800069e74d00,Matt Lavis,557058:bd906919-b0e3-4ec1-af61-1b1c41c6a595,Matt Lavis,557058:bd906919-b0e3-4ec1-af61-1b1c41c6a595,09/Aug/23 2:16 PM,06/Sep/23 4:30 PM,13/Sep/23 9:06 AM,16/Aug/23 4:29 PM,,0,ott_report_2023_august,"We essentially need two workflows (an on commit to a feature branch workflow and a schedule - every Thursday - workflow):

# On change to the ETF code we need to integrate in debug mode to make sure that nothing is broken (a non-zero exit code is  failure of this integration test)
# Every Thursday we want to make sure that we’re emailing all of the recipients using the SES mailer in the format everyone has been used to receiving. Probably start with test addresses to start with whilst Matt still runs this manually
# Every Thursday persist the ETF to s3
# Every Thursday consider rotating the ETFs so that we’re not arbitrarily keeping these for a long period

*AC*

* Files are being persisted to the trade-tariff-reporting bucket
* Emails are being sent to the test users
* Integrations are happening on changes to the ETF repository code
* The Thursday workflow runs at 0800",,Matt Lavis,,,,557058:bd906919-b0e3-4ec1-af61-1b1c41c6a595,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,{},,,,,,,,,,,,purple,,,,,,1|hzzk35:1,,,,,,,,HOTT Sprint 62,,,,,,,,,5.0,,,,,,,,,,,,,,,,,,,,,,,,,,,29964,Productionise Electronic Tariff File,Done
Create separate context for the productionised ETF,HOTT-3799,29967,Story,Done,HOTT,HMRC Online Trade Tariff,software,Carl Gabriel,61bc5259b24f10007027f21a,,Minor,Done,William Fish,5fad1d0c8573800069e74d00,Matt Lavis,557058:bd906919-b0e3-4ec1-af61-1b1c41c6a595,Matt Lavis,557058:bd906919-b0e3-4ec1-af61-1b1c41c6a595,09/Aug/23 2:16 PM,06/Sep/23 4:30 PM,13/Sep/23 9:06 AM,16/Aug/23 4:29 PM,,0,ott_report_2023_august,,,Matt Lavis,,,,557058:bd906919-b0e3-4ec1-af61-1b1c41c6a595,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,{},,,,,,,,,,,,purple,,,,,,1|hzzk35:09,,,,,,,,HOTT Sprint 62,,,,,,,,,3.0,,,,,,,,,,,,,,,,,,,,,,,,,,,29964,Productionise Electronic Tariff File,Done
Clone original repo,HOTT-3800,29968,Story,Done,HOTT,HMRC Online Trade Tariff,software,Carl Gabriel,61bc5259b24f10007027f21a,,Minor,Done,,,Matt Lavis,557058:bd906919-b0e3-4ec1-af61-1b1c41c6a595,Matt Lavis,557058:bd906919-b0e3-4ec1-af61-1b1c41c6a595,09/Aug/23 2:17 PM,15/Aug/23 4:32 PM,13/Sep/23 9:06 AM,15/Aug/23 3:05 PM,,0,ott_report_2023_august,"The Electronic Tariff File GitHub repository is already present on the Transform trade-tariff account

[https://github.com/trade-tariff/electronic-tariff-file|https://github.com/trade-tariff/electronic-tariff-file|smart-link] 

Please can this project clone the account rather than using the existing one, so that the existing one can continue to run in parallel while this is being migrated to use production data

Once this is cloned [~accountid:557058:bd906919-b0e3-4ec1-af61-1b1c41c6a595] will move the existing repo back to his own account on GitHub and off the trade-tariff account to save future confusion.",,Matt Lavis,,,,557058:bd906919-b0e3-4ec1-af61-1b1c41c6a595,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,{},,,,,,,,,,,,purple,,,,,,1|hzzk3j:i,,,,,,,,HOTT Sprint 62,,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,,,,,,,,,29964,Productionise Electronic Tariff File,Done
Compare ETF prod-generated content versus offline,HOTT-3801,29969,Story,Done,HOTT,HMRC Online Trade Tariff,software,Carl Gabriel,61bc5259b24f10007027f21a,,Minor,Done,Matt Lavis,557058:bd906919-b0e3-4ec1-af61-1b1c41c6a595,Matt Lavis,557058:bd906919-b0e3-4ec1-af61-1b1c41c6a595,Matt Lavis,557058:bd906919-b0e3-4ec1-af61-1b1c41c6a595,09/Aug/23 2:17 PM,17/Aug/23 12:27 PM,13/Sep/23 9:06 AM,17/Aug/23 12:26 PM,,0,ott_report_2023_august,"I’m not super familiar with the content of each file, but we could check:

# The number of bytes in every zip/7z file
# Do a simple diff on every file to make sure that the data is the same

Matt needs to be using the same copy of the database as me, really",,Matt Lavis,,,,557058:bd906919-b0e3-4ec1-af61-1b1c41c6a595,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,{},,,,,,,,,,,,purple,,,,,,1|i000n3:zrrzxcr,,,,,,,,HOTT Sprint 62,,,,,,,,,5.0,,,,,,,,,,,,,,,,,,,,,,,,,,,29964,Productionise Electronic Tariff File,Done
Validate MV versus non-MV,HOTT-3802,29970,Story,Done,HOTT,HMRC Online Trade Tariff,software,Carl Gabriel,61bc5259b24f10007027f21a,,Minor,Done,,,Matt Lavis,557058:bd906919-b0e3-4ec1-af61-1b1c41c6a595,Matt Lavis,557058:bd906919-b0e3-4ec1-af61-1b1c41c6a595,09/Aug/23 2:19 PM,09/Aug/23 4:38 PM,13/Sep/23 9:06 AM,09/Aug/23 3:04 PM,,0,ott_report_2023_august,"To prove that the ETF content that is created when the application is run with materialised views is the same as when run without, a comparison needs to be run.",,Matt Lavis,,,,557058:bd906919-b0e3-4ec1-af61-1b1c41c6a595,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,{},,,,,,,,,,,,purple,,,,,,1|i001cv:i,,,,,,,,,,,,,,,,,,,,,,,,,,,,09/Aug/23 3:04 PM;557058:bd906919-b0e3-4ec1-af61-1b1c41c6a595;Identical,,,,,,,,,,,,,,,,29964,Productionise Electronic Tariff File,Done
Implement retention period for older ETF data,HOTT-3803,29971,Story,Done,HOTT,HMRC Online Trade Tariff,software,Carl Gabriel,61bc5259b24f10007027f21a,,Minor,Done,William Fish,5fad1d0c8573800069e74d00,Matt Lavis,557058:bd906919-b0e3-4ec1-af61-1b1c41c6a595,Matt Lavis,557058:bd906919-b0e3-4ec1-af61-1b1c41c6a595,09/Aug/23 3:03 PM,15/Aug/23 4:32 PM,13/Sep/23 9:06 AM,15/Aug/23 3:53 PM,,0,ott_report_2023_august,,,Matt Lavis,,,,557058:bd906919-b0e3-4ec1-af61-1b1c41c6a595,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,{},,,,,,,,,,,,purple,,,,,,1|i001dq:z,,,,,,,,HOTT Sprint 63,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,29964,Productionise Electronic Tariff File,Done
Document the ETF for handover,HOTT-3804,29972,Story,Done,HOTT,HMRC Online Trade Tariff,software,Carl Gabriel,61bc5259b24f10007027f21a,,Minor,Done,,,Matt Lavis,557058:bd906919-b0e3-4ec1-af61-1b1c41c6a595,Matt Lavis,557058:bd906919-b0e3-4ec1-af61-1b1c41c6a595,09/Aug/23 3:17 PM,09/Aug/23 6:56 PM,13/Sep/23 9:06 AM,09/Aug/23 6:56 PM,,0,ott_report_2023_august,,,Matt Lavis,,,,557058:bd906919-b0e3-4ec1-af61-1b1c41c6a595,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,{},,,,,,,,,,,,purple,,,,,,1|i001cw:,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,29964,Productionise Electronic Tariff File,Done
Set up a schedule to send the ETF on Thursdays at 08:00,HOTT-3805,29973,Story,Done,HOTT,HMRC Online Trade Tariff,software,Carl Gabriel,61bc5259b24f10007027f21a,,Minor,Done,William Fish,5fad1d0c8573800069e74d00,Matt Lavis,557058:bd906919-b0e3-4ec1-af61-1b1c41c6a595,Matt Lavis,557058:bd906919-b0e3-4ec1-af61-1b1c41c6a595,09/Aug/23 3:25 PM,15/Aug/23 4:32 PM,13/Sep/23 9:06 AM,15/Aug/23 3:51 PM,,0,ott_report_2023_august,,,Matt Lavis,,,,557058:bd906919-b0e3-4ec1-af61-1b1c41c6a595,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,{},,,,,,,,,,,,purple,,,,,,1|i001dl:,,,,,,,,HOTT Sprint 63,,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,,,,,,,,,29964,Productionise Electronic Tariff File,Done
Get Electronic Tariff File running on development machine,HOTT-3850,30022,Story,Done,HOTT,HMRC Online Trade Tariff,software,Carl Gabriel,61bc5259b24f10007027f21a,,Minor,Done,William Fish,5fad1d0c8573800069e74d00,William Fish,5fad1d0c8573800069e74d00,William Fish,5fad1d0c8573800069e74d00,15/Aug/23 2:46 PM,15/Aug/23 4:32 PM,13/Sep/23 9:06 AM,15/Aug/23 3:40 PM,,0,ott_report_2023_august,Review the ETF process and iron out any cracks that might inhibit us from running in a production context,,William Fish,,,,5fad1d0c8573800069e74d00,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,{},,,,,,,,,,,,,,,,,,1|hzzk3j:r,,,,,,,,HOTT Sprint 62,,,,,,,,,3.0,,,,,,,,,,,,,,,,,,,,,,,,,,,29964,Productionise Electronic Tariff File,Done
Rotate the Electronic Tariff File,HOTT-3853,30025,Story,Done,HOTT,HMRC Online Trade Tariff,software,Carl Gabriel,61bc5259b24f10007027f21a,,Minor,Done,William Fish,5fad1d0c8573800069e74d00,William Fish,5fad1d0c8573800069e74d00,William Fish,5fad1d0c8573800069e74d00,15/Aug/23 3:21 PM,06/Sep/23 4:30 PM,13/Sep/23 9:06 AM,16/Aug/23 4:29 PM,,0,ott_report_2023_august,"On a schedule, we need to rotate the electronic tariff files

We need to make a couple of decisions around this

* Is this something that, say, a bucket lifecycle rule might help us with?
* Where will this functionality live if not in the lifecycle rules of the bucket? I’m assuming circle ci, here, as per the other workflows

*AC*

* Keep only the last 6 weeks of electronic tariff files (some users pull these monthly)",,William Fish,,,,5fad1d0c8573800069e74d00,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,{},,,,,,,,,,,,,,,,,,1|hzzk35:4,,,,,,,,HOTT Sprint 62,,,,,,,,,5.0,,,,,,,,,,,,,,,,,,,,,,,,,,,29964,Productionise Electronic Tariff File,Done
Reinstate database dump workflows and adjust to use merged cluster,HOTT-3854,30026,Story,Done,HOTT,HMRC Online Trade Tariff,software,Carl Gabriel,61bc5259b24f10007027f21a,,Minor,Done,William Fish,5fad1d0c8573800069e74d00,William Fish,5fad1d0c8573800069e74d00,William Fish,5fad1d0c8573800069e74d00,15/Aug/23 3:40 PM,06/Sep/23 4:29 PM,13/Sep/23 9:06 AM,16/Aug/23 4:29 PM,,0,ott_report_2023_august,,,William Fish,,,,5fad1d0c8573800069e74d00,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,{},,,,,,,,,,,,,,,,,,1|hzzk35:02,,,,,,,,HOTT Sprint 62,,,,,,,,,5.0,,,,,,,,,,,,,,,,,,,,,,,,,,,29964,Productionise Electronic Tariff File,Done
Promote the production runs of the ETF to go out to the users Matt has configured,HOTT-3855,30027,Story,Done,HOTT,HMRC Online Trade Tariff,software,Carl Gabriel,61bc5259b24f10007027f21a,,Minor,Done,William Fish,5fad1d0c8573800069e74d00,William Fish,5fad1d0c8573800069e74d00,William Fish,5fad1d0c8573800069e74d00,15/Aug/23 3:54 PM,06/Sep/23 4:27 PM,13/Sep/23 9:06 AM,23/Aug/23 2:26 PM,,0,ott_report_2023_august,"The attached Excel spreadsheet contains a list of all of the users that need to get the ETF file on a weekly basis at 8am on a Thursday via email.

The users are all HMRC users, except for:

* our group support email address (HMRC digital)
* Carl’s HMRC email address (not digital) - carl.gabriel@hmrc.gov.uk

The purpose of this is to validate that the email being generated is able to get into HMRC proper, and not blocked for whatever reason.

Emails are to be generated from the support email address:

* Email [hmrc-trade-tariff-support-g@digital.hmrc.gov.uk|mailto:hmrc-trade-tariff-support-g@digital.hmrc.gov.uk]
* Friendly name: Online Trade Tariff Support



[^Electronic Tariff File distribution list.xlsx]

",,William Fish,,,,5fad1d0c8573800069e74d00,,,,,,,,,,,,,,,,,,,,16/Aug/23 9:20 AM;Matt.Lavis;Electronic Tariff File distribution list.xlsx;https://transformuk.atlassian.net/rest/api/3/attachment/content/18063,,,,,,,,,,,,,,,,{},,,,,,,,,,,,,,,,,,1|hzzk35:004,,,,,,,,HOTT Sprint 62,,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,,,,,,,,,29964,Productionise Electronic Tariff File,Done
Create new  AWS user with SES and S3 bucket read only,HOTT-3859,30031,Story,Done,HOTT,HMRC Online Trade Tariff,software,Carl Gabriel,61bc5259b24f10007027f21a,,Minor,Done,William Fish,5fad1d0c8573800069e74d00,William Fish,5fad1d0c8573800069e74d00,William Fish,5fad1d0c8573800069e74d00,16/Aug/23 9:37 AM,06/Sep/23 4:30 PM,13/Sep/23 9:06 AM,16/Aug/23 4:29 PM,,0,ott_report_2023_august,We want a new account which allows a ci user for the electronic tariff file generation to be able to read from the backups bucket and to be able to send emails with SES,,William Fish,,,,5fad1d0c8573800069e74d00,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,{},,,,,,,,,,,,,,,,,,1|hzzk35:0i,,,,,,,,HOTT Sprint 62,,,,,,,,,3.0,,,,,,,,,,,,,,,,,,,,,,,,,,,29964,Productionise Electronic Tariff File,Done
Test the delivery of the ETF to Carl's HMRC account before trying with HMRC real users,HOTT-3860,30032,Story,Done,HOTT,HMRC Online Trade Tariff,software,Carl Gabriel,61bc5259b24f10007027f21a,,Minor,Done,William Fish,5fad1d0c8573800069e74d00,Matt Lavis,557058:bd906919-b0e3-4ec1-af61-1b1c41c6a595,Matt Lavis,557058:bd906919-b0e3-4ec1-af61-1b1c41c6a595,16/Aug/23 9:57 AM,06/Sep/23 4:30 PM,13/Sep/23 9:06 AM,16/Aug/23 4:29 PM,,0,ott_report_2023_august,,,Matt Lavis,,,,557058:bd906919-b0e3-4ec1-af61-1b1c41c6a595,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,{},,,,,,,,,,,,,,,,,,1|hzzk35:2,,,,,,,,HOTT Sprint 62,,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,,,,,,,,,29964,Productionise Electronic Tariff File,Done
"Production defect - no VAT rates are showing on heading / comm codes (4 digits that are declarable), when the VAT rate is VATZ",HOTT-3834,30004,Bug,Done,HOTT,HMRC Online Trade Tariff,software,Carl Gabriel,61bc5259b24f10007027f21a,,Critical,Done,William Fish,5fad1d0c8573800069e74d00,Matt Lavis,557058:bd906919-b0e3-4ec1-af61-1b1c41c6a595,Matt Lavis,557058:bd906919-b0e3-4ec1-af61-1b1c41c6a595,14/Aug/23 5:08 PM,15/Aug/23 4:32 PM,13/Sep/23 9:06 AM,15/Aug/23 9:06 AM,,0,ott_report_2023_august,"The following 6 commodities have been pointed out by HMRC’s tariff management team as having no VAT rates on them:

* 0814000000
* 5609000000
* 5910000000
* 1109000000
* 3101000000
* 1801000000

There are probably more … the pattern looks like it is:

* comm codes (declarable) that are also headings (4 significant digits)
* no standard VAT rate, just VATZ, _although this could be nonsense._

Just taking the first in the list, *0814*, there is definitely a VAT rate in place there, which is measure -1009503019, assigned to the chapter (0800000000)

Please can we investigate why all these are missing.

The data is also missing from the APIs.

VAT’s measure type is 305.",,Matt Lavis,,,,557058:bd906919-b0e3-4ec1-af61-1b1c41c6a595,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,{},,,,,,,,,,,,,,,,,,1|hzzk36:,,,,,,,,HOTT Sprint 62,,,,,,,,,,,,,,,,,,,,"14/Aug/23 6:09 PM;557058:bd906919-b0e3-4ec1-af61-1b1c41c6a595;From Intradev - and therefore raising to critical

Hi Matt,

 

I am wondering if you could help please.

 

We am unsure as to what is a declarable commodity and what is not?

 

We are pulling the basic commodity code details from the [https://www.trade-tariff.service.gov.uk/api/v2/commodities/2204218110|https://www.trade-tariff.service.gov.uk/api/v2/commodities/2204218110x] based on the producsuffixline being 80 (a declarable commodity)

 

We have 214 commodities with no VAT Rates.

 

One seems to relate to a whole Section 98, related to Art.

 

See attached spreadsheet.

 

No background = headings no VAT but declarable

Yellow background = commodity no VAT but declarable

Orange background = commodity identified by Relay Port Agency that started our investigation. [https://www.trade-tariff.service.gov.uk/commodities/3406000000?country=CN|https://www.trade-tariff.service.gov.uk/commodities/3406000000?country=CN|smart-link] 

 

Would be grateful if you could shed some light please.

 

Thanks

 

Paul",,,,,,,,,,,,,,,,25960,"Production issues, bugs, defects",Done
July monthly report,HOTT-3718,29872,Story,Done,HOTT,HMRC Online Trade Tariff,software,Carl Gabriel,61bc5259b24f10007027f21a,,Minor,Done,Carl Gabriel,61bc5259b24f10007027f21a,Matt Lavis,557058:bd906919-b0e3-4ec1-af61-1b1c41c6a595,Matt Lavis,557058:bd906919-b0e3-4ec1-af61-1b1c41c6a595,28/Jul/23 6:49 AM,06/Sep/23 4:21 PM,06/Sep/23 10:22 AM,06/Sep/23 10:26 AM,,0,ott_report_2023_august,,,Matt Lavis,,,,557058:bd906919-b0e3-4ec1-af61-1b1c41c6a595,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,{},,,,,,,,,,,,,,,,,,1|i000n3:zrrzt,,,,,,,,HOTT Sprint 61,HOTT Sprint 62,HOTT Sprint 63,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,25605,Project planning &  governance,Done
Governance - sign AWS WAF RFS change,HOTT-3721,29875,Story,Done,HOTT,HMRC Online Trade Tariff,software,Carl Gabriel,61bc5259b24f10007027f21a,,Minor,Done,Matt Lavis,557058:bd906919-b0e3-4ec1-af61-1b1c41c6a595,Matt Lavis,557058:bd906919-b0e3-4ec1-af61-1b1c41c6a595,Matt Lavis,557058:bd906919-b0e3-4ec1-af61-1b1c41c6a595,28/Jul/23 9:02 AM,03/Aug/23 8:40 AM,13/Sep/23 9:06 AM,02/Aug/23 11:20 AM,,0,ott_report_2023_august,,,Matt Lavis,,,,557058:bd906919-b0e3-4ec1-af61-1b1c41c6a595,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,{},,,,,,,,,,,,,,,,,,1|hzzza6:fi,,,,,,,,HOTT Sprint 61,,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,,,,,,,,,25605,Project planning &  governance,Done
Governance - sign MI RFS change,HOTT-3722,29876,Story,Done,HOTT,HMRC Online Trade Tariff,software,Carl Gabriel,61bc5259b24f10007027f21a,,Minor,Done,Matt Lavis,557058:bd906919-b0e3-4ec1-af61-1b1c41c6a595,Matt Lavis,557058:bd906919-b0e3-4ec1-af61-1b1c41c6a595,Matt Lavis,557058:bd906919-b0e3-4ec1-af61-1b1c41c6a595,28/Jul/23 9:02 AM,03/Aug/23 8:40 AM,13/Sep/23 9:06 AM,02/Aug/23 11:20 AM,,0,ott_report_2023_august,,,Matt Lavis,,,,557058:bd906919-b0e3-4ec1-af61-1b1c41c6a595,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,{},,,,,,,,,,,,,,,,,,1|hzzza6:fr,,,,,,,,HOTT Sprint 61,,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,,,,,,,,,25605,Project planning &  governance,Done
Governance - Exit plan clarification,HOTT-3723,29877,Story,Done,HOTT,HMRC Online Trade Tariff,software,Carl Gabriel,61bc5259b24f10007027f21a,,Minor,Done,Matt Lavis,557058:bd906919-b0e3-4ec1-af61-1b1c41c6a595,Matt Lavis,557058:bd906919-b0e3-4ec1-af61-1b1c41c6a595,Matt Lavis,557058:bd906919-b0e3-4ec1-af61-1b1c41c6a595,28/Jul/23 9:02 AM,03/Aug/23 8:40 AM,13/Sep/23 9:06 AM,02/Aug/23 11:20 AM,,0,ott_report_2023_august,,,Matt Lavis,,,,557058:bd906919-b0e3-4ec1-af61-1b1c41c6a595,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,{},,,,,,,,,,,,,,,,,,1|hzzza6:fv,,,,,,,,HOTT Sprint 61,,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,,,,,,,,,25605,Project planning &  governance,Done
explore options for 'OTT/WF/MI' cost breakdown method,HOTT-3786,29953,Story,Done,HOTT,HMRC Online Trade Tariff,software,Carl Gabriel,61bc5259b24f10007027f21a,,Minor,Done,Chris Booth,62850c48bd640f0068ae388e,Chris Booth,62850c48bd640f0068ae388e,Chris Booth,62850c48bd640f0068ae388e,07/Aug/23 5:03 PM,06/Sep/23 4:29 PM,13/Sep/23 9:06 AM,21/Aug/23 9:23 AM,,0,ott_report_2023_august,,,Chris Booth,,,,62850c48bd640f0068ae388e,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,{},,,,,,,,,,,,purple,,,,,,1|i000n3:zrrzv,,,,,,,,HOTT Sprint 61,HOTT Sprint 62,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,25605,Project planning &  governance,Done
"Analyse the usage of the v1 APIs in NewRelic, with a view to retiring the v1 APIs",HOTT-3750,29914,Story,Done,HOTT,HMRC Online Trade Tariff,software,Carl Gabriel,61bc5259b24f10007027f21a,,Minor,Done,William Fish,5fad1d0c8573800069e74d00,Matt Lavis,557058:bd906919-b0e3-4ec1-af61-1b1c41c6a595,Matt Lavis,557058:bd906919-b0e3-4ec1-af61-1b1c41c6a595,02/Aug/23 1:24 PM,06/Sep/23 4:23 PM,02/Aug/23 1:32 PM,25/Aug/23 4:11 PM,,0,ott_report_2023_august,"We know that the DBT / DIT application TWUK (Trade with the UK)

[https://www.get-rules-tariffs-trade-with-uk.service.gov.uk/choose-country/|https://www.get-rules-tariffs-trade-with-uk.service.gov.uk/choose-country/|smart-link] 

uses the v1 APIs on their commodity code pages (it does an overnight data load)

But does anyone else?

This will help us to understand if there is a need to keep this going / how to communicate the retirement.

h1. Results required

List of IP addresses accessing the v1 APIs

* over the course of a month
* Identifying the API
* identifying the rough time of day (e.g. in work hours versus out of work hours)

If IP addresses can be identified, other than that just sessions.",,Matt Lavis,William Fish,,,557058:bd906919-b0e3-4ec1-af61-1b1c41c6a595,5fad1d0c8573800069e74d00,,,,,,,,,,,,,,,,,,,25/Aug/23 4:07 PM;ug:04210bea-1700-439d-9571-555e94283a15;image-20230825-150603.png;https://transformuk.atlassian.net/rest/api/3/attachment/content/18077,25/Aug/23 4:07 PM;ug:04210bea-1700-439d-9571-555e94283a15;image-20230825-150709.png;https://transformuk.atlassian.net/rest/api/3/attachment/content/18078,,,,,,,,,,,,,,,{},,,,,,,,,,,,,,,,,,1|hzzk2f:02,,,,,,,,HOTT Sprint 62,,,,,,,,,,,,,,,,,,,2023-08-25 15:07:43.196,"25/Aug/23 4:07 PM;5fad1d0c8573800069e74d00;These are the counts for the distinct V1 apis that are being used by api users:

!image-20230825-150603.png|width=1532,height=628!

And these are the counts for the distinct V2 apis that are being used by api users:

!image-20230825-150709.png|width=1665,height=804!

For posterity:



{code:sql}FROM Log 
SELECT count(*)
WHERE message RLIKE r'\[[0-9]{3}\].*'
AND message RLIKE r'.*Api::V2.*'
SINCE 1 months ago
FACET capture(message, r'.*(?P<controller>Api::V2::[a-zA-Z]+Controller#[a-zA-Z]+).*')
{code}","25/Aug/23 4:08 PM;5fad1d0c8573800069e74d00;Basically, we can see that the V1 apis are hardly used when compared to the V2 apis so we should be safe to deprecate these in December",,,,,,,,,,,,,,,29915,Retiring the v1 version 1 APIs,Done
Write service update note for the retirement of the v1 APIs,HOTT-3754,29918,Story,Done,HOTT,HMRC Online Trade Tariff,software,Carl Gabriel,61bc5259b24f10007027f21a,,Minor,Done,Matt Lavis,557058:bd906919-b0e3-4ec1-af61-1b1c41c6a595,Matt Lavis,557058:bd906919-b0e3-4ec1-af61-1b1c41c6a595,Matt Lavis,557058:bd906919-b0e3-4ec1-af61-1b1c41c6a595,02/Aug/23 2:49 PM,16/Aug/23 9:02 AM,13/Sep/23 9:06 AM,15/Aug/23 8:42 PM,,0,ott_report_2023_august,"Tariff news section to warn V1 users that we’re not using this anymore.
Give them x months notice",,Matt Lavis,,,,557058:bd906919-b0e3-4ec1-af61-1b1c41c6a595,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,{},,,,,,,,,,,,,,,,,,1|hzzk3k:hr,,,,,,,,HOTT Sprint 62,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,29915,Retiring the v1 version 1 APIs,Done
Copy API retirement service update onto the API news page,HOTT-3856,30028,Story,Done,HOTT,HMRC Online Trade Tariff,software,Carl Gabriel,61bc5259b24f10007027f21a,,Minor,Done,William Fish,5fad1d0c8573800069e74d00,Matt Lavis,557058:bd906919-b0e3-4ec1-af61-1b1c41c6a595,Matt Lavis,557058:bd906919-b0e3-4ec1-af61-1b1c41c6a595,15/Aug/23 8:42 PM,06/Sep/23 4:23 PM,13/Sep/23 9:06 AM,29/Aug/23 11:34 AM,,0,ott_report_2023_august,"Please copy the markdown from here:

[https://tariff-admin-production.london.cloudapps.digital/news_items/355/edit|https://tariff-admin-production.london.cloudapps.digital/news_items/355/edit]

onto the new page on the API Site

[https://api.trade-tariff.service.gov.uk/news.html|https://api.trade-tariff.service.gov.uk/news.html|smart-link] ",,Matt Lavis,,,,557058:bd906919-b0e3-4ec1-af61-1b1c41c6a595,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,{},,,,,,,,,,,,,,,,,,1|hzzk2f:000i,,,,,,,,HOTT Sprint 62,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,29915,Retiring the v1 version 1 APIs,Done
DCTS instructions are also showing against SADC trade agreement,HOTT-3611,29734,Bug,Done,HOTT,HMRC Online Trade Tariff,software,Carl Gabriel,61bc5259b24f10007027f21a,,Minor,Done,Alessandro DeSimone,6125108d7a1bfb0071787b51,Matt Lavis,557058:bd906919-b0e3-4ec1-af61-1b1c41c6a595,Matt Lavis,557058:bd906919-b0e3-4ec1-af61-1b1c41c6a595,11/Jul/23 8:48 AM,06/Sep/23 4:27 PM,13/Sep/23 9:06 AM,23/Aug/23 9:38 AM,,0,ott_report_2023_august,"See [https://www.trade-tariff.service.gov.uk/commodities/2924297087#import_duties|https://www.trade-tariff.service.gov.uk/commodities/2924297087#import_duties|smart-link] 

We recently implemented a fix so that the CDS completion instructions that were stored in the roo_schemes_uk.json file would show against the right trade agreements

This was complex, as:

* there are schemes for DCTS, AU and NZ
* the schemes for AU and NZ show against the contained countries
* the schemes for the 3 * DCTS measures show against the country groups (1060, 1061 and 1062)

The logic that has been implemented fails to capture the fact that one or more of the countries which is in one of the DCTS groups is also in SADC EPA group (1035)

These countries are:

* Lesotho (LS)
* Mozambique (MZ)

This is what it looks like now …

!sadc sadness.png|width=1732,height=750!

The conditions should be constrained to only show against the trade agreement to which they have been assigned, and not to other trade agreements that might also feature those countries.

Therefore, in the example above, the agreement should:

* continue to show for 1060, 1061 and 1062
* stop showing against 1035
* do not start showing against Solomon Islands (SB), which is also a part of one of the DCTS tiers (1062)

{panel:bgColor=#deebff}
The point on Solomon Islands is important, as the fix which *stopped* this data from showing against the Solomon Islands (SB) is the fix which started to show this content against SADC (1035)
{panel}



To be complete:

* The (different) Australia instructions need to continue to show against Australia
* The (again different) New Zealand instructions need to continue to show against New Zealand",,Jeremy Wilkins,Matt Lavis,,,70121:25672516-c580-41e3-b0ee-efd76637d027,557058:bd906919-b0e3-4ec1-af61-1b1c41c6a595,,,,,,,,,,,,,,,,,,,09/Aug/23 4:30 PM;Matt.Lavis;roo_schemes_uk.json;https://transformuk.atlassian.net/rest/api/3/attachment/content/18048,11/Jul/23 9:03 AM;Matt.Lavis;sadc sadness.png;https://transformuk.atlassian.net/rest/api/3/attachment/content/17987,,,,,,,,,,,,,,,{},,,,,,,,,,,,,,,,,,1|hzzk2f:1,,,,,,,,HOTT Sprint 59,HOTT Sprint 60,HOTT Sprint 60,HOTT Sprint 61,HOTT Sprint 62,,,,,,,,,,,,,,,2023-08-18 11:05:31.613,"09/Aug/23 4:36 PM;557058:bd906919-b0e3-4ec1-af61-1b1c41c6a595;I have added an updated roo_schemes_uk.json to this ticket [~accountid:6125108d7a1bfb0071787b51] and [~accountid:5fad1d0c8573800069e74d00] 

It has four blobs of JSON added to four schemes:

* australia
* new-zealand
* dcts-ldcs
* dcts-general-enhanced

These four blobs take this form, respectively, in each case directly under the node entitled *proof_codes*

*australia*

This should make the conditions dialog show up against:

* AU only

{noformat}            ""show_proofs_for_geographical_areas"": [
                ""AU""
            ],
{noformat}

*new-zealand*

This should make the conditions dialog show up against:

* NZ only

{noformat}            ""show_proofs_for_geographical_areas"": [
                ""NZ""
            ],
{noformat}

*dcts-ldcs*

This should make the conditions dialog show up against:

* Developing Countries Trading Scheme (DCTS) - Comprehensive Preferences (1062)

{panel:bgColor=#deebff}
Please note - they have renamed the country group that used to be DCTS - Least Developed Countries, as Comprehensive Preferences, as it sounded less demeaning.

They’re so woke, these policy people!
{panel}

{noformat}            ""show_proofs_for_geographical_areas"": [
                ""1062""
            ],
{noformat}

*dcts-general-enhanced*

This should make the conditions dialog show up against:

* Developing Countries Trading Scheme (DCTS) - Enhanced Preferences (1061)
* Developing Countries Trading Scheme (DCTS) - Standard Preferences (1060)

{noformat}            ""show_proofs_for_geographical_areas"": [
                ""1060"",
                ""1061""
            ],
{noformat}","18/Aug/23 12:05 PM;70121:25672516-c580-41e3-b0ee-efd76637d027;Pull Request 1591
https://github.com/trade-tariff/trade-tariff-frontend/pull/1591

Review App
https://tariff-frontend-pr1591.london.cloudapps.digital/",,,,,,,,,,,,,,,27577,Rules of origin (Roo) - strategic,Done
Merge uk/xi databases on production,HOTT-2957,28953,Story,Done,HOTT,HMRC Online Trade Tariff,software,Carl Gabriel,61bc5259b24f10007027f21a,,Minor,Done,William Fish,5fad1d0c8573800069e74d00,William Fish,5fad1d0c8573800069e74d00,William Fish,5fad1d0c8573800069e74d00,29/Mar/23 1:30 PM,15/Aug/23 4:32 PM,13/Sep/23 9:06 AM,14/Aug/23 8:52 PM,,0,ott_report_2023_august,"# Dump the UK database
# Dump the XI database
# Spin up a new merged database cluster
# Drop everything on tariff_development locally
# Create a brand new database and load UK into it
# Rename the UK schema to uk
# Create a public schema
# Move the UK resources into the public schema (extensions, etc)
# Verify functions, etc, are all in the public schema
# Load the XI data into public
# Rename public to XI
# Move the public resources in XI back to public
# Get a full dump of the new xi/uk database
# Restore the new database into the new merged cluster
# Migrate the apps (out of hours) to the new database
# Run the production regression suite

Use the following to verify that all database objects that are shared by both services are available under public:

{code:sql}SELECT n.nspname AS schema_name, p.proname AS function_name
FROM pg_proc p
JOIN pg_namespace n ON p.pronamespace = n.oid;

SELECT n.nspname AS schema_name, t.typname AS type_name
FROM pg_type t
JOIN pg_namespace n ON t.typnamespace = n.oid;

SELECT n.nspname AS schema_name, t.typname AS domain_name
FROM pg_type t
JOIN pg_namespace n ON t.typnamespace = n.oid
WHERE t.typtype = 'd';

SELECT n.nspname AS schema_name, p.proname AS trigger_function_name
FROM pg_proc p
JOIN pg_namespace n ON p.pronamespace = n.oid
WHERE p.proistrigger = true;

SELECT n.nspname AS schema_name, o.oprname AS operator_name
FROM pg_operator o
JOIN pg_namespace n ON o.oprnamespace = n.oid;

SELECT n.nspname AS schema_name, c.conname AS conversion_name
FROM pg_conversion c
JOIN pg_namespace n ON c.connamespace = n.oid;

SELECT n.nspname AS schema_name, e.extname AS extension_name
FROM pg_extension e
JOIN pg_namespace n ON e.extnamespace = n.oid;

SELECT n.nspname AS schema_name, fdwname AS fdw_name
FROM pg_foreign_data_wrapper fdw
JOIN pg_namespace n ON fdw.fdwowner = n.oid;

SELECT n.nspname AS schema_name, srvname AS server_name
FROM pg_foreign_server srv
JOIN pg_namespace n ON srv.srvowner = n.oid;

SELECT srv.srvname AS server_name, rolname AS role_name
FROM pg_user_mapping um
JOIN pg_foreign_server srv ON um.umserver = srv.oid
JOIN pg_roles r ON um.umuser = r.oid;

SELECT n.nspname AS schema_name, p.proname AS aggregate_function_name
FROM pg_proc p
JOIN pg_namespace n ON p.pronamespace = n.oid
JOIN pg_aggregate ag ON ag.aggfnoid = p.oid;

SELECT n.nspname AS schema_name, cfgname AS ts_config_name
FROM pg_ts_config cfg
JOIN pg_namespace n ON cfg.cfgnamespace = n.oid;

SELECT n.nspname AS schema_name, dictname AS ts_dict_name
FROM pg_ts_dict dict
JOIN pg_namespace n ON dict.dictnamespace = n.oid;

SELECT n.nspname AS schema_name, prsname AS ts_parser_name
FROM pg_ts_parser prs
JOIN pg_namespace n ON prs.prsnamespace = n.oid;

SELECT n.nspname AS schema_name, tmplname AS ts_template_name
FROM pg_ts_template tmpl
JOIN pg_namespace n ON tmpl.tmplnamespace = n.oid;
{code}",,Nick Winfield,William Fish,,,641458a22cee496759eb1245,5fad1d0c8573800069e74d00,,,,,,,,,,,HOTT-3064,HOTT-2987,HOTT-3025,HOTT-3026,,,,,,,,,,,,,,,,,,,,,{},,,,,,,,,,,,,,,,,,1|hzzk37:,,,,,,,,HOTT Sprint 52,HOTT Sprint 60,HOTT Sprint 61,HOTT Sprint 62,,,,,,3.0,,,,,,,,,,2023-04-20 10:41:41.913,29/Mar/23 2:58 PM;5fad1d0c8573800069e74d00;I’m waiting for staging to run at least a few days of ETL before proceeding with production. This is to ensure that we’ve touched as many queries the backend might make and gathered some data.,20/Apr/23 11:41 AM;641458a22cee496759eb1245;Will do when heading cache work is completed.,,,,,,,,,,,,,,,25736,Security assurance & testing,Done
Stop Press Notice - 21st July 2023,HOTT-3684,29807,Story,Done,HOTT,HMRC Online Trade Tariff,software,Carl Gabriel,61bc5259b24f10007027f21a,,Minor,Done,Sunitha Vorsu,712020:fed6ef31-9984-4aaf-9e4d-ba9df0923524,Chris Booth,62850c48bd640f0068ae388e,Chris Booth,62850c48bd640f0068ae388e,21/Jul/23 12:03 PM,03/Aug/23 5:07 PM,13/Sep/23 9:06 AM,03/Aug/23 9:55 AM,,0,ott_report_2023_august,,,Chris Booth,,,,62850c48bd640f0068ae388e,,,,,,,,,,,,,,,,,,,,21/Jul/23 12:02 PM;ug:398da907-4418-409f-87ba-1069de71ca15;Stop press notice - 21 July 2023.docx;https://transformuk.atlassian.net/rest/api/3/attachment/content/18007,,,,,,,,,,,,,,,,{},,,,,,,,,,,,,,,,,,1|hzzza6:hyr,,,,,,,,HOTT Sprint 60,HOTT Sprint 61,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,28057,Stop press,Done
Stop Press - Aug 23 2023,HOTT-3891,30090,Story,Done,HOTT,HMRC Online Trade Tariff,software,Carl Gabriel,61bc5259b24f10007027f21a,,Minor,Done,Tanim Abedin,616d85b9892c420072e008ca,Tanim Abedin,616d85b9892c420072e008ca,Tanim Abedin,616d85b9892c420072e008ca,24/Aug/23 9:47 AM,06/Sep/23 4:21 PM,06/Sep/23 2:52 PM,25/Aug/23 9:53 AM,,0,ott_report_2023_august,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,{},,,,,,,,,,,,,,,,,,1|i001pb:,,,,,,,,HOTT Sprint 62,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,28057,Stop press,Done
Stop Press Notice - 31 Aug 2023,HOTT-3924,30123,Story,Done,HOTT,HMRC Online Trade Tariff,software,Carl Gabriel,61bc5259b24f10007027f21a,,Minor,Done,Chris Booth,62850c48bd640f0068ae388e,Chris Booth,62850c48bd640f0068ae388e,Chris Booth,62850c48bd640f0068ae388e,31/Aug/23 5:47 PM,06/Sep/23 4:21 PM,13/Sep/23 9:06 AM,31/Aug/23 6:51 PM,,0,ott_report_2023_august,"[UK Integrated Online Tariff: Look up commodity codes, duty and VAT rates - GOV.UK (trade-tariff.service.gov.uk)|https://www.trade-tariff.service.gov.uk/news/stories/tariff-stop-press-notice---31-august-2023]",,Chris Booth,,,,62850c48bd640f0068ae388e,,,,,,,,,,,,,,,,,,,,31/Aug/23 5:47 PM;ug:398da907-4418-409f-87ba-1069de71ca15;Stop press notice 31 August 2023.docx;https://transformuk.atlassian.net/rest/api/3/attachment/content/18084,,,,,,,,,,,,,,,,{},,,,,,,,,,,,,,,,,,1|i00253:,,,,,,,,HOTT Sprint 63,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,28057,Stop press,Done
Fix certificate search with type D,HOTT-3408,29531,Bug,Done,HOTT,HMRC Online Trade Tariff,software,Carl Gabriel,61bc5259b24f10007027f21a,,Medium,Done,William Fish,5fad1d0c8573800069e74d00,Jeremy Wilkins,70121:25672516-c580-41e3-b0ee-efd76637d027,Jeremy Wilkins,70121:25672516-c580-41e3-b0ee-efd76637d027,13/Jun/23 4:41 PM,12/Aug/23 11:47 AM,13/Sep/23 9:06 AM,10/Aug/23 5:19 PM,,0,ott_report_2023_august,"[http://localhost:3001/certificate_search?type=D&code=&description=|http://localhost:3001/certificate_search?type=D&code=&description=]

Takes 3 minutes to respond locally, reason is the backend response whilst quick is also 9 meg

[http://localhost:3000/certificates/search?code&description&page=1&type=D|http://localhost:3000/certificates/search?code&description&page=1&type=D]

This is for 2 pages of results",,Jeremy Wilkins,,,,70121:25672516-c580-41e3-b0ee-efd76637d027,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,{},,,,,,,,,,,,,,,,,,1|hzzz9v:via,,,,,,,,HOTT Sprint 61,,,,,,,,,,,,,,,,,,,,"03/Aug/23 4:29 PM;70121:25672516-c580-41e3-b0ee-efd76637d027;Pull Request 1569
https://github.com/trade-tariff/trade-tariff-frontend/pull/1569

Review App
https://tariff-frontend-pr1569.london.cloudapps.digital/","04/Aug/23 11:18 AM;70121:25672516-c580-41e3-b0ee-efd76637d027;Pull Request 1569
https://github.com/trade-tariff/trade-tariff-frontend/pull/1569

Review App
https://tariff-frontend-pr1569.london.cloudapps.digital/",,,,,,,,,,,,,,,28171,Support and maintenance,Done
"Migrate to using id, type for unique composite key for suggestions",HOTT-3579,29702,Story,Done,HOTT,HMRC Online Trade Tariff,software,Carl Gabriel,61bc5259b24f10007027f21a,,Minor,Done,William Fish,5fad1d0c8573800069e74d00,William Fish,5fad1d0c8573800069e74d00,William Fish,5fad1d0c8573800069e74d00,05/Jul/23 12:00 PM,06/Sep/23 4:28 PM,13/Sep/23 9:06 AM,23/Aug/23 9:38 AM,,0,ott_report_2023_august,"*What?*

We are planning to migrate the unique composite primary key structure of the search suggestions table from 'id, value' to 'id, type'. Additionally, we aim to rename the 'id' column to 'reference_id'.

*Why?*

This migration will help us eliminate the issues of row duplication that occur when the presentational 'value' field changes. It will improve data integrity and reduce redundancy. Furthermore, it will enable us to remove some existing deduplication code, simplifying our overall architecture.

*Acceptance Criteria*

# The search suggestions table no longer has 'id, value' as a composite primary key. Instead, it has 'id, type'.
# Duplicate rows are now longer possible/just result in upserts
# The 'id' column in the search suggestions table is renamed to 'reference_id', and all associated scripts, queries, and code are updated accordingly.
# The existing deduplication code that handled the 'id, value' duplication issue is safely removed",,William Fish,,,,5fad1d0c8573800069e74d00,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,{},,,,,,,,,,,,,,,,,,1|hzzk35:009,,,,,,,,HOTT Sprint 60,HOTT Sprint 60,HOTT Sprint 62,,,,,,,5.0,,,,,,,,,,,,,,,,,,,,,,,,,,,28171,Support and maintenance,Done
Supplementary units display is no longer correct,HOTT-3603,29726,Bug,Done,HOTT,HMRC Online Trade Tariff,software,Carl Gabriel,61bc5259b24f10007027f21a,,Medium,Done,William Fish,5fad1d0c8573800069e74d00,Matt Lavis,557058:bd906919-b0e3-4ec1-af61-1b1c41c6a595,Matt Lavis,557058:bd906919-b0e3-4ec1-af61-1b1c41c6a595,10/Jul/23 12:48 PM,06/Sep/23 4:29 PM,16/Aug/23 5:13 PM,21/Aug/23 9:18 AM,,0,ott_report_2023_august,"When the supplementary unit function was added to the top of commodity code pages, it was built so that it was aware of the geography.

For example, if you go to this URL:

[https://www.trade-tariff.service.gov.uk/commodities/1704909912|https://www.trade-tariff.service.gov.uk/commodities/1704909912|smart-link] 

there *is*  a supplementary unit, but it is only assigned to a particular geography (Central America 2200).

The unit should only show if the user has selected a country with a supplementary unit (or one of the countries from the group) indicated.



This was originally defined in [https://transformuk.atlassian.net/browse/HOTT-1054|https://transformuk.atlassian.net/browse/HOTT-1054|smart-link]  but appears to have regressed.",,Jeremy Wilkins,Matt Lavis,Sunitha Vorsu,,70121:25672516-c580-41e3-b0ee-efd76637d027,557058:bd906919-b0e3-4ec1-af61-1b1c41c6a595,712020:fed6ef31-9984-4aaf-9e4d-ba9df0923524,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,{},,,,,,,,,,,,,,,,,,1|hzzk3w:,,,,,,,,HOTT Sprint 61,HOTT Sprint 62,,,,,,,,,,,,,,,,,,2023-08-09 10:57:56.153,"09/Aug/23 11:57 AM;70121:25672516-c580-41e3-b0ee-efd76637d027;Pull Request 1578
https://github.com/trade-tariff/trade-tariff-frontend/pull/1578

Review App
https://tariff-frontend-pr1578.london.cloudapps.digital/","16/Aug/23 3:41 PM;712020:fed6ef31-9984-4aaf-9e4d-ba9df0923524;[~accountid:6125108d7a1bfb0071787b51] [~accountid:61bc5259b24f10007027f21a] [~accountid:61e847f6b134e8007020bcb5] [~accountid:62850c48bd640f0068ae388e] 

Tested in staging environment working as expected and added the new test file 

[countrySpecificSupplementaryUnit.cy|http://countrySpecificSupplementaryUnit.cy]",,,,,,,,,,,,,,,28171,Support and maintenance,Done
Add code search issues - searching for VATZ causes time-out - linked to 328,HOTT-3612,29735,Bug,Done,HOTT,HMRC Online Trade Tariff,software,Carl Gabriel,61bc5259b24f10007027f21a,,Medium,Done,William Fish,5fad1d0c8573800069e74d00,Matt Lavis,557058:bd906919-b0e3-4ec1-af61-1b1c41c6a595,Matt Lavis,557058:bd906919-b0e3-4ec1-af61-1b1c41c6a595,11/Jul/23 8:50 AM,02/Aug/23 10:39 AM,26/Jul/23 10:09 AM,01/Aug/23 12:47 PM,,0,ott_report_2023_august,,,Jeremy Wilkins,Matt Lavis,,,70121:25672516-c580-41e3-b0ee-efd76637d027,557058:bd906919-b0e3-4ec1-af61-1b1c41c6a595,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,{},,,,,,,,,,,,,,,,,,1|hzzz9v:vr3,,,,,,,,HOTT Sprint 60,HOTT Sprint 60,HOTT Sprint 61,,,,,,,,,,,,,,,,,2023-07-31 15:38:42.643,"31/Jul/23 4:38 PM;70121:25672516-c580-41e3-b0ee-efd76637d027;Pull Request 1562
https://github.com/trade-tariff/trade-tariff-frontend/pull/1562

Review App
https://tariff-frontend-pr1562.london.cloudapps.digital/",,,,,,,,,,,,,,,,28171,Support and maintenance,Done
Query from Colm Gibson | Ace Express Freight,HOTT-3674,29797,Story,Done,HOTT,HMRC Online Trade Tariff,software,Carl Gabriel,61bc5259b24f10007027f21a,,Minor,Done,Carl Gabriel,61bc5259b24f10007027f21a,Carl Gabriel,61bc5259b24f10007027f21a,Carl Gabriel,61bc5259b24f10007027f21a,20/Jul/23 9:39 AM,03/Aug/23 8:40 AM,31/Jul/23 6:08 PM,02/Aug/23 10:38 AM,,0,ott_report_2023_august,"Good afternoon

 

We received below email trader is asking if they can have similar document attached sent to their partner in UK, and can they have a master UK commodity code excel upload and then a regular updated commodity code upload so codes that are entered manually from a PDF Commercial invoice onto their UK booking system are checked as valid?

 

Is this something we can provide to them

 

 

 

Kind regards,

 

Bharat Patel",,Carl Gabriel,Matt Lavis,,,61bc5259b24f10007027f21a,557058:bd906919-b0e3-4ec1-af61-1b1c41c6a595,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,{},,,,,,,,,,,,,,,,,,1|hzzza6:d,,,,,,,,HOTT Sprint 60,HOTT Sprint 61,,,,,,,,1.0,,,,,,,,,,2023-08-02 09:38:29.386,"02/Aug/23 10:38 AM;557058:bd906919-b0e3-4ec1-af61-1b1c41c6a595;Hi Bharat,

The two URLS below are updated daily. They feature all end-lines in the UK and XI tariffs respectively, with the comm code, description, MFN rate and supp units.

To get all the latest daat, they would just need to alter the dates in the URLs.

[https://reporting.trade-tariff.service.gov.uk/uk/reporting/2023/07/24/tariff_data_basic_uk_2023_07_24.csv|https://reporting.trade-tariff.service.gov.uk/uk/reporting/2023/07/24/tariff_data_basic_uk_2023_07_24.csv]

[https://reporting.trade-tariff.service.gov.uk/xi/reporting/2023/07/22/tariff_data_basic_xi_2023_07_22.csv|https://reporting.trade-tariff.service.gov.uk/xi/reporting/2023/07/22/tariff_data_basic_xi_2023_07_22.csv]

Cheers

Matt",,,,,,,,,,,,,,,,28171,Support and maintenance,Done
Support Intradev on excise codes (may be organic related),HOTT-3736,29900,Story,Done,HOTT,HMRC Online Trade Tariff,software,Carl Gabriel,61bc5259b24f10007027f21a,,Minor,Done,Matt Lavis,557058:bd906919-b0e3-4ec1-af61-1b1c41c6a595,Matt Lavis,557058:bd906919-b0e3-4ec1-af61-1b1c41c6a595,Matt Lavis,557058:bd906919-b0e3-4ec1-af61-1b1c41c6a595,01/Aug/23 2:33 PM,03/Aug/23 8:40 AM,13/Sep/23 9:06 AM,02/Aug/23 10:37 AM,,0,ott_report_2023_august,,,Matt Lavis,,,,557058:bd906919-b0e3-4ec1-af61-1b1c41c6a595,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,{},,,,,,,,,,,,,,,,,,1|hzzza6:f,,,,,,,,HOTT Sprint 61,,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,,,,,,,,,28171,Support and maintenance,Done
Support on duplicate commodity codes (CDS data issue) - mic-cust.com,HOTT-3737,29901,Story,Done,HOTT,HMRC Online Trade Tariff,software,Carl Gabriel,61bc5259b24f10007027f21a,,Minor,Done,Matt Lavis,557058:bd906919-b0e3-4ec1-af61-1b1c41c6a595,Matt Lavis,557058:bd906919-b0e3-4ec1-af61-1b1c41c6a595,Matt Lavis,557058:bd906919-b0e3-4ec1-af61-1b1c41c6a595,01/Aug/23 2:48 PM,03/Aug/23 8:40 AM,13/Sep/23 9:06 AM,01/Aug/23 2:53 PM,,0,ott_report_2023_august,"Hello,

 

In the update from the 26th of July 2023 there were multiple inserts for the same tariff code (valid from the past).

 

One example is tariff code 2208202800.

 

This tariff code was inserted 10 times and with the update of 27th of July it was updated again 10 times. No descriptions were sent for the mentioned tariff code.

 

Others that are affected are: 

2208201800

2208201900

2208201600

2208206600

2208206900

2208208800

2208909911

 

Can you please have a look at this and let us know in case a correction is planned to be delivered on these data?

 

Thank you very much in advance,

 

Best regards,",,Matt Lavis,,,,557058:bd906919-b0e3-4ec1-af61-1b1c41c6a595,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,{},,,,,,,,,,,,,,,,,,1|hzzza5:,,,,,,,,HOTT Sprint 61,,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,,,,,,,,,28171,Support and maintenance,Done
Investigate UK CDS broken data load - 2 August 23,HOTT-3741,29905,Story,Done,HOTT,HMRC Online Trade Tariff,software,Carl Gabriel,61bc5259b24f10007027f21a,,Minor,Done,Matt Lavis,557058:bd906919-b0e3-4ec1-af61-1b1c41c6a595,Matt Lavis,557058:bd906919-b0e3-4ec1-af61-1b1c41c6a595,Matt Lavis,557058:bd906919-b0e3-4ec1-af61-1b1c41c6a595,02/Aug/23 7:25 AM,03/Aug/23 8:40 AM,13/Sep/23 9:06 AM,02/Aug/23 10:37 AM,,0,ott_report_2023_august,,,Matt Lavis,,,,557058:bd906919-b0e3-4ec1-af61-1b1c41c6a595,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,{},,,,,,,,,,,,,,,,,,1|hzzza6:g,,,,,,,,HOTT Sprint 61,,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,,,,,,,,,28171,Support and maintenance,Done
Document the CDS / HMRC data support process,HOTT-3748,29912,Story,Done,HOTT,HMRC Online Trade Tariff,software,Carl Gabriel,61bc5259b24f10007027f21a,,Minor,Done,Matt Lavis,557058:bd906919-b0e3-4ec1-af61-1b1c41c6a595,Matt Lavis,557058:bd906919-b0e3-4ec1-af61-1b1c41c6a595,Matt Lavis,557058:bd906919-b0e3-4ec1-af61-1b1c41c6a595,02/Aug/23 12:23 PM,03/Aug/23 8:40 AM,13/Sep/23 9:06 AM,02/Aug/23 12:23 PM,,0,ott_report_2023_august,,,Matt Lavis,,,,557058:bd906919-b0e3-4ec1-af61-1b1c41c6a595,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,{},,,,,,,,,,,,,,,,,,1|hzzza6:h,,,,,,,,HOTT Sprint 61,,,,,,,,,3.0,,,,,,,,,,,,,,,,,,,,,,,,,,,28171,Support and maintenance,Done
Support Intradev on measure types / add codes API,HOTT-3752,29916,Story,Done,HOTT,HMRC Online Trade Tariff,software,Carl Gabriel,61bc5259b24f10007027f21a,,Minor,Done,Matt Lavis,557058:bd906919-b0e3-4ec1-af61-1b1c41c6a595,Matt Lavis,557058:bd906919-b0e3-4ec1-af61-1b1c41c6a595,Matt Lavis,557058:bd906919-b0e3-4ec1-af61-1b1c41c6a595,02/Aug/23 1:30 PM,03/Aug/23 8:40 AM,13/Sep/23 9:06 AM,02/Aug/23 1:30 PM,,0,ott_report_2023_august,,,Matt Lavis,,,,557058:bd906919-b0e3-4ec1-af61-1b1c41c6a595,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,{},,,,,,,,,,,,,,,,,,1|hzzza6:h9,,,,,,,,HOTT Sprint 61,,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,,,,,,,,,28171,Support and maintenance,Done
Analyse doubled up restriction into free circulation measures from Iraq,HOTT-3753,29917,Story,Done,HOTT,HMRC Online Trade Tariff,software,Carl Gabriel,61bc5259b24f10007027f21a,,Minor,Done,Matt Lavis,557058:bd906919-b0e3-4ec1-af61-1b1c41c6a595,Matt Lavis,557058:bd906919-b0e3-4ec1-af61-1b1c41c6a595,Matt Lavis,557058:bd906919-b0e3-4ec1-af61-1b1c41c6a595,02/Aug/23 2:04 PM,03/Aug/23 8:40 AM,13/Sep/23 9:06 AM,02/Aug/23 2:05 PM,,0,ott_report_2023_august,"Hi all,


Nothing major here, but 

[https://www.trade-tariff.service.gov.uk/commodities/9705310000|https://www.trade-tariff.service.gov.uk/commodities/9705310000]

has doubled up measures for Iraq - they don't cause issues with ME32 or similar, as they use different measure types, but 465 and 475 are basically the same (Restriction in entry into free circulation), and they use the same add codes.

Not had a chance to check, but there may be some other comm codes in the same boat.

Would you be able to take a look and remove the doubled up entries?",,Matt Lavis,,,,557058:bd906919-b0e3-4ec1-af61-1b1c41c6a595,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,{},,,,,,,,,,,,,,,,,,1|hzzza6:hr,,,,,,,,HOTT Sprint 61,,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,,,,,,,,,28171,Support and maintenance,Done
Fix footnote search performance and functionality,HOTT-3755,29919,Story,Done,HOTT,HMRC Online Trade Tariff,software,Carl Gabriel,61bc5259b24f10007027f21a,,Minor,Done,William Fish,5fad1d0c8573800069e74d00,William Fish,5fad1d0c8573800069e74d00,William Fish,5fad1d0c8573800069e74d00,02/Aug/23 2:58 PM,10/Aug/23 6:11 PM,13/Sep/23 9:06 AM,10/Aug/23 5:19 PM,,0,ott_report_2023_august,"Footnote search has long-been neglected, has broken pagination and requires lots of caching which is expensive during ETL workflows in the morning.

* Replace cached opensearch index requests with plain old SQL with filtered/filtering joins
* Remove all of the cruft around caching since this is now completely removed by us updating the footnote search",,Jeremy Wilkins,William Fish,,,70121:25672516-c580-41e3-b0ee-efd76637d027,5fad1d0c8573800069e74d00,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,{},,,,,,,,,,,,,,,,,,1|hzzz9v:vi8,,,,,,,,HOTT Sprint 61,,,,,,,,,5.0,,,,,,,,,,2023-08-08 16:07:13.308,"08/Aug/23 5:07 PM;70121:25672516-c580-41e3-b0ee-efd76637d027;Pull Request 1579
https://github.com/trade-tariff/trade-tariff-frontend/pull/1579

Review App
https://tariff-frontend-pr1579.london.cloudapps.digital/","08/Aug/23 8:17 PM;70121:25672516-c580-41e3-b0ee-efd76637d027;Pull Request 1579
https://github.com/trade-tariff/trade-tariff-frontend/pull/1579

Review App
https://tariff-frontend-pr1579.london.cloudapps.digital/","09/Aug/23 2:52 PM;70121:25672516-c580-41e3-b0ee-efd76637d027;Pull Request 1579
https://github.com/trade-tariff/trade-tariff-frontend/pull/1579

Review App
https://tariff-frontend-pr1579.london.cloudapps.digital/",,,,,,,,,,,,,,28171,Support and maintenance,Done
Alcohol excise measures for CDS team - data extract,HOTT-3765,29929,Story,Done,HOTT,HMRC Online Trade Tariff,software,Carl Gabriel,61bc5259b24f10007027f21a,,Minor,Done,Matt Lavis,557058:bd906919-b0e3-4ec1-af61-1b1c41c6a595,Matt Lavis,557058:bd906919-b0e3-4ec1-af61-1b1c41c6a595,Matt Lavis,557058:bd906919-b0e3-4ec1-af61-1b1c41c6a595,03/Aug/23 8:39 AM,03/Aug/23 8:49 AM,13/Sep/23 9:06 AM,03/Aug/23 8:39 AM,,0,ott_report_2023_august,"2 options

{code:sql}select goods_nomenclature_item_id, additional_code,
validity_start_date, validity_end_date, measure_type_id, geographical_area_id, measure_sid
from utils.materialized_measures_real_end_dates m
where (validity_end_date is null or validity_end_date::date > current_date)
and validity_start_date::date <= current_date
and measure_type_id = '306'
and additional_code ilike 'X3%'
order by additional_code, goods_nomenclature_item_id {code}

Or …

Running the pref utilisation analysis file, for excise measures only (which is what was supplied)

[^tariff_data_2023-08-03.xlsx]

",,Matt Lavis,,,,557058:bd906919-b0e3-4ec1-af61-1b1c41c6a595,,,,,,,,,,,,,,,,,,,,03/Aug/23 8:49 AM;Matt.Lavis;tariff_data_2023-08-03.xlsx;https://transformuk.atlassian.net/rest/api/3/attachment/content/18029,,,,,,,,,,,,,,,,{},,,,,,,,,,,,,,,,,,1|hzzza6:hy,,,,,,,,HOTT Sprint 61,,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,,,,,,,,,28171,Support and maintenance,Done
Spike: Window Function vs Subquery (1/2 day),HOTT-3781,29948,Story,Done,HOTT,HMRC Online Trade Tariff,software,Carl Gabriel,61bc5259b24f10007027f21a,,Minor,Done,William Fish,5fad1d0c8573800069e74d00,William Fish,5fad1d0c8573800069e74d00,William Fish,5fad1d0c8573800069e74d00,07/Aug/23 9:46 AM,15/Aug/23 4:32 PM,13/Sep/23 9:06 AM,15/Aug/23 2:45 PM,,0,ott_report_2023_august,"We have views for 100% of the oplog tables (each oplog table stores versions of a given row rather than updating them inline). These views are responsible for pulling the current version of the given row based on the unique id of that row and subsequently exclude any that are marked as deleted.

When reviewing some of the work around nested set measures I noticed that these views performed terribly when each row (say a given measure_sid) had lots and lots of versions. This can happen a fair amount sadly because CDS construct files inefficiently and end up sending us lots of repeated data (especially for quota definitions, say). 

Subsequent reading showed that we were potentially using an approach for pulling the latest version which is suboptimal internally for getting the result we need and that we could take advantage of window functions. Window functions are supposed to perform better than subqueries because they:

# Reduce the number of computations the postgresql engine has to do
#  Are better understood by the postgres planners, and
# Generally reduce the number of disk operation

Executing a group and count for, say, measure_sid, goods_nomenclature_sid and quota_definition_sid values (in each table, respectively) I was able to discover the specific rows that have the largest partitions. I used these as a worst case input to a simple python script to compare the performance of using:

# The original subquery implementation
# The new window function implementation
# A materialized view to fetch all of the latest versions (same as 2, just materialized/precached - with the relevant indexes)

Taking measures as an example, here is the existing view:

{code:sql}SELECT measures1.measure_sid,
   measures1.measure_type_id,
   measures1.geographical_area_id,
   measures1.goods_nomenclature_item_id,
   measures1.validity_start_date,
   measures1.validity_end_date,
   measures1.measure_generating_regulation_role,
   measures1.measure_generating_regulation_id,
   measures1.justification_regulation_role,
   measures1.justification_regulation_id,
   measures1.stopped_flag,
   measures1.geographical_area_sid,
   measures1.goods_nomenclature_sid,
   measures1.ordernumber,
   measures1.additional_code_type_id,
   measures1.additional_code_id,
   measures1.additional_code_sid,
   measures1.reduction_indicator,
   measures1.export_refund_nomenclature_sid,
   measures1.""national"",
   measures1.tariff_measure_number,
   measures1.invalidated_by,
   measures1.invalidated_at,
   measures1.oid,
   measures1.operation,
   measures1.operation_date,
   measures1.filename
  FROM measures_oplog measures1
 WHERE (measures1.oid IN ( SELECT max(measures2.oid) AS max
          FROM measures_oplog measures2
         WHERE measures1.measure_sid = measures2.measure_sid)) AND measures1.operation::text <> 'D'::text;
{code}

And here is the new view:

{code:sql}SELECT *
FROM (
  SELECT *,
    MAX(oid) OVER(PARTITION BY measure_sid) AS max_oid
  FROM measures_oplog
) subquery
WHERE operation <> 'D'
AND oid = max_oid;
{code}

Notice one of the side advantages of this new variant is that we don’t have to keep updating the views everytime we want to introduce a new field to one of the oplog tables.

And here is my python script for comparing the performance:

{code:python}import psycopg2
import time

# Connect to your postgres DB
conn = psycopg2.connect(
    ""dbname=tariff_development user=william host=localhost port=5432""
)

# Open a cursor to perform database operations
cur = conn.cursor()

# List of measure_sids you want to test
measure_sids = [
    20180249,
    20180248,
    20180244,
    20180227,
    20180226,
    20180225,
    20180224,
    20180223,
    20180222,
    # more sids redacted
]

quota_definition_sids = [
    20634,
    20203,
    20445,
    20198,
    20922,
    22701,
    23043,
    21739,
    21918,
    21939,
    21320,
    20923,
    21797,
    23063,
    21931,
    20910,
    20911,
    21940,
    21932,
    20897,
    20293,
    23158,
    20909,
    20908,
    21309,
]


cur.execute(""SET search_path TO uk, public;"")

# Using EXPLAIN ANALYZE to force the query to run and record the time taken

query_template_1 = """"""
EXPLAIN (ANALYZE)
SELECT *
FROM quota_balance_events
WHERE quota_definition_sid = {}
""""""

query_template_2 = """"""
EXPLAIN (ANALYZE)
SELECT *
FROM view_quota_balance_events
WHERE quota_definition_sid = {}
""""""

query_template_3 = """"""
EXPLAIN (ANALYZE)
SELECT *
FROM mat_view_quota_balance_events
WHERE quota_definition_sid = {}
""""""

# Timers for each method
timer_1 = []
timer_2 = []
timer_3 = []

# For each measure_sid, run the queries and record the time taken
for quota_definition_sid in quota_definition_sids:
    query_1 = query_template_1.format(quota_definition_sid)
    start_time = time.time()
    cur.execute(query_1)
    execution_time = time.time() - start_time
    timer_1.append(execution_time)

    query_2 = query_template_2.format(quota_definition_sid)
    start_time = time.time()
    cur.execute(query_2)
    execution_time = time.time() - start_time
    timer_2.append(execution_time)

    query_3 = query_template_3.format(quota_definition_sid)
    start_time = time.time()
    cur.execute(query_3)
    execution_time = time.time() - start_time
    timer_3.append(execution_time)

# Calculate average times
avg_time_1 = sum(timer_1) / len(timer_1)
avg_time_2 = sum(timer_2) / len(timer_2)
avg_time_3 = sum(timer_3) / len(timer_3)

# Print average time for each method
print(f""Average time for method 1: {avg_time_1}"")
print(
    f""Average time for method 2: {avg_time_2} (Improvement: {100 * (avg_time_1 - avg_time_2) / avg_time_1:.2f}%)""
)
print(
    f""Average time for method 3: {avg_time_3} (Improvement: {100 * (avg_time_2 - avg_time_3) / avg_time_2:.2f}%)""
)

# Close communication with the database
cur.close()
conn.close()
{code}



For the 100 or so measure sids that had a larger number of versions, I noticed a 25% improvement in their performance with the window function variant.

For the quota definitions I noticed a 99% improvement over the standard subquery view

When comparing the views I checked all of the returned oids matched between stored copies of their results:

{code:sql}SELECT *
FROM temp_table1
FULL JOIN temp_table2
ON temp_table1.oid = temp_table2.oid
WHERE temp_table1.oid IS NULL OR temp_table2.oid IS NULL;
{code}

*Outcomes*

* For 100% of the views I tested (goods nomenclatures, measures, quota definitions) there was between a 25% and 99% reduction in the time taken to execute the queries using the window function variant
* The new views are simpler to maintain/update
* The new views are easier to read
* Materialized views (with the appropriate indexes) consistently massively improve performance. ",,William Fish,,,,5fad1d0c8573800069e74d00,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,{},,,,,,,,,,,,,,,,,,1|hzzk35:i,,,,,,,,HOTT Sprint 61,HOTT Sprint 62,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,28171,Support and maintenance,Done
Handover team admin to Carl,HOTT-3783,29950,Story,Done,HOTT,HMRC Online Trade Tariff,software,Carl Gabriel,61bc5259b24f10007027f21a,,Minor,Done,Matt Lavis,557058:bd906919-b0e3-4ec1-af61-1b1c41c6a595,Matt Lavis,557058:bd906919-b0e3-4ec1-af61-1b1c41c6a595,Matt Lavis,557058:bd906919-b0e3-4ec1-af61-1b1c41c6a595,07/Aug/23 10:14 AM,15/Aug/23 4:32 PM,13/Sep/23 9:06 AM,15/Aug/23 8:41 AM,14/Aug/23 12:00 AM,0,ott_report_2023_august,[https://confluence.tools.tax.service.gov.uk/pages/viewpage.action?spaceKey=TOOLS&title=Create+new+Team+Admin|https://confluence.tools.tax.service.gov.uk/pages/viewpage.action?spaceKey=TOOLS&title=Create+new+Team+Admin],,Matt Lavis,,,,557058:bd906919-b0e3-4ec1-af61-1b1c41c6a595,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,{},,,,,,,,,,,,,,,,,,1|hzzk3i:y,,,,,,,,HOTT Sprint 61,HOTT Sprint 62,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,28171,Support and maintenance,Done
Investigation into the QAM lamb quota balance misalignment,HOTT-3787,29954,Story,Done,HOTT,HMRC Online Trade Tariff,software,Carl Gabriel,61bc5259b24f10007027f21a,,Minor,Done,Matt Lavis,557058:bd906919-b0e3-4ec1-af61-1b1c41c6a595,Matt Lavis,557058:bd906919-b0e3-4ec1-af61-1b1c41c6a595,Matt Lavis,557058:bd906919-b0e3-4ec1-af61-1b1c41c6a595,07/Aug/23 5:13 PM,07/Aug/23 5:14 PM,13/Sep/23 9:06 AM,07/Aug/23 5:13 PM,,0,ott_report_2023_august,"Email from Steph Willis

Good afternoon Matt et all,

 

Wondering if you could help me with something please.

 

I have been keeping an eye on the Sheep meat Quota balances (052013, 052110 and 052109) and have noticed something a little odd.

 

We are aware that the coefficient calculations within the QAM system are not correct, which have skewed the balances slightly and they no longer align with each other as they should. I have been advised that a fix is being deployed late September for this.

 

However, as per the screenshots provided below, today shows that these balances (on OTT) are all aligned but QAM is not. I understand that the allocation for today will not yet be accounted for, but as the balances are taken from QAM this seems a little odd.

 

Is there a reason that OTT is showing the alignment/difference of balances?

 

!https://mail.google.com/mail/u/0?ui=2&ik=70b5b6df27&attid=0.1&permmsgid=msg-f:1773575749120820001&th=189d01bf3c980321&view=fimg&fur=ip&sz=s0-l75-ft&attbid=ANGjdJ_8T42MI2GCNcMhogZn1-GMyDedzSMxUWGMdpGqqfY8e6McqqURQL4CgOU2fO9ux4thuvFCt3A3qK--BEFSlbk4LYdtOaU8MOZmGKE5km_NiaCKYt5-YMTX-2s&disp=emb|thumbnail!

 

!https://mail.google.com/mail/u/0?ui=2&ik=70b5b6df27&attid=0.3&permmsgid=msg-f:1773575749120820001&th=189d01bf3c980321&view=fimg&fur=ip&sz=s0-l75-ft&attbid=ANGjdJ_5_Z6UHg8pYpJuyWGwAAvAN98mLe6rr2tK26MoRezlELKEncxthRMGeoTsgo15c_7T2zItr1aWeJ7RMStHLlP0ilu7LC_J_Ay9ojPl2_ZaLaM1pMZ37STrars&disp=emb|thumbnail!

 

!https://mail.google.com/mail/u/0?ui=2&ik=70b5b6df27&attid=0.5&permmsgid=msg-f:1773575749120820001&th=189d01bf3c980321&view=fimg&fur=ip&sz=s0-l75-ft&attbid=ANGjdJ8KpEYyu4fN9Tu-pJw1FzcJTsxAv0ruI0qSt2E8Up7YV7sgtniPiXl_cnpYcKFox-XJ6Fd_YT3ZLsEilDtKsuvmTaFIWWR5rACvgKDkhjLo0F4mV8XkbRCeG7o&disp=emb|thumbnail!

 

Grateful for your assistance on this one.

 

Many thanks

 

Steph",,Matt Lavis,,,,557058:bd906919-b0e3-4ec1-af61-1b1c41c6a595,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,{},,,,,,,,,,,,,,,,,,1|hzzza6:hyxr,,,,,,,,HOTT Sprint 61,,,,,,,,,,,,,,,,,,,,"07/Aug/23 5:14 PM;557058:bd906919-b0e3-4ec1-af61-1b1c41c6a595;Hi Steph,

We do get everything from QAM / CDS and have no ability to intercept it. It is a bit of a head scratcher, because Friday's QAM extract definitely has this line:<newBalance>65437731.191</newBalance>

against each of those three quotas.

*However*, on closer inspection, QAM is doing something very strange, as it is sending through two records that are recorded for exactly the same update time, but different values. This fragment below is for quota *052109*.

My notes are in orange - we got two records on Friday, and the first one, which might be what you expected to see in QAM gets overwritten by the second. This looks like very strange QAM behaviour - we should not really have two balance events on the same quota definition for the exact same timestamp - there is a business rule that is meant to prevent this from happening.

This is the rule: 

*QBAE2 There may be only one balance event with the same occurrence timestamp for a given quota.*

{noformat}                <quotaBalanceEvent> -- EVENT 1
                    <hjid>13094970</hjid>
                    <metainfo>
                        <opType>C</opType>
                        <origin>T</origin>
                        <status>L</status>
                        <transactionDate>2023-08-04T16:21:06</transactionDate>
                    </metainfo>
                    <importedAmount>23519306.502</importedAmount>
                    <lastImportDateInAllocation>2023-08-03T00:00:00</lastImportDateInAllocation>
                    <newBalance>90685693.498</newBalance> -- THIS GETS IMMEDIATELY OVERWRITTEN BY THE LATER ONE BELOW
                    <occurrenceTimestamp>2023-08-04T13:00:00</occurrenceTimestamp>
                    <oldBalance>65437731.191</oldBalance>
                </quotaBalanceEvent>
                <quotaBalanceEvent> -- EVENT 2
                    <hjid>13094969</hjid>
                    <metainfo>
                        <opType>C</opType>
                        <origin>T</origin>
                        <status>L</status>
                        <transactionDate>2023-08-04T16:21:06</transactionDate>
                    </metainfo>
                    <importedAmount>48767268.809</importedAmount>
                    <lastImportDateInAllocation>2023-08-03T00:00:00</lastImportDateInAllocation>
                    <newBalance>65437731.191</newBalance> -- THIS IS THE LAST ONE WE RECEIVE, SO WE KEEP IT
                    <occurrenceTimestamp>2023-08-04T13:00:00</occurrenceTimestamp>
                    <oldBalance>69059601.179</oldBalance>
                </quotaBalanceEvent>{noformat}



Cheers

Matt",,,,,,,,,,,,,,,,28171,Support and maintenance,Done
Customs Connect Ireland query,HOTT-3791,29958,Story,Done,HOTT,HMRC Online Trade Tariff,software,Carl Gabriel,61bc5259b24f10007027f21a,,Minor,Done,Matt Lavis,557058:bd906919-b0e3-4ec1-af61-1b1c41c6a595,Matt Lavis,557058:bd906919-b0e3-4ec1-af61-1b1c41c6a595,Matt Lavis,557058:bd906919-b0e3-4ec1-af61-1b1c41c6a595,08/Aug/23 2:53 PM,09/Aug/23 9:24 PM,13/Sep/23 9:06 AM,08/Aug/23 2:53 PM,,0,ott_report_2023_august,,,Matt Lavis,,,,557058:bd906919-b0e3-4ec1-af61-1b1c41c6a595,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,{},,,,,,,,,,,,,,,,,,1|hzzza6:hyxxz,,,,,,,,HOTT Sprint 61,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,28171,Support and maintenance,Done
Certificate token renewal - Signon application,HOTT-3793,29960,Story,Done,HOTT,HMRC Online Trade Tariff,software,Carl Gabriel,61bc5259b24f10007027f21a,,Minor,Done,William Fish,5fad1d0c8573800069e74d00,Matt Lavis,557058:bd906919-b0e3-4ec1-af61-1b1c41c6a595,Matt Lavis,557058:bd906919-b0e3-4ec1-af61-1b1c41c6a595,09/Aug/23 10:13 AM,09/Aug/23 9:24 PM,13/Sep/23 9:06 AM,09/Aug/23 12:51 PM,,0,ott_report_2023_august,"Hi,

I'm a Lead Technical Architect at [GOV.UK|http://gov.uk/]. The Trade Tariff app uses our Signon application for various things, one of which is to authorise communication between the Trade Tariff Admin application, and the Trade Tariff Backend application.

We've noticed that the bearer token issued to the admin app is due to expire on 14 August 2023. I expect that your apps will be unable to communicate with each other unless we issue you with a new token before then.

Please could someone get in touch, and we'll arrange to issue a new token.

Regards,

Simon",,Matt Lavis,,,,557058:bd906919-b0e3-4ec1-af61-1b1c41c6a595,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,{},,,,,,,,,,,,,,,,,,1|hzzza6:hyxxv,,,,,,,,HOTT Sprint 61,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,28171,Support and maintenance,Done
Revamp the certificate search UI,HOTT-3820,29988,Story,Done,HOTT,HMRC Online Trade Tariff,software,Carl Gabriel,61bc5259b24f10007027f21a,,Minor,Done,William Fish,5fad1d0c8573800069e74d00,William Fish,5fad1d0c8573800069e74d00,William Fish,5fad1d0c8573800069e74d00,11/Aug/23 10:02 AM,15/Aug/23 4:32 PM,13/Sep/23 9:06 AM,14/Aug/23 9:36 AM,,0,ott_report_2023_august,"* Add validations
* Add some context
* Use govuk formbuilder not special snowflake BZ stuff",,Jeremy Wilkins,William Fish,,,70121:25672516-c580-41e3-b0ee-efd76637d027,5fad1d0c8573800069e74d00,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,{},,,,,,,,,,,,,,,,,,1|hzzk39:,,,,,,,,HOTT Sprint 62,,,,,,,,,3.0,,,,,,,,,,2023-08-11 11:23:48.196,"11/Aug/23 12:23 PM;70121:25672516-c580-41e3-b0ee-efd76637d027;Pull Request 1585
https://github.com/trade-tariff/trade-tariff-frontend/pull/1585

Review App
https://tariff-frontend-pr1585.london.cloudapps.digital/","11/Aug/23 12:28 PM;70121:25672516-c580-41e3-b0ee-efd76637d027;Pull Request 1585
https://github.com/trade-tariff/trade-tariff-frontend/pull/1585

Review App
https://tariff-frontend-pr1585.london.cloudapps.digital/",,,,,,,,,,,,,,,28171,Support and maintenance,Done
Get group email of TAP -> CDS notifications from DBT,HOTT-3823,29991,Story,Done,HOTT,HMRC Online Trade Tariff,software,Carl Gabriel,61bc5259b24f10007027f21a,,Minor,Done,Matt Lavis,557058:bd906919-b0e3-4ec1-af61-1b1c41c6a595,Matt Lavis,557058:bd906919-b0e3-4ec1-af61-1b1c41c6a595,Matt Lavis,557058:bd906919-b0e3-4ec1-af61-1b1c41c6a595,11/Aug/23 12:35 PM,12/Aug/23 11:47 AM,13/Sep/23 9:06 AM,11/Aug/23 12:35 PM,,0,ott_report_2023_august,,,Matt Lavis,,,,557058:bd906919-b0e3-4ec1-af61-1b1c41c6a595,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,{},,,,,,,,,,,,,,,,,,1|hzzk3h:,,,,,,,,HOTT Sprint 62,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,28171,Support and maintenance,Done
Document OTT distribution lists,HOTT-3826,29994,Story,Done,HOTT,HMRC Online Trade Tariff,software,Carl Gabriel,61bc5259b24f10007027f21a,,Minor,Done,Matt Lavis,557058:bd906919-b0e3-4ec1-af61-1b1c41c6a595,Matt Lavis,557058:bd906919-b0e3-4ec1-af61-1b1c41c6a595,Matt Lavis,557058:bd906919-b0e3-4ec1-af61-1b1c41c6a595,11/Aug/23 1:58 PM,11/Aug/23 3:21 PM,13/Sep/23 9:06 AM,11/Aug/23 3:21 PM,,0,ott_report_2023_august,[https://enginedrive.sharepoint.com/sites/OETeams/Transform/TeamDrive/Forms/AllItems.aspx?RootFolder=%2Fsites%2FOETeams%2FTransform%2FTeamDrive%2FProjects%2FHMRC%2FTRN%2EHMR11896%20%2D%20HMRC%20Trade%20Tariff%20Service%2F16%2E%20Handover%20documentation%2F01%2E%20Distribution%20lists&FolderCTID=0x0120003E02D9040863094CA8FE715E6FDA96FF|https://enginedrive.sharepoint.com/sites/OETeams/Transform/TeamDrive/Forms/AllItems.aspx?RootFolder=%2Fsites%2FOETeams%2FTransform%2FTeamDrive%2FProjects%2FHMRC%2FTRN%2EHMR11896%20%2D%20HMRC%20Trade%20Tariff%20Service%2F16%2E%20Handover%20documentation%2F01%2E%20Distribution%20lists&FolderCTID=0x0120003E02D9040863094CA8FE715E6FDA96FF|smart-link] ,,Matt Lavis,,,,557058:bd906919-b0e3-4ec1-af61-1b1c41c6a595,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,{},,,,,,,,,,,,,,,,,,1|hzzk3i:i,,,,,,,,HOTT Sprint 62,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,28171,Support and maintenance,Done
Kill old expensive database clusters,HOTT-3838,30008,Task,Done,HOTT,HMRC Online Trade Tariff,software,Carl Gabriel,61bc5259b24f10007027f21a,,Minor,Done,William Fish,5fad1d0c8573800069e74d00,William Fish,5fad1d0c8573800069e74d00,William Fish,5fad1d0c8573800069e74d00,14/Aug/23 8:53 PM,06/Sep/23 4:30 PM,13/Sep/23 9:06 AM,16/Aug/23 12:45 PM,,0,ott_report_2023_august,Kill the xi and uk production clusters now that we’ve moved to merged clusters,,William Fish,,,,5fad1d0c8573800069e74d00,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,{},,,,,,,,,,,,,,,,,,1|hzzk35:9,,,,,,,,HOTT Sprint 62,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,28171,Support and maintenance,Done
"Local data fix to match production (comm codes 7019400083, 7019390083)",HOTT-3839,30009,Story,Done,HOTT,HMRC Online Trade Tariff,software,Carl Gabriel,61bc5259b24f10007027f21a,,Minor,Done,Matt Lavis,557058:bd906919-b0e3-4ec1-af61-1b1c41c6a595,Matt Lavis,557058:bd906919-b0e3-4ec1-af61-1b1c41c6a595,Matt Lavis,557058:bd906919-b0e3-4ec1-af61-1b1c41c6a595,15/Aug/23 8:42 AM,15/Aug/23 10:56 AM,13/Sep/23 9:06 AM,15/Aug/23 8:42 AM,,0,ott_report_2023_august,"{code:sql}begin transaction;
insert into goods_nomenclatures 
(
	goods_nomenclature_sid, goods_nomenclature_item_id, producline_suffix,
	validity_start_date, validity_end_date, statistical_indicator,
	operation, operation_date, filename
)
values
(
	106651, '7019390083', '80',
	'2021-12-15 00:00:00.000', '2021-12-31 00:00:00.000', 0, 
	'U', '2021-12-15', 'tariff_dailyExtract_v1_20211223T235959.gzip'
);

insert into goods_nomenclatures 
(
	goods_nomenclature_sid, goods_nomenclature_item_id, producline_suffix,
	validity_start_date, validity_end_date, statistical_indicator,
	operation, operation_date, filename
)
values
(
	107908, '7019400083', '80',
	'2021-12-15 00:00:00.000', '2021-12-31 00:00:00.000', 0, 
	'U', '2021-12-15', 'tariff_dailyExtract_v1_20211223T235959.gzip'
);
commit;{code}",,Matt Lavis,,,,557058:bd906919-b0e3-4ec1-af61-1b1c41c6a595,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,{},,,,,,,,,,,,,,,,,,1|hzzk3i:z,,,,,,,,HOTT Sprint 62,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,28171,Support and maintenance,Done
Intradev query re: VAT rates and declarable flags,HOTT-3843,30015,Story,Done,HOTT,HMRC Online Trade Tariff,software,Carl Gabriel,61bc5259b24f10007027f21a,,Minor,Done,,,Matt Lavis,557058:bd906919-b0e3-4ec1-af61-1b1c41c6a595,Matt Lavis,557058:bd906919-b0e3-4ec1-af61-1b1c41c6a595,15/Aug/23 10:52 AM,15/Aug/23 4:32 PM,13/Sep/23 9:06 AM,15/Aug/23 10:52 AM,,0,ott_report_2023_august,"Hi Matt,

 

I am wondering if you could help please.

We are unsure as to what is a declarable commodity and what is not? 

We are pulling the basic commodity code details from the [https://www.trade-tariff.service.gov.uk/api/v2/commodities/2204218110|https://www.trade-tariff.service.gov.uk/api/v2/commodities/2204218110x] based on the producsuffixline being 80 (a declarable commodity)

 

We have 214 commodities with no VAT Rates.

 

One seems to relate to a whole Section 98, related to Art.

 

See attached spreadsheet.

 

No background = headings no VAT but declarable

Yellow background = commodity no VAT but declarable

Orange background = commodity identified by Relay Port Agency that started our investigation. [https://www.trade-tariff.service.gov.uk/commodities/3406000000?country=CN|https://www.trade-tariff.service.gov.uk/commodities/3406000000?country=CN|smart-link] 

 

Would be grateful if you could shed some light please.

 

Thanks",,Matt Lavis,,,,557058:bd906919-b0e3-4ec1-af61-1b1c41c6a595,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,{},,,,,,,,,,,,,,,,,,1|hzzk3i:zi,,,,,,,,HOTT Sprint 62,,,,,,,,,,,,,,,,,,,,"15/Aug/23 10:52 AM;557058:bd906919-b0e3-4ec1-af61-1b1c41c6a595;Hi Paul

Probably the best easy to go about finding if a commodity is declarable or not is to look at the goods_nomenclatures API, by chapter, or even by section:

[https://www.trade-tariff.service.gov.uk/api/v2/goods_nomenclatures/chapter/01|https://www.trade-tariff.service.gov.uk/api/v2/goods_nomenclatures/chapter/01]

[https://www.trade-tariff.service.gov.uk/api/v2/goods_nomenclatures/section/1|https://www.trade-tariff.service.gov.uk/api/v2/goods_nomenclatures/section/1]

Look at the *declarable* flag, and this will tell you if the item is an endline or not.

With regard to the VAT data, we had this pointed out twice yesterday and think we have resolved the issues everywhere except for on commodity code 1109 - there is a caching issue which we are resolving, and continuing to run tests during the day. Apart from 1109, it is looking good.

Once that issue is resolved, there are three commodities which we know do not have VAT against them, but should:

2934999043 Fludioxonil (ISO) (CAS RN 131341-86-1) with a purity by weight of 99 % or more

2934999077 Tazemetostat (INN) (CAS 1403254-99-8) with a purity by weight of 99 % or more and its salts

2934999085 Gilteritinib (INN) (CAS 1254053-43-4) with a purity by weight of 98 % or more and its salts

This is an upstream data issue, that we are addressing with the HMRC team. In short, the VAT data *does* exist on those commodities, but has been assigned to old versions of the codes, with a different SID. We're getting a view from the CDS team as to what the fix on this is, but the majority of the issues that you noted were at our end, not CDS.

Apologies for the temporary glitch.

Matt","15/Aug/23 10:56 AM;557058:bd906919-b0e3-4ec1-af61-1b1c41c6a595;Just a further update

1109 is now resolved as well. And, to follow up on your point on chapter 98, I will check with the HMRC classification team. 98 is a special case, and I am not certain if these should have VAT rates or not, but I will check",,,,,,,,,,,,,,,28171,Support and maintenance,Done
Understand and fix issue with XI downloader,HOTT-3866,30038,Story,Done,HOTT,HMRC Online Trade Tariff,software,Carl Gabriel,61bc5259b24f10007027f21a,,Minor,Done,William Fish,5fad1d0c8573800069e74d00,William Fish,5fad1d0c8573800069e74d00,William Fish,5fad1d0c8573800069e74d00,17/Aug/23 7:22 AM,06/Sep/23 4:29 PM,13/Sep/23 9:06 AM,17/Aug/23 9:33 AM,,0,ott_report_2023_august,"[https://engine-le.sentry.io/issues/4381679209/?alert_rule_id=12852327&alert_type=issue&project=5557005&referrer=slack|https://engine-le.sentry.io/issues/4381679209/?alert_rule_id=12852327&alert_type=issue&project=5557005&referrer=slack]

{code:ruby}TariffSynchronizer::TariffUpdatesRequester::DownloadException: TariffSynchronizer::TariffUpdatesRequester::DownloadException
backtrace:

/app/app/lib/tariff_synchronizer/tariff_updates_requester.rb:67:in `rescue in send_request'
/app/app/lib/tariff_synchronizer/tariff_updates_requester.rb:54:in `send_request'
/app/app/lib/tariff_synchronizer/tariff_updates_requester.rb:28:in `block in perform'
/app/app/lib/tariff_synchronizer/tariff_updates_requester.rb:27:in `loop'
/app/app/lib/tariff_synchronizer/tariff_updates_requester.rb:27:in `perform'
/app/app/lib/tariff_synchronizer/tariff_updates_requester.rb:23:in `perform'
/app/app/lib/tariff_synchronizer/tariff_downloader.rb:55:in `response'
/app/app/lib/tariff_synchronizer/tariff_downloader.rb:59:in `download_and_create_entry'
/app/app/lib/tariff_synchronizer/tariff_downloader.rb:25:in `perform'
<internal:kernel>:90:in `tap'
/app/app/lib/tariff_synchronizer/taric_update_downloader_patched.rb:37:in `download'
/app/app/lib/tariff_synchronizer/taric_update_downloader_patched.rb:26:in `perform'
/app/app/lib/tariff_synchronizer/taric_update.rb:14:in `sync_patched'
/app/app/lib/tariff_synchronizer.rb:72:in `block (2 levels) in download'
/usr/local/bundle/gems/activesupport-7.0.6/lib/active_support/notifications.rb:206:in `block in instrument'
/usr/local/bundle/gems/activesupport-7.0.6/lib/active_support/notifications/instrumenter.rb:24:in `instrument'
/usr/local/bundle/gems/activesupport-7.0.6/lib/active_support/notifications.rb:206:in `instrument'
/app/app/lib/tariff_synchronizer.rb:62:in `instrument'
/app/app/lib/tariff_synchronizer.rb:71:in `block in download'
/usr/local/bundle/gems/redlock-2.0.2/lib/redlock/client.rb:115:in `block in lock!'
/usr/local/bundle/gems/redlock-2.0.2/lib/redlock/client.rb:90:in `lock'
/usr/local/bundle/gems/redlock-2.0.2/lib/redlock/client.rb:113:in `lock!'
/app/app/lib/trade_tariff_backend.rb:78:in `with_redis_lock'
/app/app/lib/tariff_synchronizer.rb:70:in `download'
/app/app/workers/updates_synchronizer_worker.rb:25:in `perform'
/usr/local/bundle/gems/sidekiq-7.0.9/lib/sidekiq/processor.rb:209:in `execute_job'
/usr/local/bundle/gems/sidekiq-7.0.9/lib/sidekiq/processor.rb:177:in `block (2 levels) in process'
/usr/local/bundle/gems/sidekiq-7.0.9/lib/sidekiq/middleware/chain.rb:180:in `traverse'
/usr/local/bundle/gems/sidekiq-7.0.9/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'
/usr/local/bundle/gems/sentry-sidekiq-5.10.0/lib/sentry/sidekiq/sentry_context_middleware.rb:26:in `call'
/usr/local/bundle/gems/sidekiq-7.0.9/lib/sidekiq/middleware/chain.rb:182:in `traverse'
/usr/local/bundle/gems/sidekiq-7.0.9/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'
/usr/local/bundle/gems/sidekiq-7.0.9/lib/sidekiq/metrics/tracking.rb:26:in `track'
/usr/local/bundle/gems/sidekiq-7.0.9/lib/sidekiq/metrics/tracking.rb:122:in `call'
/usr/local/bundle/gems/sidekiq-7.0.9/lib/sidekiq/middleware/chain.rb:182:in `traverse'
/usr/local/bundle/gems/sidekiq-7.0.9/lib/sidekiq/middleware/chain.rb:173:in `invoke'
/usr/local/bundle/gems/sidekiq-7.0.9/lib/sidekiq/processor.rb:176:in `block in process'
/usr/local/bundle/gems/sidekiq-7.0.9/lib/sidekiq/processor.rb:140:in `block (6 levels) in dispatch'
/usr/local/bundle/gems/sidekiq-7.0.9/lib/sidekiq/job_retry.rb:113:in `local'
/usr/local/bundle/gems/sidekiq-7.0.9/lib/sidekiq/processor.rb:139:in `block (5 levels) in dispatch'
/usr/local/bundle/gems/sidekiq-7.0.9/lib/sidekiq/rails.rb:16:in `block in call'
/usr/local/bundle/gems/activesupport-7.0.6/lib/active_support/execution_wrapper.rb:92:in `wrap'
/usr/local/bundle/gems/activesupport-7.0.6/lib/active_support/reloader.rb:72:in `block in wrap'
/usr/local/bundle/gems/activesupport-7.0.6/lib/active_support/execution_wrapper.rb:92:in `wrap'
/usr/local/bundle/gems/activesupport-7.0.6/lib/active_support/reloader.rb:71:in `wrap'
/usr/local/bundle/gems/sidekiq-7.0.9/lib/sidekiq/rails.rb:15:in `call'
/usr/local/bundle/gems/sidekiq-7.0.9/lib/sidekiq/processor.rb:135:in `block (4 levels) in dispatch'
/usr/local/bundle/gems/sidekiq-7.0.9/lib/sidekiq/processor.rb:270:in `stats'
/usr/local/bundle/gems/sidekiq-7.0.9/lib/sidekiq/processor.rb:130:in `block (3 levels) in dispatch'
/app/app/lib/query_count_job_logger.rb:8:in `block in call'
/usr/local/bundle/gems/sidekiq-7.0.9/lib/sidekiq/job_logger.rb:13:in `call'
/app/app/lib/query_count_job_logger.rb:5:in `call'
/usr/local/bundle/gems/sidekiq-7.0.9/lib/sidekiq/processor.rb:129:in `block (2 levels) in dispatch'
/usr/local/bundle/gems/sidekiq-7.0.9/lib/sidekiq/job_retry.rb:80:in `global'
/usr/local/bundle/gems/sidekiq-7.0.9/lib/sidekiq/processor.rb:128:in `block in dispatch'
/usr/local/bundle/gems/sidekiq-7.0.9/lib/sidekiq/job_logger.rb:39:in `prepare'
/usr/local/bundle/gems/sidekiq-7.0.9/lib/sidekiq/processor.rb:127:in `dispatch'
/usr/local/bundle/gems/sidekiq-7.0.9/lib/sidekiq/processor.rb:175:in `process'
/usr/local/bundle/gems/sidekiq-7.0.9/lib/sidekiq/processor.rb:82:in `process_one'
/usr/local/bundle/gems/sidekiq-7.0.9/lib/sidekiq/processor.rb:72:in `run'
/usr/local/bundle/gems/sidekiq-7.0.9/lib/sidekiq/component.rb:10:in `watchdog'
/usr/local/bundle/gems/sidekiq-7.0.9/lib/sidekiq/component.rb:19:in `block in safe_thread'

{code}",,William Fish,,,,5fad1d0c8573800069e74d00,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,{},,,,,,,,,,,,,,,,,,1|hzzk35:01,,,,,,,,HOTT Sprint 62,,,,,,,,,,,,,,,,,,,,17/Aug/23 9:33 AM;5fad1d0c8573800069e74d00;This was an unreproducible error that I resolved by rolling back and then rolling forward the XI files.,,,,,,,,,,,,,,,,28171,Support and maintenance,Done
Alc query from TMT,HOTT-3877,30074,Story,Done,HOTT,HMRC Online Trade Tariff,software,Carl Gabriel,61bc5259b24f10007027f21a,,Minor,Done,Chris Booth,62850c48bd640f0068ae388e,Chris Booth,62850c48bd640f0068ae388e,Chris Booth,62850c48bd640f0068ae388e,18/Aug/23 6:00 PM,06/Sep/23 4:28 PM,06/Sep/23 1:51 PM,21/Aug/23 5:45 PM,,0,ott_report_2023_august,"Good afternoon,

 

My name is Tara Lunn and I am one of the CIT Technical Specialists within LB S&NI. We have a this query below around duty calculation differences between CDS and CHIEF. I’m unsure if it is something you can support with, if not I’d be very grateful if you could perhaps signpost me to a colleague who could assist?

 

We have a customer who imports rum (CMCD – 2208 40 39 00).  CDS calculated their import duty on a shipment of 13,398 litres of 40% ABV rum at £375.14.  Our own [gov.uk|http://gov.uk/] duty calculator worked out the duty due on the same shipment details as £3,027.95.  The customer provided details of 5 similar shipments in 2021 where CHIEF also calculated the duty due apparently in line with the figures that the online duty calculator provided.

 

The UK Tariff for the commodity code above states: £0.50 / percentage ABV (% vol) per 100 litre (hl) + £2.60 / 100 litre (hl)- rate

We believe the +*CDS calculation*+ appears to be the correct one:

 

13398L/100= 133.98HL

133.98HLx 40%=53.592

53.592x£0.50= *£26.796*

133.98HL x£2.60= *£348.348*

*£26.796+ £348.348= £375.14*

 

 

 

+*CHIEF and the online calculator*+ instead appear to be calculating it as follows:

 

We think the online tariff calculator has not converted litres to hl for the first part of the calculation which is causing the figure to be wrong, I think the online tariff calculator has calculated it in the following method which I believe is incorrect:

13398x40%=5359.20

5359.20x£0.50= *£2679.60*

133.98HL x£2.60= *£348.348*

*£2679.60+£348.348= £3027.95*

 

Do you know which team within HMRC would deal with the configuration of CHIEF / CDS to perform duty calculations on this commodity code, who could confirm what the correct calculation of duty liability is and what the next steps should be if there is potentially a wider issue with CHIEF calculations if incorrect?",,Chris Booth,William Fish,,,62850c48bd640f0068ae388e,5fad1d0c8573800069e74d00,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,{},,,,,,,,,,,,,,,,,,1|i001j2:,,,,,,,,HOTT Sprint 62,,,,,,,,,,,,,,,,,,,2023-08-21 08:37:51.506,"18/Aug/23 6:01 PM;62850c48bd640f0068ae388e;Hey [~accountid:5fad1d0c8573800069e74d00] Could you give me a hand with this on Monday? I tried to go through our calc, but I don’t think we have the shipment value here? wondered if there was something we could look into without it? or should I go back and ask for more variables for testing","21/Aug/23 9:37 AM;5fad1d0c8573800069e74d00;Hey [~accountid:62850c48bd640f0068ae388e] 

As far as I know, this is correct

* The point of difference here is basically they’re doing 133.98 * 0.40 whereas we’re doing 133.98 * 40 (this is known as the ASVX calculation internally). My understanding is that the “per” phrasing in the duty expression they shared is what means we multiply by the exact duty amount associated with ASV.
* This is not an issue with coercian of the liters →  hectoliters though it definitely looks like it
* We introduced the ASVX calculation at the tail end of 2021 and we’ve been doing ASV * HLT since then. This effectively translates to liters of pure alcohol.
* We recently had some queries around this between Matt and HMRC around the new alcohol duties and they confirmed his calculations were correct (and that ASVX and LPA were basically the same thing). You can also see that ASVX is equivalent to LPA in his spreadsheet with the calculations in it which confirms that we’re doing it correctly.

If we are doing it incorrectly, then the fix should be fairly straight forward - a couple of lines in tests/the alcohol volume evaluator.

This feels like something we can clarify with HMRC, though.

I’m not sure if [~accountid:557058:bd906919-b0e3-4ec1-af61-1b1c41c6a595] has any thoughts on this.",21/Aug/23 9:46 AM;62850c48bd640f0068ae388e;Thanks [~accountid:5fad1d0c8573800069e74d00] ,"21/Aug/23 10:43 AM;62850c48bd640f0068ae388e;Replied with:
Morning,

I'm copying in Jane here, as I know she's been part of the alc tax work. The Online Trade Tariff calculator has gone through quite a lot of rigour, and I'm confident (through open-minded) that it's calculating correctly. I've asked a developer to give it a once over and that looks okay too.

It looks like, and Jane, can you check my logic here please? that the 2nd line in the first set of calculations is where the mistake is:

*133.98HLx 40%* is calculating 40*_%_* of 133.98 i.e. multiplying it by 0.4 (rather than 40)

The calculation should be:

*133.98HLx 40* That is to say that it should multiply 133.89hl *_per_* % of alc (i.e. x by 1 for each %), rather than multiplying it by a percentage.

Chris",,,,,,,,,,,,,28171,Support and maintenance,Done
Fix regression failures before releasing to production,HOTT-3878,30075,Story,Done,HOTT,HMRC Online Trade Tariff,software,Carl Gabriel,61bc5259b24f10007027f21a,,Minor,Done,William Fish,5fad1d0c8573800069e74d00,William Fish,5fad1d0c8573800069e74d00,William Fish,5fad1d0c8573800069e74d00,21/Aug/23 9:16 AM,06/Sep/23 4:28 PM,13/Sep/23 9:06 AM,23/Aug/23 9:38 AM,,0,ott_report_2023_august,,,William Fish,,,,5fad1d0c8573800069e74d00,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,{},,,,,,,Impediment,,,,,,,,,,,1|hzzk35:00i,,,,,,,,HOTT Sprint 62,,,,,,,,,5.0,,,,,,,,,,,,,,,,,,,,,,,,,,,28171,Support and maintenance,Done
TMT Alc query follow-up. Detailed investigation and reply,HOTT-3882,30080,Story,Done,HOTT,HMRC Online Trade Tariff,software,Carl Gabriel,61bc5259b24f10007027f21a,,Minor,Done,Chris Booth,62850c48bd640f0068ae388e,Chris Booth,62850c48bd640f0068ae388e,Chris Booth,62850c48bd640f0068ae388e,21/Aug/23 5:43 PM,06/Sep/23 4:28 PM,13/Sep/23 9:06 AM,21/Aug/23 5:44 PM,,0,ott_report_2023_august,"Morning Chris,

 

To my understanding (though very open-minded) 40% in a calculation would equate to 0.4. I can see that the first line in the second calculation is litres (13398) and not HL (133.98), as it has not converted it on the duty calculator, but the calculation is assuming it is HL which is why it is producing a much higher amount due.

 

Many Thanks",,Chris Booth,,,,62850c48bd640f0068ae388e,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,{},,,,,,,,,,,,,,,,,,1|i001vr:,,,,,,,,HOTT Sprint 62,,,,,,,,,,,,,,,,,,,,"21/Aug/23 5:44 PM;62850c48bd640f0068ae388e;Hey Kerry,

So I've checked in with our Developer again to check the order of operations the OTT duty calculator performs so that we can see if these are right or not. Apparently, this style of calculation hasn't changed a lot since ASVX changes came in December 2021 (apart from recent alc changes), especially in terms of how it deals with percentages (i.e. calculates the number of %, rather than the % itself), so if they are wrong they may have been wrong since December 2021, and through two rounds of testing. Unlikely but certainly not impossible.

It's similar but not the same as the assumptions in the first e-mail.

If the below isn't correct then you'll need to bring someone from a policy stand point into the conversation to be the arbiter of which calculation method is correct. If we need to change ours it's not a big job, but we'll need something with the level of detail below to use for the development. Likewise if we don't need to change anything, then please let us know.

I've also checked the same calculation using a date pre-August duty changes and it's coming up in the 3000 range rather than the 300 range too.

So here's what we're doing, with the *bold* as the calculated part (note the ""/"" symbols are ""per"" so they're actually multiplications):

+Stage 1:+

£0.50 / *percentage ABV (% vol) per 100 litre (hl)* + £2.60 / 100 litre (hl)

= £0.50 / *40 (%) x 133.98(hl)* +  £2.60 / 100 litre (hl)

= £0.50 / *5,359.2* +  £2.60 / 100 litre (hl)

+Stage 2:+

*£0.50 / 5,359.2* +  £2.60 / 100 litre (hl)

= *£2,679.6* +  £2.60 / 100 litre (hl)

+Stage 3:+

£2,679.6 +  *£2.60 / 100 litre (hl)*

= £2,679.6 + *£2.60 / 113.98(hl)*

= £2,679.6 + *£348.348*

+Stage 4:+

*£2,679.6 + £348.348*

*= £3,027.948*

*= £3,027.95 (rounded up)*

I realise this doesn't clarify _policy_, but it hopefully clarifies our calculations so that a determination can be made as to their correctness.

All the best,

Chris",,,,,,,,,,,,,,,,28171,Support and maintenance,Done
Undocumented endpoint on trade tariff API,HOTT-3904,30103,Story,Done,HOTT,HMRC Online Trade Tariff,software,Carl Gabriel,61bc5259b24f10007027f21a,,Minor,Done,Tanim Abedin,616d85b9892c420072e008ca,Tanim Abedin,616d85b9892c420072e008ca,Tanim Abedin,616d85b9892c420072e008ca,25/Aug/23 12:23 PM,06/Sep/23 4:22 PM,13/Sep/23 9:06 AM,31/Aug/23 9:48 AM,,0,ott_report_2023_august,"Hi,

I'm a developer working on the Tariff Application Platform at DBT and we pull data from the trade tariff API for some of our pages. I noticed there is no /measures/{id} endpoint documented but I was able to retrieve measure data from it using one of the measure IDs returned from the commodities endpoint. We're not using this undocumented endpoint in TAP currently and I don't think we would need to in future. Is this an endpoint that should be available? If so, it would be great if it was added to the documentation.


Regards,

Edie



--


Edie Pearce | she/her | Senior Developer

Digital Data and Technology Directorate (DDaT)
Department for Business & Trade


Old Admiralty Building
London
SW1A 2BL",,Tanim Abedin,,,,616d85b9892c420072e008ca,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,{},,,,,,,,,,,,,,,,,,1|i0020n:,,,,,,,,HOTT Sprint 62,HOTT Sprint 63,,,,,,,,,,,,,,,,,,,25/Aug/23 2:26 PM;616d85b9892c420072e008ca;We’ve added a ticket to our backlog to fill out the missing documentation for the referred endpoint.,,,,,,,,,,,,,,,,28171,Support and maintenance,Done
Review issue with CDS Downloader,HOTT-3909,30108,Bug,Done,HOTT,HMRC Online Trade Tariff,software,Carl Gabriel,61bc5259b24f10007027f21a,,High,Done,William Fish,5fad1d0c8573800069e74d00,William Fish,5fad1d0c8573800069e74d00,William Fish,5fad1d0c8573800069e74d00,30/Aug/23 9:21 AM,06/Sep/23 4:21 PM,13/Sep/23 9:06 AM,31/Aug/23 9:54 AM,,0,ott_report_2023_august,"!image-20230830-082104.png|width=659,height=461!",,William Fish,,,,5fad1d0c8573800069e74d00,,,,,,,,,,,,,,,,,,,,30/Aug/23 9:21 AM;ug:04210bea-1700-439d-9571-555e94283a15;image-20230830-082104.png;https://transformuk.atlassian.net/rest/api/3/attachment/content/18079,,,,,,,,,,,,,,,,{},,,,,,,,,,,,,,,,,,1|i001d8:,,,,,,,,HOTT Sprint 62,HOTT Sprint 63,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,28171,Support and maintenance,Done
Fix production deployments,HOTT-3919,30118,Bug,Done,HOTT,HMRC Online Trade Tariff,software,Carl Gabriel,61bc5259b24f10007027f21a,,Medium,Done,William Fish,5fad1d0c8573800069e74d00,William Fish,5fad1d0c8573800069e74d00,William Fish,5fad1d0c8573800069e74d00,31/Aug/23 11:52 AM,06/Sep/23 4:21 PM,13/Sep/23 9:06 AM,31/Aug/23 2:23 PM,,0,ott_report_2023_august,"We currently can’t release to production in the frontend, search query parser, admin and duty calculator

Lets unblock these so we can release today ",,William Fish,,,,5fad1d0c8573800069e74d00,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,{},,,,,,,Impediment,,,,,,,,,,,1|i001dq:zxr,,,,,,,,HOTT Sprint 63,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,28171,Support and maintenance,Done
E2E test to prove bulk search integration up,HOTT-3672,29795,Story,Done,HOTT,HMRC Online Trade Tariff,software,Carl Gabriel,61bc5259b24f10007027f21a,,Minor,Done,William Fish,5fad1d0c8573800069e74d00,William Fish,5fad1d0c8573800069e74d00,William Fish,5fad1d0c8573800069e74d00,19/Jul/23 1:16 PM,06/Sep/23 4:21 PM,13/Sep/23 9:06 AM,31/Aug/23 9:54 AM,,0,ott_report_2023_august,"Bulk search has been extensively unit tested. What can’t be covered by unit tests is the integration between all of the layers. We need a unit test which:

# Receives a POST request to {{/api/v2/bulk_searches}} with some input descriptions and extracts a queued uuid
# Polls the {{/api/v2/bulk_searches/:id}}  endpoint untii the status goes to 200
# Validates that there are short code responses for the searched-for input descriptions

See example POST content and script for interfacing with the bulk searches apis

Here’s an example structure that we need to post:

{code:json}{
  ""data"": [
    {
      ""type"": ""bulk_search"",
      ""attributes"": {
        ""input_description"": ""red herring""
      }
    },
    {
      ""type"": ""bulk_search"",
      ""attributes"": {
        ""input_description"": ""ricotta""
      }
    },
    {
      ""type"": ""bulk_search"",
      ""attributes"": {
        ""input_description"": ""flibble""
      }
    },
    {
      ""type"": ""bulk_search"",
      ""attributes"": {
        ""input_description"": ""Cosmetics""
      }
    },
    {
      ""type"": ""bulk_search"",
      ""attributes"": {
        ""input_description"": ""Leave at porch at front door""
      }
    },
    {
      ""type"": ""bulk_search"",
      ""attributes"": {
        ""input_description"": """"
      }
    },
    {
      ""type"": ""bulk_search"",
      ""attributes"": {
        ""input_description"": ""SHIRT""
      }
    },
    {
      ""type"": ""bulk_search"",
      ""attributes"": {
        ""input_description"": ""STICKER DECAL""
      }
    },
    {
      ""type"": ""bulk_search"",
      ""attributes"": {
        ""input_description"": ""LAUNDRY DETERGENT - New (count""
      }
    },
    {
      ""type"": ""bulk_search"",
      ""attributes"": {
        ""input_description"": ""HAIR BRUSH""
      }
    },
    {
      ""type"": ""bulk_search"",
      ""attributes"": {
        ""input_description"": ""NUTRITIONAL SUPPLEMENT - New (""
      }
    },
    {
      ""type"": ""bulk_search"",
      ""attributes"": {
        ""input_description"": ""SHIRT""
      }
    },
    {
      ""type"": ""bulk_search"",
      ""attributes"": {
        ""input_description"": ""SIGNAGE""
      }
    },
    {
      ""type"": ""bulk_search"",
      ""attributes"": {
        ""input_description"": ""SWEATSHIRT""
      }
    },
    {
      ""type"": ""bulk_search"",
      ""attributes"": {
        ""input_description"": ""VITAMIN""
      }
    },
    {
      ""type"": ""bulk_search"",
      ""attributes"": {
        ""input_description"": ""BALLOON""
      }
    },
    {
      ""type"": ""bulk_search"",
      ""attributes"": {
        ""input_description"": ""ABIS BOOK""
      }
    },
    {
      ""type"": ""bulk_search"",
      ""attributes"": {
        ""input_description"": ""SKIN MOISTURIZER - New (count""
      }
    },
    {
      ""type"": ""bulk_search"",
      ""attributes"": {
        ""input_description"": ""SHIRT""
      }
    },
    {
      ""type"": ""bulk_search"",
      ""attributes"": {
        ""input_description"": ""GIFT WRAP""
      }
    },
    {
      ""type"": ""bulk_search"",
      ""attributes"": {
        ""input_description"": ""CARRIER BAG CASE - New (count""
      }
    },
    {
      ""type"": ""bulk_search"",
      ""attributes"": {
        ""input_description"": ""MEDICATION""
      }
    },
    {
      ""type"": ""bulk_search"",
      ""attributes"": {
        ""input_description"": ""MICROPHONE""
      }
    },
    {
      ""type"": ""bulk_search"",
      ""attributes"": {
        ""input_description"": ""CUP HOLDER""
      }
    },
    {
      ""type"": ""bulk_search"",
      ""attributes"": {
        ""input_description"": ""SOCKS""
      }
    },
    {
      ""type"": ""bulk_search"",
      ""attributes"": {
        ""input_description"": ""PARTY DECORATION_PACK - New (c""
      }
    },
    {
      ""type"": ""bulk_search"",
      ""attributes"": {
        ""input_description"": ""AROMA DIFFUSER""
      }
    },
    {
      ""type"": ""bulk_search"",
      ""attributes"": {
        ""input_description"": ""PAJAMAS""
      }
    },
    {
      ""type"": ""bulk_search"",
      ""attributes"": {
        ""input_description"": ""MARKING PEN""
      }
    },
    {
      ""type"": ""bulk_search"",
      ""attributes"": {
        ""input_description"": ""TOWEL""
      }
    },
    {
      ""type"": ""bulk_search"",
      ""attributes"": {
        ""input_description"": ""CARD STOCK""
      }
    },
    {
      ""type"": ""bulk_search"",
      ""attributes"": {
        ""input_description"": ""COSMETIC SPONGE - New (count 1""
      }
    },
    {
      ""type"": ""bulk_search"",
      ""attributes"": {
        ""input_description"": ""HARDWARE PIN""
      }
    },
    {
      ""type"": ""bulk_search"",
      ""attributes"": {
        ""input_description"": ""OUTDOOR LIVING""
      }
    },
    {
      ""type"": ""bulk_search"",
      ""attributes"": {
        ""input_description"": ""TOYS AND GAMES""
      }
    },
    {
      ""type"": ""bulk_search"",
      ""attributes"": {
        ""input_description"": ""ABIS BOOK""
      }
    },
    {
      ""type"": ""bulk_search"",
      ""attributes"": {
        ""input_description"": ""WRITING INSTRUMENT - New (coun""
      }
    },
    {
      ""type"": ""bulk_search"",
      ""attributes"": {
        ""input_description"": ""POWER CORD""
      }
    },
    {
      ""type"": ""bulk_search"",
      ""attributes"": {
        ""input_description"": ""SWEATSHIRT""
      }
    },
    {
      ""type"": ""bulk_search"",
      ""attributes"": {
        ""input_description"": ""NECKLACE""
      }
    },
    {
      ""type"": ""bulk_search"",
      ""attributes"": {
        ""input_description"": ""SHAMPOO""
      }
    },
    {
      ""type"": ""bulk_search"",
      ""attributes"": {
        ""input_description"": ""VITAMIN""
      }
    },
    {
      ""type"": ""bulk_search"",
      ""attributes"": {
        ""input_description"": ""PAINT BRUSH""
      }
    },
    {
      ""type"": ""bulk_search"",
      ""attributes"": {
        ""input_description"": ""SHAMPOO""
      }
    },
    {
      ""type"": ""bulk_search"",
      ""attributes"": {
        ""input_description"": ""MULTIPORT HUB""
      }
    },
    {
      ""type"": ""bulk_search"",
      ""attributes"": {
        ""input_description"": ""NAIL POLISH""
      }
    },
    {
      ""type"": ""bulk_search"",
      ""attributes"": {
        ""input_description"": ""TRAY""
      }
    },
    {
      ""type"": ""bulk_search"",
      ""attributes"": {
        ""input_description"": ""TABLEWARE AND ACCESSORIES""
      }
    },
    {
      ""type"": ""bulk_search"",
      ""attributes"": {
        ""input_description"": ""TABLEWARE AND ACCESSORIES""
      }
    },
    {
      ""type"": ""bulk_search"",
      ""attributes"": {
        ""input_description"": ""TABLEWARE AND ACCESSORIES""
      }
    },
    {
      ""type"": ""bulk_search"",
      ""attributes"": {
        ""input_description"": ""TABLEWARE AND ACCESSORIES""
      }
    },
    {
      ""type"": ""bulk_search"",
      ""attributes"": {
        ""input_description"": ""TABLEWARE AND ACCESSORIES""
      }
    },
    {
      ""type"": ""bulk_search"",
      ""attributes"": {
        ""input_description"": ""TABLEWARE AND ACCESSORIES""
      }
    },
    {
      ""type"": ""bulk_search"",
      ""attributes"": {
        ""input_description"": ""PRINTED MATERIALS""
      }
    },
    {
      ""type"": ""bulk_search"",
      ""attributes"": {
        ""input_description"": ""GOODS""
      }
    },
    {
      ""type"": ""bulk_search"",
      ""attributes"": {
        ""input_description"": ""GOODS""
      }
    },
    {
      ""type"": ""bulk_search"",
      ""attributes"": {
        ""input_description"": ""PHOTOGRAPHIC GOODS""
      }
    },
    {
      ""type"": ""bulk_search"",
      ""attributes"": {
        ""input_description"": ""TABLEWARE AND ACCESSORIES""
      }
    },
    {
      ""type"": ""bulk_search"",
      ""attributes"": {
        ""input_description"": ""ACADEMIC & RETAIL CLOTHING AND ACCESSORIES""
      }
    },
    {
      ""type"": ""bulk_search"",
      ""attributes"": {
        ""input_description"": ""COMPUTER COMPONENTS""
      }
    },
    {
      ""type"": ""bulk_search"",
      ""attributes"": {
        ""input_description"": ""COMPUTER COMPONENTS""
      }
    },
    {
      ""type"": ""bulk_search"",
      ""attributes"": {
        ""input_description"": ""COMPUTER COMPONENTS""
      }
    },
    {
      ""type"": ""bulk_search"",
      ""attributes"": {
        ""input_description"": ""COMPUTER COMPONENTS""
      }
    },
    {
      ""type"": ""bulk_search"",
      ""attributes"": {
        ""input_description"": ""COMPUTER COMPONENTS""
      }
    },
    {
      ""type"": ""bulk_search"",
      ""attributes"": {
        ""input_description"": ""COMPUTER COMPONENTS""
      }
    },
    {
      ""type"": ""bulk_search"",
      ""attributes"": {
        ""input_description"": ""COMPUTER COMPONENTS""
      }
    },
    {
      ""type"": ""bulk_search"",
      ""attributes"": {
        ""input_description"": ""COMPUTER COMPONENTS""
      }
    },
    {
      ""type"": ""bulk_search"",
      ""attributes"": {
        ""input_description"": ""COMPUTER COMPONENTS""
      }
    },
    {
      ""type"": ""bulk_search"",
      ""attributes"": {
        ""input_description"": ""ELECTRONIC GOODS""
      }
    },
    {
      ""type"": ""bulk_search"",
      ""attributes"": {
        ""input_description"": ""ELECTRONIC GOODS""
      }
    },
    {
      ""type"": ""bulk_search"",
      ""attributes"": {
        ""input_description"": ""ELECTRONIC GOODS""
      }
    },
    {
      ""type"": ""bulk_search"",
      ""attributes"": {
        ""input_description"": ""ELECTRONIC GOODS""
      }
    },
    {
      ""type"": ""bulk_search"",
      ""attributes"": {
        ""input_description"": ""ELECTRONIC GOODS""
      }
    },
    {
      ""type"": ""bulk_search"",
      ""attributes"": {
        ""input_description"": ""ELECTRONIC GOODS""
      }
    },
    {
      ""type"": ""bulk_search"",
      ""attributes"": {
        ""input_description"": ""ELECTRONIC GOODS""
      }
    },
    {
      ""type"": ""bulk_search"",
      ""attributes"": {
        ""input_description"": ""ELECTRONIC GOODS""
      }
    },
    {
      ""type"": ""bulk_search"",
      ""attributes"": {
        ""input_description"": ""ELECTRONIC GOODS""
      }
    },
    {
      ""type"": ""bulk_search"",
      ""attributes"": {
        ""input_description"": ""HOME GOODS""
      }
    },
    {
      ""type"": ""bulk_search"",
      ""attributes"": {
        ""input_description"": ""HOME GOODS""
      }
    },
    {
      ""type"": ""bulk_search"",
      ""attributes"": {
        ""input_description"": ""HOME GOODS""
      }
    },
    {
      ""type"": ""bulk_search"",
      ""attributes"": {
        ""input_description"": ""HOME GOODS""
      }
    },
    {
      ""type"": ""bulk_search"",
      ""attributes"": {
        ""input_description"": ""HOME GOODS""
      }
    },
    {
      ""type"": ""bulk_search"",
      ""attributes"": {
        ""input_description"": ""HOME GOODS""
      }
    },
    {
      ""type"": ""bulk_search"",
      ""attributes"": {
        ""input_description"": ""HOME GOODS""
      }
    },
    {
      ""type"": ""bulk_search"",
      ""attributes"": {
        ""input_description"": ""HOME GOODS""
      }
    },
    {
      ""type"": ""bulk_search"",
      ""attributes"": {
        ""input_description"": ""HOME GOODS""
      }
    },
    {
      ""type"": ""bulk_search"",
      ""attributes"": {
        ""input_description"": ""BABY PRODUCTS""
      }
    },
    {
      ""type"": ""bulk_search"",
      ""attributes"": {
        ""input_description"": ""BABY PRODUCTS""
      }
    }
  ]
}
{code}

And here’s an example script for posting/pulling bulk searches:

{noformat}#!/bin/bash

# POST request to enqueue a job and extract the job ID
job_id=$(curl -s -X POST ""http://localhost:3000/bulk_searches"" -d @body.json -H 'Content-Type: application/json' -H 'Accept: application/json' | jq -r '.data.id')

echo ""Job ID: $job_id""
# Continually poll the status of the job until it's completed
while true; do
    # GET request to check the status of the job
    response=$(curl -s ""http://localhost:3000/bulk_searches/${job_id}"" -H 'Content-Type: application/json' -H 'Accept: application/json' -w ""\n%{http_code}\n"")
    body=$(echo ""$response"" | head -n -1)
    status=$(echo ""$response"" | tail -n 1)
    job_status=$(echo $body | jq -r '.data.attributes.status')
    # Extract the status from the response
    echo ""Status: $job_status ($status)""

    # Check if the status is ""complete"" or ""error or ""not_found""
    if [ ""$status"" = ""200"" ]; then
        # Output the completed job's response and break the loop
        echo ""$body"" | jq
        break
    else
        # Sleep for a while before checking again
        sleep 0.5
    fi
done
{noformat}",,Jeremy Wilkins,William Fish,,,70121:25672516-c580-41e3-b0ee-efd76637d027,5fad1d0c8573800069e74d00,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,{},,,,,,,,,,,,,,,,,,1|i001cw:i,,,,,,,,HOTT Sprint 60,HOTT Sprint 62,HOTT Sprint 63,,,,,,,5.0,,,,,,,,,,2023-08-30 10:33:55.005,"30/Aug/23 11:33 AM;70121:25672516-c580-41e3-b0ee-efd76637d027;Pull Request 1613
https://github.com/trade-tariff/trade-tariff-frontend/pull/1613

Review App
https://tariff-frontend-pr1613.london.cloudapps.digital/",,,,,,,,,,,,,,,,28715,The Windsor Framework - FPO,Done
Enable POST requests in the frontend,HOTT-3907,30106,Story,Done,HOTT,HMRC Online Trade Tariff,software,Carl Gabriel,61bc5259b24f10007027f21a,,Minor,Done,William Fish,5fad1d0c8573800069e74d00,William Fish,5fad1d0c8573800069e74d00,William Fish,5fad1d0c8573800069e74d00,29/Aug/23 8:23 PM,06/Sep/23 4:22 PM,13/Sep/23 9:06 AM,31/Aug/23 12:29 PM,,0,ott_report_2023_august,"We have a request forwarder (a reverse proxy) in the frontend [https://github.com/trade-tariff/trade-tariff-frontend/blob/main/lib/trade_tariff_frontend/request_forwarder.rb|https://github.com/trade-tariff/trade-tariff-frontend/blob/main/lib/trade_tariff_frontend/request_forwarder.rb] . This forwarder really needs removing at some point but it essentially controls which backend endpoints are accessible via which HTTP verbs in the frontend.

We want to extend this reverse proxy to include support for POST requests so that in the future we can support tests of bulk search apis.",,William Fish,,,,5fad1d0c8573800069e74d00,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,{},,,,,,,,,,,,,,,,,,1|i001cw:9,,,,,,,,HOTT Sprint 62,HOTT Sprint 63,,,,,,,,3.0,,,,,,,,,,,,,,,,,,,,,,,,,,,28715,The Windsor Framework - FPO,Done
Fix location header in the backend bulk search response,HOTT-3908,30107,Story,Done,HOTT,HMRC Online Trade Tariff,software,Carl Gabriel,61bc5259b24f10007027f21a,,Minor,Done,William Fish,5fad1d0c8573800069e74d00,William Fish,5fad1d0c8573800069e74d00,William Fish,5fad1d0c8573800069e74d00,30/Aug/23 9:11 AM,06/Sep/23 4:22 PM,13/Sep/23 9:06 AM,31/Aug/23 9:54 AM,,0,ott_report_2023_august,"This is currently set to be the path to the backend api

Adjust this to be the path to the api via the frontend",,William Fish,,,,5fad1d0c8573800069e74d00,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,{},,,,,,,,,,,,,,,,,,1|i001cx:,,,,,,,,HOTT Sprint 62,HOTT Sprint 63,,,,,,,,3.0,,,,,,,,,,,,,,,,,,,,,,,,,,,28715,The Windsor Framework - FPO,Done
Supply commodity code start and dates to Fujitsu / TSS,HOTT-3771,29937,Story,Done,HOTT,HMRC Online Trade Tariff,software,Carl Gabriel,61bc5259b24f10007027f21a,,Minor,Done,Matt Lavis,557058:bd906919-b0e3-4ec1-af61-1b1c41c6a595,Matt Lavis,557058:bd906919-b0e3-4ec1-af61-1b1c41c6a595,Matt Lavis,557058:bd906919-b0e3-4ec1-af61-1b1c41c6a595,03/Aug/23 5:04 PM,14/Aug/23 5:51 PM,13/Sep/23 9:06 AM,03/Aug/23 5:04 PM,,0,ott_report_2023_august,"{code:sql}with descriptions as (
	select distinct on (gnd.goods_nomenclature_sid)
	gnd.goods_nomenclature_sid, gnd.goods_nomenclature_item_id, gnd.productline_suffix,
	replace(regexp_replace(regexp_replace(gnd.description, E'[\\n\\r\\t]+', ' ', 'g'), '""', '', 'g'), '|', ' ') as description
	from goods_nomenclature_descriptions gnd, goods_nomenclature_description_periods gndp 
	where gnd.goods_nomenclature_sid = gndp.goods_nomenclature_sid 
	order by gnd.goods_nomenclature_sid, gndp.validity_start_date desc
)
select gn.goods_nomenclature_sid, gn.goods_nomenclature_item_id, d.description, gn.validity_start_date, gn.validity_end_date 
from descriptions d, goods_nomenclatures gn
where d.goods_nomenclature_sid = gn.goods_nomenclature_sid 
--and gn.goods_nomenclature_sid = 100078
order by goods_nomenclature_item_id, productline_suffix;{code}",,Matt Lavis,,,,557058:bd906919-b0e3-4ec1-af61-1b1c41c6a595,,,,,,,,,,,,,,,,,,,,03/Aug/23 5:52 PM;Matt.Lavis;all historic commodities3.csv;https://transformuk.atlassian.net/rest/api/3/attachment/content/18032,03/Aug/23 5:51 PM;Matt.Lavis;all historic commodities3.csv.zip;https://transformuk.atlassian.net/rest/api/3/attachment/content/18030,03/Aug/23 5:51 PM;Matt.Lavis;all historic commodities3.xlsx;https://transformuk.atlassian.net/rest/api/3/attachment/content/18031,,,,,,,,,,,,,,{},,,,,,,,,,,,,,,,,,1|hzzz9v:vm,,,,,,,,HOTT Sprint 61,,,,,,,,,3.0,,,,,,,,,,,,,,,,,,,,,,,,,,,30006,TSS Tax Point Variable Commodity Codes,Done
Additional data cut of end-dated commodity codes for Fujitsu / TSS,HOTT-3835,30005,Story,Done,HOTT,HMRC Online Trade Tariff,software,Carl Gabriel,61bc5259b24f10007027f21a,,Minor,Done,Matt Lavis,557058:bd906919-b0e3-4ec1-af61-1b1c41c6a595,Matt Lavis,557058:bd906919-b0e3-4ec1-af61-1b1c41c6a595,Matt Lavis,557058:bd906919-b0e3-4ec1-af61-1b1c41c6a595,14/Aug/23 5:48 PM,16/Aug/23 7:06 PM,13/Sep/23 9:06 AM,14/Aug/23 6:08 PM,,0,ott_report_2023_august,"NEW INSTRUCTIONS

Hi Matt ,

 

Sincere thanks for this and I note that your heads up re leaving HMRC – duly noted.

 Essentially I am trying to source a file containing a single record for each commodity code that was valid for anytime after December 31^st^ 2020. 

The suffix constraint of 80 was to ensure each commodity code only appeared once in the file. 

So the file that you have sent isn’t exactly what I hoped HMRC are/will be able to provide when we implement the change ( Rel 19 go live is October 22^nd^ 2023), which would ideally include three categories of record :

* A record for each commodity code with no effective start date and no effective end date which are therefore valid. (not included in your extract).

*_THE ABOVE IS NOT POSSIBLE_*

* A record for each commodity code with an effective start date before 1/1/2021 and no effective end date which are therefore valid.(not included in your extract)

*_THIS IS MOST COMMODITIES_*

* A record for each commodity code that has an effective end date between 31/12/2020 and date of extract which were therefore valid at some time during the operation of the TSS service(included in your extract).

*_THIS IS A SMALL FRACTION_*

This would also mean that there are NO records in the file for commodity codes with an effective end date before 1/1/2021.

Does that make sense ?

Will HMRC Tariff Team be able to run an extract as described to support the R19 implementation to enable the one off population of the TSS tariff data using the described file as the data source?

----

ORIGINAL INSTRUCTIONS

Hi Matt,

Thanks for your ongoing input on this.

We have recognised that we are only interested historically in commodity codes that ceased to be valid wef 1/1/21 or later and have a commodity code suffix of 80 (as it is only these codes that can be used in declarations).

So for our historical one-off exercise to populate the TSS commodity code table with effective start and end dates , we believe we will need a file that will only contain 3 fields , ie :

* Commodity Code (aka goods nomenclature code)
* Effective Start Date
* Effective End Date

For  all commodity codes where : 

* Commodity codes with a suffix of 80 that
* Have an (effective start date < 1/1/2021 or = null) AND
* Have an effective end date > 31/12/2020 or an effective end date of null

Would you be able to provide a file with this content when we effect this change as part of TSS release 19 ? 

Do all commodity codes with the same goods_nomenclature_item_id irrespective of suffix have their effective end date set as co-terminus when they commodity code is no longer effective ?

Why does the goods nomenclature code in the extract you provided only have 9 characters ?",,Matt Lavis,,,,557058:bd906919-b0e3-4ec1-af61-1b1c41c6a595,,,,,,,,,,,,,,,,,,,,14/Aug/23 5:52 PM;Matt.Lavis;commodities for TSS.xlsx;https://transformuk.atlassian.net/rest/api/3/attachment/content/18059,14/Aug/23 5:53 PM;Matt.Lavis;eu_commodities_2023-08-14.csv;https://transformuk.atlassian.net/rest/api/3/attachment/content/18060,,,,,,,,,,,,,,,{},,,,,,,,,,,,,,,,,,1|hzzk3i:x,,,,,,,,HOTT Sprint 62,,,,,,,,,,,,,,,,,,,,"14/Aug/23 5:52 PM;557058:bd906919-b0e3-4ec1-af61-1b1c41c6a595;Hi Ian

I'm attaching two files - the one that you want is, I believe, *eu_commodities_2023-08-14.csv*.

This lists the three fields that you asked for, for declarable comm codes that ended post-Jan 1st 2021

with the three fields:

* 10-digit comm code
* validity start date
* validity end date

The logic used is not quite the same as what you proposed, but if that's what you need, then please shout.

Instead of using those that have a productline_suffix of ""80"", I've included a list of end-lines, which are different.

There are comm codes with a PLS of ""80"" all the way up and down the hierarchy, all the way up to ""chapter"", so, while a declarable comm code must have a PLS of ""80"", a comm code with a PLS of ""80"" is not necessarily declarable.

For a comm code to be declarable, it needs to:

* have a PLS of ""80""
* be an end-line, i.e. have no descendants.

The 2nd file, which is a slightly different cut, so please don't try to compare the results of the two, is designed to show a couple of things:

* it's filterable on the two fields ""end_line"" and ""productline_suffix"", so you can see the difference
* it's a result of importing a CSV file into an Excel spreadsheet rather than just double-clicking on the CSV file to open it. This latter approach is the usual reason why data looks to be missing leading zeroes in Excel: Excel tries to be too clever, seeing the fields as numeric, therefore dumping what it thinks are leading zeroes. You can kludge this by changing the column's format to Custom, then entering 10 zeroes in the custom format, or you can import the data into Excel (File -> Import), then, when asked to specify the data type for the comm code column, select the type ""Text"". Hopefully that is why the data looked to be 9 digits long instead of 10.

Cheers

Matt","14/Aug/23 6:08 PM;557058:bd906919-b0e3-4ec1-af61-1b1c41c6a595;Sorry, there were a couple of other points there that I forgot to answer.

* I'd say that it is most common that 80s and non-80s co-terminate, but it is not the rule, and there is nothing in Taric to enforce this. I can only see one example on the current EU tariff where the 2 do not align, but it's enough to prove the rule. This is commodity code 1704909991, where the 80 was ended on 26th June, but the 10 remains.
* Would you like us to regenerate data like the CSV I sent over before, but closer to R19? If so, do you have any idea of a rough date for that?

TBH, there will be very few comm codes being end-dated between now and the end of the year.",,,,,,,,,,,,,,,30006,TSS Tax Point Variable Commodity Codes,Done
TSS variable tax date - requirements,HOTT-3871,30044,Story,Done,HOTT,HMRC Online Trade Tariff,software,Carl Gabriel,61bc5259b24f10007027f21a,,Minor,Done,Matt Lavis,557058:bd906919-b0e3-4ec1-af61-1b1c41c6a595,Matt Lavis,557058:bd906919-b0e3-4ec1-af61-1b1c41c6a595,Matt Lavis,557058:bd906919-b0e3-4ec1-af61-1b1c41c6a595,17/Aug/23 1:46 PM,17/Aug/23 1:46 PM,13/Sep/23 9:06 AM,17/Aug/23 1:46 PM,,0,ott_report_2023_august,,,Matt Lavis,,,,557058:bd906919-b0e3-4ec1-af61-1b1c41c6a595,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,{},,,,,,,,,,,,,,,,,,1|hzzk3k:hv,,,,,,,,HOTT Sprint 62,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,30006,TSS Tax Point Variable Commodity Codes,Done
Review Proposals for Video Content,HOTT-3869,30041,Story,Done,HOTT,HMRC Online Trade Tariff,software,Carl Gabriel,61bc5259b24f10007027f21a,,Minor,Done,Tanim Abedin,616d85b9892c420072e008ca,Tanim Abedin,616d85b9892c420072e008ca,Tanim Abedin,616d85b9892c420072e008ca,17/Aug/23 9:45 AM,06/Sep/23 4:29 PM,13/Sep/23 9:06 AM,18/Aug/23 9:49 AM,18/Aug/23 12:00 AM,0,ott_report_2023_august,"A proposal has been sent through for Video Content to be created with the intention of directing users towards self-serving information to themselves.

Proposal needs to be reviewed, ready for discussion on Friday 18 August 2023.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,{},,,,,,,,,,,,,,,,,,1|i001p3:,,,,,,,,HOTT Sprint 62,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,28478,Video development,Done
Introduce WoW to team and gain their views,HOTT-3680,29803,Story,Done,HOTT,HMRC Online Trade Tariff,software,Carl Gabriel,61bc5259b24f10007027f21a,,Minor,Done,Chris Booth,62850c48bd640f0068ae388e,Chris Booth,62850c48bd640f0068ae388e,Chris Booth,62850c48bd640f0068ae388e,20/Jul/23 1:48 PM,03/Aug/23 5:08 PM,13/Sep/23 9:06 AM,03/Aug/23 9:57 AM,,0,ott_report_2023_august,happening in the retro on Tuesday 25th June,,Chris Booth,,,,62850c48bd640f0068ae388e,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,{},,,,,,,,,,,,,,,,,,1|hzzza6:hyv,,,,,,,,HOTT Sprint 60,HOTT Sprint 61,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,29786,Ways of working,Done
Retro action: agree technical documentation approach,HOTT-3756,29920,Story,Done,HOTT,HMRC Online Trade Tariff,software,Carl Gabriel,61bc5259b24f10007027f21a,,Minor,Done,Chris Booth,62850c48bd640f0068ae388e,Chris Booth,62850c48bd640f0068ae388e,Chris Booth,62850c48bd640f0068ae388e,02/Aug/23 3:51 PM,06/Sep/23 4:29 PM,13/Sep/23 9:06 AM,17/Aug/23 10:01 AM,,0,ott_report_2023_august,,,Chris Booth,,,,62850c48bd640f0068ae388e,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,{},,,,,,,,,,,,,,,,,,1|i001j1:,,,,,,,,HOTT Sprint 62,,,,,,,,,,,,,,,,,,,,02/Aug/23 3:51 PM;62850c48bd640f0068ae388e;call booked for 16/8/23,,,,,,,,,,,,,,,,29786,Ways of working,Done
Retro action: Agree approach to e-2-e testing,HOTT-3757,29921,Story,Done,HOTT,HMRC Online Trade Tariff,software,Carl Gabriel,61bc5259b24f10007027f21a,,Minor,Done,Chris Booth,62850c48bd640f0068ae388e,Chris Booth,62850c48bd640f0068ae388e,Chris Booth,62850c48bd640f0068ae388e,02/Aug/23 3:52 PM,15/Aug/23 4:32 PM,13/Sep/23 9:06 AM,15/Aug/23 10:06 AM,,0,ott_report_2023_august,,,Chris Booth,,,,62850c48bd640f0068ae388e,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,{},,,,,,,,,,,,,,,,,,1|hzzk3i:m,,,,,,,,HOTT Sprint 62,,,,,,,,,,,,,,,,,,,,02/Aug/23 3:53 PM;62850c48bd640f0068ae388e;call booked for 14/8/23,,,,,,,,,,,,,,,,29786,Ways of working,Done
Service message for change to the additional code and document code (certificates) API,HOTT-3730,29893,Story,Done,HOTT,HMRC Online Trade Tariff,software,Carl Gabriel,61bc5259b24f10007027f21a,,Minor,Done,Matt Lavis,557058:bd906919-b0e3-4ec1-af61-1b1c41c6a595,Matt Lavis,557058:bd906919-b0e3-4ec1-af61-1b1c41c6a595,Matt Lavis,557058:bd906919-b0e3-4ec1-af61-1b1c41c6a595,31/Jul/23 1:38 PM,03/Aug/23 8:40 AM,13/Sep/23 9:06 AM,02/Aug/23 9:24 AM,,0,ott_report_2023_august,,,Matt Lavis,,,,557058:bd906919-b0e3-4ec1-af61-1b1c41c6a595,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,{},,,,,,,,,,,,,,,,,,1|hzzza5:i,,,,,,,,HOTT Sprint 61,,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,,,,,,,,,28445,Website content management,Done
Stop Press 8th August 23,HOTT-3790,29957,Story,Done,HOTT,HMRC Online Trade Tariff,software,Carl Gabriel,61bc5259b24f10007027f21a,,Minor,Done,Matt Lavis,557058:bd906919-b0e3-4ec1-af61-1b1c41c6a595,Matt Lavis,557058:bd906919-b0e3-4ec1-af61-1b1c41c6a595,Matt Lavis,557058:bd906919-b0e3-4ec1-af61-1b1c41c6a595,08/Aug/23 2:24 PM,09/Aug/23 9:24 PM,13/Sep/23 9:06 AM,08/Aug/23 2:53 PM,,0,ott_report_2023_august,,,Matt Lavis,,,,557058:bd906919-b0e3-4ec1-af61-1b1c41c6a595,,,,,,,,,,,,,,,,,,,,08/Aug/23 2:26 PM;Matt.Lavis;Stop press notice - 8 August 2023 (1).docx;https://transformuk.atlassian.net/rest/api/3/attachment/content/18046,,,,,,,,,,,,,,,,{},,,,,,,,,,,,,,,,,,1|hzzza6:hyxxy,,,,,,,,HOTT Sprint 61,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,28445,Website content management,Done
Stop Press - 15th August 2023,HOTT-3849,30021,Story,Done,HOTT,HMRC Online Trade Tariff,software,Carl Gabriel,61bc5259b24f10007027f21a,,Minor,Done,Tanim Abedin,616d85b9892c420072e008ca,Matt Lavis,557058:bd906919-b0e3-4ec1-af61-1b1c41c6a595,Matt Lavis,557058:bd906919-b0e3-4ec1-af61-1b1c41c6a595,15/Aug/23 12:22 PM,15/Aug/23 4:31 PM,13/Sep/23 9:06 AM,15/Aug/23 4:30 PM,,0,ott_report_2023_august,,,Matt Lavis,,,,557058:bd906919-b0e3-4ec1-af61-1b1c41c6a595,,,,,,,,,,,,,,,,,,,,15/Aug/23 12:23 PM;Matt.Lavis;Stop press notice. 15 August 2023.docx;https://transformuk.atlassian.net/rest/api/3/attachment/content/18062,,,,,,,,,,,,,,,,{},,,,,,,,,,,,,,,,,,1|hzzk3k:9,,,,,,,,HOTT Sprint 62,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,28445,Website content management,Done
Stop Press - Aug 17 2023,HOTT-3868,30040,Story,Done,HOTT,HMRC Online Trade Tariff,software,Carl Gabriel,61bc5259b24f10007027f21a,,Minor,Done,Tanim Abedin,616d85b9892c420072e008ca,Tanim Abedin,616d85b9892c420072e008ca,Tanim Abedin,616d85b9892c420072e008ca,17/Aug/23 9:33 AM,06/Sep/23 4:29 PM,13/Sep/23 9:06 AM,17/Aug/23 11:58 AM,,0,ott_report_2023_august,Publish Stop Press provided for Aug 17 2023,,Tanim Abedin,,,,616d85b9892c420072e008ca,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,{},,,,,,,,,,,,,,,,,,1|i001ov:,,,,,,,,HOTT Sprint 62,,,,,,,,,,,,,,,,,,,,"17/Aug/23 11:58 AM;616d85b9892c420072e008ca;PUBLISHED: [UK Integrated Online Tariff: Look up commodity codes, duty and VAT rates - GOV.UK (trade-tariff.service.gov.uk)|https://www.trade-tariff.service.gov.uk/news/stories/tariff-stop-press-notice---17-august-2023]",,,,,,,,,,,,,,,,28445,Website content management,Done
Analyse usage of PLS 80 / PLS other for declarability on Green Lanes,HOTT-3749,29913,Story,Done,HOTT,HMRC Online Trade Tariff,software,Carl Gabriel,61bc5259b24f10007027f21a,,Minor,Done,Matt Lavis,557058:bd906919-b0e3-4ec1-af61-1b1c41c6a595,Matt Lavis,557058:bd906919-b0e3-4ec1-af61-1b1c41c6a595,Matt Lavis,557058:bd906919-b0e3-4ec1-af61-1b1c41c6a595,02/Aug/23 12:41 PM,03/Aug/23 8:40 AM,13/Sep/23 9:06 AM,02/Aug/23 12:41 PM,,0,ott_report_2023_august,"Conclusion is that there should never be an occasion to declare a non-80 PLS commodity code

There is actually one instance where there is a commodity code with a PLS that is not 80 that does not also have an equivalent with a PLS of 80*Comm code -> PLS -> Start date -> End date*


||*goods nomenclature item id*||*product line suffix*||*Start date*||*End date*||
|1704909991|10|2007-01-01 00:00:00.000| |
|1704909991|80|2007-01-01 00:00:00.000|2023-06-26 00:00:00.000|

It's at 10 digits, so it doesn't affect WF green lanes discussions that much. I also think it is something that will get corrected soon - it only got orphaned in June this year, I suspect by mistake, and it will be resolved at the turn of the year.Rule still stands for me ... no comm code with a non-80 PLS is usable in the green lanes.",,Matt Lavis,,,,557058:bd906919-b0e3-4ec1-af61-1b1c41c6a595,,,,,,,,,,,,,,,,,,,,02/Aug/23 12:42 PM;Matt.Lavis;comparison of PLS 80 versus PLS non-80.xlsx;https://transformuk.atlassian.net/rest/api/3/attachment/content/18026,,,,,,,,,,,,,,,,{},,,,,,,,,,,,,,,,,,1|hzzza6:hi,,,,,,,,HOTT Sprint 61,,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,,,,,,,,,29681,Windsor Framework - Green Lanes & interface to TGP (Trader Goods Profile),Done
Case for UR and UX/UI for Green Lane,HOTT-3776,29943,Story,Done,HOTT,HMRC Online Trade Tariff,software,Carl Gabriel,61bc5259b24f10007027f21a,,Minor,Done,Chris Booth,62850c48bd640f0068ae388e,Chris Booth,62850c48bd640f0068ae388e,Chris Booth,62850c48bd640f0068ae388e,04/Aug/23 11:43 AM,06/Sep/23 4:28 PM,13/Sep/23 9:06 AM,22/Aug/23 8:38 PM,,0,ott_report_2023_august,Write something for Carl to get in a UR and UX/UI for Green lane changes to OTT,,Chris Booth,,,,62850c48bd640f0068ae388e,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,{},,,,,,,,,,,,,,,,,,1|i000n3:zrrzxcm,,,,,,,,HOTT Sprint 61,HOTT Sprint 62,,,,,,,,,,,,,,,,,,,22/Aug/23 8:39 PM;62850c48bd640f0068ae388e;I’m calling this ‘done’ as we’ve had the roadmap call with Chloe where the clear need for a UR and UX/UI has been laid out,,,,,,,,,,,,,,,,29681,Windsor Framework - Green Lanes & interface to TGP (Trader Goods Profile),Done
Requirements & solution review with TGP project,HOTT-3777,29944,Story,Done,HOTT,HMRC Online Trade Tariff,software,Carl Gabriel,61bc5259b24f10007027f21a,,Minor,Done,Matt Lavis,557058:bd906919-b0e3-4ec1-af61-1b1c41c6a595,Matt Lavis,557058:bd906919-b0e3-4ec1-af61-1b1c41c6a595,Matt Lavis,557058:bd906919-b0e3-4ec1-af61-1b1c41c6a595,04/Aug/23 3:40 PM,07/Aug/23 9:51 AM,13/Sep/23 9:06 AM,04/Aug/23 4:04 PM,,0,ott_report_2023_august,,,Matt Lavis,,,,557058:bd906919-b0e3-4ec1-af61-1b1c41c6a595,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,{},,,,,,,,,,,,,,,,,,1|hzzza6:hyw,,,,,,,,HOTT Sprint 61,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,29681,Windsor Framework - Green Lanes & interface to TGP (Trader Goods Profile),Done
Rough API and UI Prototype for WF green lanes & documentation of prototype,HOTT-3832,30000,Story,Done,HOTT,HMRC Online Trade Tariff,software,Carl Gabriel,61bc5259b24f10007027f21a,,Minor,Done,Matt Lavis,557058:bd906919-b0e3-4ec1-af61-1b1c41c6a595,Matt Lavis,557058:bd906919-b0e3-4ec1-af61-1b1c41c6a595,Matt Lavis,557058:bd906919-b0e3-4ec1-af61-1b1c41c6a595,13/Aug/23 11:47 AM,06/Sep/23 4:30 PM,13/Sep/23 9:06 AM,16/Aug/23 8:52 AM,,0,ott_report_2023_august,,,Matt Lavis,,,,557058:bd906919-b0e3-4ec1-af61-1b1c41c6a595,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,{},,,,,,,,,,,,,,,,,,1|hzzk3k:h,,,,,,,,HOTT Sprint 62,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,29681,Windsor Framework - Green Lanes & interface to TGP (Trader Goods Profile),Done
"TGP to OTT prototype - phase 1, build and deploy to Heroku, & documentation",HOTT-3857,30029,Story,Done,HOTT,HMRC Online Trade Tariff,software,Carl Gabriel,61bc5259b24f10007027f21a,,Minor,Done,Matt Lavis,557058:bd906919-b0e3-4ec1-af61-1b1c41c6a595,Matt Lavis,557058:bd906919-b0e3-4ec1-af61-1b1c41c6a595,Matt Lavis,557058:bd906919-b0e3-4ec1-af61-1b1c41c6a595,16/Aug/23 8:53 AM,06/Sep/23 4:30 PM,13/Sep/23 9:06 AM,16/Aug/23 8:53 AM,,0,ott_report_2023_august,,,Matt Lavis,,,,557058:bd906919-b0e3-4ec1-af61-1b1c41c6a595,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,{},,,,,,,,,,,,,,,,,,1|hzzk3k:hi,,,,,,,,HOTT Sprint 62,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,29681,Windsor Framework - Green Lanes & interface to TGP (Trader Goods Profile),Done
Ash onboarding and getting up to speed,HOTT-3875,30049,Story,Done,HOTT,HMRC Online Trade Tariff,software,Carl Gabriel,61bc5259b24f10007027f21a,,Minor,Done,Ashley Ward,5aa7adf0f75bb52a823286c7,Ashley Ward,5aa7adf0f75bb52a823286c7,Ashley Ward,5aa7adf0f75bb52a823286c7,18/Aug/23 9:52 AM,06/Sep/23 4:23 PM,13/Sep/23 9:06 AM,30/Aug/23 10:24 AM,,0,ott_report_2023_august,"* Getting accounts all set up again
** Google
** Slack
** Github
** etc
* Get up to speed with OTT data model
* Get up to speed with Matt’s prototypes
* Move Matt’s prototypes into OTT github/HMRC heroku
* Read Matt’s extensive notes",,Ashley Ward,,,,5aa7adf0f75bb52a823286c7,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,{},,,,,,,,,,,,,,,,,,1|i001q7:,,,,,,,,HOTT Sprint 62,HOTT Sprint 63,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,29681,Windsor Framework - Green Lanes & interface to TGP (Trader Goods Profile),Done
"Share early cat 1,2,3 work with NI Policy for feedback/steer",HOTT-3879,30077,Story,Done,HOTT,HMRC Online Trade Tariff,software,Carl Gabriel,61bc5259b24f10007027f21a,,Minor,Done,Chris Booth,62850c48bd640f0068ae388e,Chris Booth,62850c48bd640f0068ae388e,Chris Booth,62850c48bd640f0068ae388e,21/Aug/23 9:44 AM,06/Sep/23 4:23 PM,13/Sep/23 9:06 AM,31/Aug/23 9:33 AM,,0,ott_report_2023_august,,,Chris Booth,,,,62850c48bd640f0068ae388e,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,{},,,,,,,,,,,,,,,,,,1|i001vb:,,,,,,,,HOTT Sprint 62,HOTT Sprint 63,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,29681,Windsor Framework - Green Lanes & interface to TGP (Trader Goods Profile),Done
